{"version":3,"sources":["../node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["c","e","a","t","load","o","s","itemUrl","start","n","num","sortOrder","u","sortField","l","query","token","apiKey","signal","r","portal","_request","p","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","hasPath","portalItem","i","userItemUrl","path","d","h","m","f","FormData","append","access","method","body","deleteAll","lastIndexOf","slice","length","Blob","url","responseType","data","w"],"mappings":"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","file":"static/js/10.e227a2b8.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{get as r,isSome as a,isNone as o}from\"../../core/maybe.js\";import{join as s,getPathExtension as n}from\"../../core/urlUtils.js\";async function c(e,t={},a){await e.load(a);const o=s(e.itemUrl,\"resources\"),{start:n=1,num:c=10,sortOrder:u=\"asc\",sortField:i=\"created\"}=t,l={query:{start:n,num:c,sortOrder:u,sortField:i,token:e.apiKey},signal:r(a,\"signal\")},p=await e.portal._request(o,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function u(e,o,n,c){if(!e.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const u=e.portalItem;await u.load(c);const i=s(u.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\"),[l,d]=p(e.path),m=await h(n),f=new FormData;return l&&\".\"!==l&&f.append(\"resourcesPrefix\",l),f.append(\"fileName\",d),f.append(\"file\",m,d),f.append(\"f\",\"json\"),a(c)&&c.access&&f.append(\"access\",c.access),await u.portal._request(i,{method:\"post\",body:f,signal:r(c,\"signal\")}),e}async function i(e,a,o){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const n=s(e.userItemUrl,\"removeResources\");await e.portal._request(n,{method:\"post\",query:{resource:a.path},signal:r(o,\"signal\")}),a.portalItem=null}async function l(e,t){await e.load(t);const a=s(e.userItemUrl,\"removeResources\");return e.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:r(t,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,r]=m(e),[a,o]=p(t);return[a,o,r]}function m(e){const t=n(e);return o(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function h(t){if(t instanceof Blob)return t;return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}function w(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}export{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};\n"],"sourceRoot":""}