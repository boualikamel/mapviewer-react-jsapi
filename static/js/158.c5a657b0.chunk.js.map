{"version":3,"sources":["../node_modules/@arcgis/core/identity/IdentityForm.js","../../index.js","../../src/index.js","../node_modules/@arcgis/core/identity/IdentityModal.js","../node_modules/@arcgis/core/identity/OAuthCredential.js","../node_modules/@arcgis/core/identity/OAuthInfo.js","../node_modules/@arcgis/core/identity/ServerInfo.js","../node_modules/@arcgis/core/identity/IdentityManagerBase.js","../node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["l","a","s","e","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","this","t","o","n","d","u","class","r","oAuthInfo","info","test","lblItem","c","key","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","i","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","g","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","candidateSelectors","candidateSelector","matches","Element","getCandidates","candidates","Array","el","includeContainer","getTabindex","tabindexAttr","parseInt","node","isNaN","isContentEditable","sortOrderedTabbables","b","isInput","isNonTabbableRadio","isRadio","radioScope","queryRadios","name","window","radioSet","err","console","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","nodeUnderDetails","displayCheck","width","height","isHidden","options","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","isFocusable","Error","activeFocusTraps","trapQueue","activateTrap","activeTrap","trapIndex","deactivateTrap","delay","setTimeout","fn","findIndex","idx","arr","valueOrHandler","params","createFocusTrap","doc","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","getOption","configOverrideOptions","optionName","configOptionName","containersContain","container","getNodeForOption","optionValue","getInitialFocusNode","firstTabbableGroup","updateTabbableNodes","tabbableNodes","regularTabbables","orderedTabbables","candidate","candidateTabindex","documentOrder","tabIndex","tabbable","firstTabbableNode","lastTabbableNode","tryFocus","preventScroll","isSelectableInput","getReturnFocusNode","checkPointerDown","trap","returnFocus","checkFocusIn","targetContained","checkKey","isEscapeEvent","isTabEvent","destinationNode","containerIndex","startOfGroupIndex","destinationGroupIndex","lastOfGroupIndex","checkTab","checkClick","addListeners","activeFocusDelay","capture","passive","removeListeners","activate","onActivate","activateOptions","onPostActivate","checkCanFocusTrap","finishActivation","deactivate","clearTimeout","onDeactivate","deactivateOptions","onPostDeactivate","checkCanReturnFocus","finishDeactivation","pause","unpause","updateContainerElements","elementsAsArray","concat","containerElements","filter","element","document","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","close","p","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","Date","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","R","f","host","P","some","C","D","localStorage","sessionStorage","q","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","y","tokenValidity","normalizeWebTierAuth","_appOrigin","origin","location","_appUrlObj","_","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","addEventListener","_pageShowHandler","findServerInfo","forEach","push","findOAuthInfo","splice","indexOf","_sanitizeUrl","_isServerRsrc","O","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","Object","assign","j","scope","resources","emitTokenChange","refreshServerTokens","map","length","x","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","findCredential","destroy","resolve","_restInfoPms","_selfReq","selfDfd","_getPortalSelf","_enqueue","_isRESTService","isAdmin","serverUrl","customParameters","toLowerCase","scheme","uri","port","v","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","checkAppAccess","credential","getCredential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","save","_oAuthRedirectFunc","_protocolFunc","getResourceName","U","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","slice","_postMessageAuthHandle","endsWith","source","postMessage","message","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","headers","Promise","allSSL","portalMode","supportsOAuth","startsWith","trim","S","resourceUrl","serverInfo","options_","admin_","refresh_","focus","_doSignIn","creationTime","shift","_findOAuthInfo","parent","T","isValid","_pendingDfd","_exchangeToken","oAuthState","oAuthSignIn","_getPlatformSelf","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","w","clone","urlKey","top","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","I","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer","EventedAccessor","k","A"],"mappings":"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","file":"static/js/158.c5a657b0.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import{substitute as r}from\"../intl/substitute.js\";import o from\"../widgets/Widget.js\";import{storeNode as i}from\"../widgets/support/widgetUtils.js\";import{messageBundle as n}from\"../widgets/support/decorators/messageBundle.js\";import{tsx as u}from\"../widgets/support/jsxFactory.js\";const l={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},p=\"ArcGIS Online\";let a=class extends o{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:o,oAuthPrompt:n,messages:a}=this,d=u(\"div\",{class:l.group},r(n?a.oAuthInfo:a.info,{server:/\\.arcgis\\.com/i.test(e)?p:e,resource:`(${t||a.lblItem})`})),c=n?null:u(\"div\",{class:l.group,key:\"username\"},u(\"label\",{class:l.label},a.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:i,\"data-node-ref\":\"_usernameInputNode\",class:l.esriInput}))),m=n?null:u(\"div\",{class:l.group,key:\"password\"},u(\"label\",{class:l.label},a.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:i,\"data-node-ref\":\"_passwordInputNode\",class:l.esriInput}))),h=u(\"div\",{class:this.classes(l.group,l.footer)},u(\"input\",{type:\"submit\",disabled:!!o,value:o?a.lblSigning:a.lblOk,class:l.esriButton}),u(\"input\",{type:\"button\",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l.esriButton,l.esriButtonSecondary)})),g=s?u(\"div\",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return u(\"form\",{class:l.base,bind:this,onsubmit:this._submit},d,g,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(\"esri/identity/t9n/identity\")],a.prototype,\"messages\",void 0),s([e()],a.prototype,\"signingIn\",void 0),s([e()],a.prototype,\"server\",void 0),s([e()],a.prototype,\"resource\",void 0),s([e()],a.prototype,\"error\",void 0),s([e()],a.prototype,\"oAuthPrompt\",void 0),a=s([t(\"esri.identity.IdentityForm\")],a);var d=a;export default d;\n","import { tabbable, isFocusable } from 'tabbable';\n\nlet activeFocusDelay;\n\nconst activeFocusTraps = (function () {\n  const trapQueue = [];\n  return {\n    activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        const activeTrap = trapQueue[trapQueue.length - 1];\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n\n    deactivateTrap(trap) {\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    },\n  };\n})();\n\nconst isSelectableInput = function (node) {\n  return (\n    node.tagName &&\n    node.tagName.toLowerCase() === 'input' &&\n    typeof node.select === 'function'\n  );\n};\n\nconst isEscapeEvent = function (e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nconst isTabEvent = function (e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nconst delay = function (fn) {\n  return setTimeout(fn, 0);\n};\n\n// Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\nconst findIndex = function (arr, fn) {\n  let idx = -1;\n\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n\n  return idx;\n};\n\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\nconst valueOrHandler = function (value, ...params) {\n  return typeof value === 'function' ? value(...params) : value;\n};\n\nconst createFocusTrap = function (elements, userOptions) {\n  const doc = document;\n\n  const config = {\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true,\n    ...userOptions,\n  };\n\n  const state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n  };\n\n  let trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  const getOption = (configOverrideOptions, optionName, configOptionName) => {\n    return configOverrideOptions &&\n      configOverrideOptions[optionName] !== undefined\n      ? configOverrideOptions[optionName]\n      : config[configOptionName || optionName];\n  };\n\n  const containersContain = function (element) {\n    return state.containers.some((container) => container.contains(element));\n  };\n\n  const getNodeForOption = function (optionName) {\n    const optionValue = config[optionName];\n    if (!optionValue) {\n      return null;\n    }\n\n    let node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n      if (!node) {\n        throw new Error(`\\`${optionName}\\` refers to no known node`);\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error(`\\`${optionName}\\` did not return a node`);\n      }\n    }\n\n    return node;\n  };\n\n  const getInitialFocusNode = function () {\n    let node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      const firstTabbableGroup = state.tabbableGroups[0];\n      const firstTabbableNode =\n        firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error(\n        'Your focus-trap needs to have at least one focusable element'\n      );\n    }\n\n    return node;\n  };\n\n  const updateTabbableNodes = function () {\n    state.tabbableGroups = state.containers\n      .map((container) => {\n        const tabbableNodes = tabbable(container);\n\n        if (tabbableNodes.length > 0) {\n          return {\n            container,\n            firstTabbableNode: tabbableNodes[0],\n            lastTabbableNode: tabbableNodes[tabbableNodes.length - 1],\n          };\n        }\n\n        return undefined;\n      })\n      .filter((group) => !!group); // remove groups with no tabbable nodes\n\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n    if (\n      state.tabbableGroups.length <= 0 &&\n      !getNodeForOption('fallbackFocus')\n    ) {\n      throw new Error(\n        'Your focus-trap must have at least one container with at least one tabbable node in it at all times'\n      );\n    }\n  };\n\n  const tryFocus = function (node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({ preventScroll: !!config.preventScroll });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  const getReturnFocusNode = function (previousActiveElement) {\n    const node = getNodeForOption('setReturnFocus');\n\n    return node ? node : previousActiveElement;\n  };\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n  const checkPointerDown = function (e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target),\n      });\n      return;\n    }\n\n    // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    }\n\n    // otherwise, prevent the click\n    e.preventDefault();\n  };\n\n  // In case focus escapes the trap for some strange reason, pull it back in.\n  const checkFocusIn = function (e) {\n    const targetContained = containersContain(e.target);\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  };\n\n  // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n  const checkTab = function (e) {\n    updateTabbableNodes();\n\n    let destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's tabbable\n      //  with tabIndex='-1' and was given initial focus\n      const containerIndex = findIndex(state.tabbableGroups, ({ container }) =>\n        container.contains(e.target)\n      );\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode =\n            state.tabbableGroups[state.tabbableGroups.length - 1]\n              .lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n\n        // is the target the first tabbable node in a group?\n        let startOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ firstTabbableNode }) => e.target === firstTabbableNode\n        );\n\n        if (\n          startOfGroupIndex < 0 &&\n          state.tabbableGroups[containerIndex].container === e.target\n        ) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          const destinationGroupIndex =\n            startOfGroupIndex === 0\n              ? state.tabbableGroups.length - 1\n              : startOfGroupIndex - 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n\n        // is the target the last tabbable node in a group?\n        let lastOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ lastTabbableNode }) => e.target === lastTabbableNode\n        );\n\n        if (\n          lastOfGroupIndex < 0 &&\n          state.tabbableGroups[containerIndex].container === e.target\n        ) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          const destinationGroupIndex =\n            lastOfGroupIndex === state.tabbableGroups.length - 1\n              ? 0\n              : lastOfGroupIndex + 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n    // else, let the browser take care of [shift+]tab and move the focus\n  };\n\n  const checkKey = function (e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  const checkClick = function (e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  };\n\n  //\n  // EVENT LISTENERS\n  //\n\n  const addListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    // There can be only one listening focus trap at a time\n    activeFocusTraps.activateTrap(trap);\n\n    // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n    activeFocusDelay = config.delayInitialFocus\n      ? delay(function () {\n          tryFocus(getInitialFocusNode());\n        })\n      : tryFocus(getInitialFocusNode());\n\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false,\n    });\n\n    return trap;\n  };\n\n  const removeListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n\n    return trap;\n  };\n\n  //\n  // TRAP DEFINITION\n  //\n\n  trap = {\n    activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      const onActivate = getOption(activateOptions, 'onActivate');\n      const onPostActivate = getOption(activateOptions, 'onPostActivate');\n      const checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      const finishActivation = () => {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n        addListeners();\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(\n          finishActivation,\n          finishActivation\n        );\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n\n    deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n\n      activeFocusTraps.deactivateTrap(trap);\n\n      const onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      const onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      const checkCanReturnFocus = getOption(\n        deactivateOptions,\n        'checkCanReturnFocus'\n      );\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      const returnFocus = getOption(\n        deactivateOptions,\n        'returnFocus',\n        'returnFocusOnDeactivate'\n      );\n\n      const finishDeactivation = () => {\n        delay(() => {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(\n          getReturnFocusNode(state.nodeFocusedBeforeActivation)\n        ).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n\n    pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n\n      return this;\n    },\n\n    unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n\n      return this;\n    },\n\n    updateContainerElements(containerElements) {\n      const elementsAsArray = [].concat(containerElements).filter(Boolean);\n\n      state.containers = elementsAsArray.map((element) =>\n        typeof element === 'string' ? doc.querySelector(element) : element\n      );\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    },\n  };\n\n  // initialize container elements\n  trap.updateContainerElements(elements);\n\n  return trap;\n};\n\nexport { createFocusTrap };\n","const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    const { width, height } = node.getBoundingClientRect();\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (options, node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node, options.displayCheck) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (options, node) {\n  if (\n    !isNodeMatchingSelectorFocusable(options, node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable.bind(null, options)\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable.bind(null, options)\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"../widgets/Widget.js\";import{isWidget as r}from\"../widgets/support/widget.js\";import{createFocusTrap as n}from\"focus-trap\";import{tsx as a}from\"../widgets/support/jsxFactory.js\";import{messageBundle as c}from\"../widgets/support/decorators/messageBundle.js\";const d={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let l=class extends i{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,r=e&&!!o,n={[d.open]:r,[d.closed]:!r},c=a(\"button\",{class:d.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},a(\"span\",{\"aria-hidden\":\"true\",class:d.iconClose})),l=`${t}_title`,p=`${t}_content`,u=s?a(\"h1\",{id:l,class:d.title},s):null,m=r?a(\"div\",{bind:this,class:d.dialog,role:\"dialog\",\"aria-labelledby\":l,\"aria-describedby\":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return a(\"div\",{tabIndex:-1,class:this.classes(d.base,n)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=n(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?a(\"div\",{class:d.content,id:t,innerHTML:e}):r(e)?a(\"div\",{class:d.content,id:t},e.render()):e instanceof HTMLElement?a(\"div\",{class:d.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],l.prototype,\"container\",void 0),t([o()],l.prototype,\"content\",void 0),t([o()],l.prototype,\"open\",void 0),t([o(),c(\"esri/t9n/common\")],l.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],l.prototype,\"title\",void 0),l=t([s(\"esri.identity.IdentityModal\")],l);var p=l;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends t{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([e(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as r}from\"../core/JSONSupport.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};o([e({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasServer\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),o([e({json:{write:!0}})],s.prototype,\"server\",void 0),o([e({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),o([e({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=o([t(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as s}from\"../kernel.js\";import r from\"../request.js\";import i from\"../core/Error.js\";import n from\"../core/Evented.js\";import{on as o}from\"../core/events.js\";import a from\"../core/global.js\";import{fixJson as h}from\"../core/lang.js\";import{getDeepValue as l}from\"../core/object.js\";import{createAbortController as c,createResolver as d,onAbort as u,isAborted as p}from\"../core/promiseUtils.js\";import{urlToObject as _,hasSameOrigin as g,Url as f,queryToObject as m,normalize as v,getProxyRule as S,makeAbsolute as w,objectToQuery as I}from\"../core/urlUtils.js\";import{property as k}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as A}from\"../core/accessorSupport/decorators/subclass.js\";import y from\"./IdentityForm.js\";import U from\"./IdentityModal.js\";import T from\"./OAuthCredential.js\";import x from\"./OAuthInfo.js\";import O from\"./ServerInfo.js\";const R={},b=e=>{const t=new f(e.owningSystemUrl).host,s=new f(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},P=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let C=null,D=null;try{C=window.localStorage,D=window.sessionStorage}catch{}class q extends n{constructor(){super(),this._portalConfig=a.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=y,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=\"null\"!==window.origin?window.origin:window.location.origin,this._appUrlObj=_(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),n=!0;i||(i=new O,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),n=!1):(r=new j({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),n||r.refreshServerTokens()}toJSON(){return h({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new O(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new x(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new j(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,n=!0;t&&(s=!!t.token,r=t.error,n=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=c(),a=d();if(t.signal&&u(t.signal,(()=>{o.abort()})),u(o,(()=>{a.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))})),p(o))return a.promise;t.signal=o.signal;const h=this._isAdminResource(e),l=s?this.findCredential(e):null;let _;if(l&&r&&r.details&&498===r.details.httpStatus)l.destroy();else if(l)return _=new i(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+l.userId+\"'. You do not have access to this resource: \"+e,{error:r}),a.reject(_),a.promise;const f=this._findCredential(e,t);if(f)return a.resolve(f),a.promise;let m=this.findServerInfo(e);if(m)!m.hasServer&&this._isServerRsrc(e)&&(m._restInfoPms=this._getTokenSvcUrl(e),m.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return _=new i(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),a.reject(_),a.promise;m=new O,m.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(m.tokenServiceUrl=t,m.hasPortal=!0):(m._restInfoPms=t,m.hasServer=!0),this.registerServers([m])}return m.hasPortal&&void 0===m._selfReq&&(n||g(m.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===m.tokenServiceUrl)))&&(m._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(m.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,m,t,a,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),o=new f(this._appOrigin),a=e.shortLivedTokenValidity;let h,l,c,d,u,p,_,m;t&&(m=this.tokenValidity||a||this.defaultTokenValidity,m>a&&a>0&&(m=a)),s&&(h=s.isAdmin,l=s.serverUrl,c=s.token,p=s.signal,_=s.ssl,e.customParameters=s.customParameters),h?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,u=new f(d.toLowerCase()),e.webTierAuth&&null!=s&&s.serverUrl&&!_&&\"http\"===o.scheme&&(g(o.uri,d,!0)||\"https\"===u.scheme&&o.host===u.host&&\"7080\"===o.port&&\"7443\"===u.port)&&(d=d.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const v={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:l,token:c,expiration:m,referer:h||n?this._appOrigin:null,client:h?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:p,...null==s?void 0:s.ioArgs};n||(v.withCredentials=!1);return r(d,v).then((s=>{const r=s.data;if(!r||!r.token)return new i(\"identity-manager:authentication-failed\",\"Unable to generate token\");const n=e.server;return R[n]||(R[n]={}),t&&(R[n][t.username]=t.password),r.validity=m,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let n=!1;return this.getCredential(e,{prompt:!1}).then((o=>{let a;const h={f:\"json\"};if(\"portal\"===o.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))a=o.server+\"/sharing/rest/oauth2/validateAppAccess\",h.client_id=t;else{if(!o.token)return{credential:o};a=o.server+\"/sharing/rest\"}else{if(!o.token)return{credential:o};a=o.server+\"/rest/services\"}return o.token&&(h.token=o.token),r(a,{query:h,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new i(\"identity-manager:not-authorized\",`You are currently signed in as: '${o.userId}'.`,e.data);return n=!!e.data.viewOnlyUserTypeApp,{credential:o}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw o.destroy(),new i(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new i(\"identity-manager:invalid-request\");return{credential:o}}))})).then((e=>({credential:e.credential,viewOnly:n})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=m(e);if(r.error){const e=\"access_denied\"===r.error,t=new i(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,n=new j({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=r.persist?C:D,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),s.resolve(n)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=d(),n=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=l)||t.remove(),null==(s=c)||s.remove(),null==(r=a)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=a=h=l=c=null},o=()=>{n(),this._oAuthDfd=null,r.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&u(s.signal,(()=>{o()}));let a=new this.formConstructor;a.resource=this.getResourceName(e),a.server=t.server,this.dialog=new U,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");let h=a.on(\"cancel\",o),l=this.dialog.watch(\"open\",o),c=a.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((i=>{n();const o=new j({userId:e.username,server:t.server,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:s.isAdmin,validity:i.validity});r.resolve(o)})).catch((e=>{a.error=e,a.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=d();const n=this._oAuthDfd;null!=r&&r.signal&&u(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),n.resUrl_=e,n.sinfo_=t,n.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),n.promise;const a=new this.formConstructor;a.oAuthPrompt=!0,a.server=t.server,this.dialog=new U,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{_(),this._oAuthDfd=null,n.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))},l=a.on(\"cancel\",h),c=this.dialog.watch(\"open\",h),p=a.on(\"submit\",(()=>{_(),this._doOAuthSignIn(e,t,s)})),_=()=>{l.remove(),c.remove(),p.remove(),a.destroy(),this.dialog.destroy(),this.dialog=null};return n.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=o(window,\"message\",(t=>{var s;if((t.origin===this._appOrigin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=m(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new i(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],n=this.findServerInfo(s.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,s.userId),o=this._getIdenticalSvcIdx(e,s),!a)return-1===o&&s.resources.push(e),this._addResource(e,i),s;-1!==o&&(s.resources.splice(o,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,n=this.findServerInfo(t.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,t.userId),o=s,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!g(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!g(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new f(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const s=(t.request.proxyUrl||\"\").toLowerCase(),r=s?e.toLowerCase().indexOf(s+\"?\"):-1;return-1!==r&&(e=e.substring(r+s.length+1)),e=v(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const s=new f(e.toLowerCase()),r=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(s.uri)));return!i&&r&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),s.uri)),i||t.portalUrl&&(i=g(s,t.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,s.uri)))),i=i||this._agsPortal.test(s.path),i}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,n)=>{-1===s&&i.regex.test(e)&&(s=n),-1===r&&i.regex.test(t)&&(r=n)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&b(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+\"/admin/generateToken\",s=r(e=i+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf(\"/sharing\"),-1!==i&&(t=e.substring(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new f(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return r(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return r(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});this._appOrigin.startsWith(\"https:\")?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return r(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||g(s,e,!0)))}_checkProtocol(e,t,s,r){let n=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(o.trim().toLowerCase().startsWith(\"https:\")&&!this._appOrigin.startsWith(\"https:\")&&S(o)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!n)){s(new i(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return n}_enqueue(e,t,s,r,i,n){return r||(r=d()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=(r,n,a,h)=>{var l,c;const d=e.sinfo_,p=!e.options_||!1!==e.options_.prompt,_=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,m;if(r)t(new j({userId:r,server:d.server,token:a||null,expires:null!=h?Number(h):null,ssl:!!n}));else if(window!==window.parent&&null!=(l=this._appUrlObj.query)&&l[\"arcgis-auth-origin\"]&&null!=(c=this._appUrlObj.query)&&c[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var v;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=o(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),t(new j(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),s(i.fromJSON(e.data.error))))}));u(null==(v=e.options_)?void 0:v.signal,(()=>{r.remove()}))}else if(_){let r=_._oAuthCred;if(!r){const e=new T(_,C),t=new T(_,D);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,_._oAuthCred=r}if(r.isValid())f=new j({userId:r.userId,server:d.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),_.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(f.server,_.appId,f.token).then((e=>{f.token=e,r.token=e,r.save(),t(f)})).catch((()=>{t(f)})):t(f);else if(this._oAuthHash&&this._hasSameServerInstance(_.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;f=new j({userId:e.username,server:d.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),_.userId=f.userId,r.storage=e.persist?C:D,r.token=f.token,r.expires=f.expires,r.userId=f.userId,r.ssl=f.ssl,r.save(),this._oAuthHash=null,t(f)}else{const r=()=>{p?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,_,e.options_).then(t,s):(m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,_.appId).then((({portalUrl:e,token:s,username:i})=>{!e||g(e,this._appOrigin,!0)?(f=new j({server:d.server,userId:i,token:s}),t(f)):r()})).catch(r):r()}}else if(p){if(this._checkProtocol(e.resUrl_,d,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,r).then(t,s)}}else m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m)},n=()=>{const r=e.sinfo_,i=r.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(P(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new j(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new j({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{s(e)}))}};this._errbackFunc=s;const a=e.sinfo_.owningSystemUrl,h=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=l(\"authInfo.tokenServicesUrl\",t)||l(\"authInfo.tokenServiceUrl\",t)||l(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=l(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}h&&s.owningSystemUrl?n():r()}),(()=>{e.sinfo_._restInfoPms=null;const t=new i(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):h&&a?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,n,o;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(n)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?r(t.username,t.allSSL,t.portalToken,t.tokenExpiration):r()})):r()}_generateOAuthInfo(e){let t,s,i=e.portalUrl;const n=e.customBaseUrl,o=e.owningTenant,a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return a&&s?(this._hasTestedIfAppIsOnPortal=!0,t=r(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new x({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return i=i.replace(/^http:/i,\"https:\"),r(i+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:w(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&n?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+n:t.portalUrl=i,t.popup=window!==window.top||!(g(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,s){const r={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(r.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(r),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?w(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId),!s.popup&&this._doPortalSignIn(e)&&(n.redirectToUserOrgUrl=!0);const h=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",l=h+\"?\"+I(n);if(s.popup){const e=window.open(l,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new i(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=o(a,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new i(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:h,resourceUrl:e,serverInfo:t,oAuthInfo:s}):window.location.href=l}}q.prototype.declaredClass=\"esri.identity.IdentityManagerBase\";let j=class extends n.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=s.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,i=r&&P(e,s._legacyFed),n=e.webTierAuth,o=n&&s.normalizeWebTierAuth,a=R[this.server],h=a&&a[this.userId];let l,c=this.resources&&this.resources[0],d=r&&s.findServerInfo(t),u={username:this.userId,password:h};if(n&&!o)return;r&&!d&&s.serverInfos.some((e=>(s._isIdProvider(t,e.server)&&(d=e),!!d)));const p=d&&s.findCredential(d.server,this.userId);if(!r||p){if(!i){if(r)l={serverUrl:c,token:p&&p.token,ssl:p&&p.ssl};else if(o)u=null,l={ssl:this.ssl};else{if(!h){let t;return c&&(c=s._sanitizeUrl(c),this._enqueued=1,t=s._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return s.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}p.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&s.credentials.forEach((e=>{const t=s.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(s._hasSameServerInstance(this.server,r)||s._isIdProvider(r,this.server))&&(P(t,s._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&s.findServerInfo(this.server),r=t&&t.owningSystemUrl,i=r&&s.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!i||!i.webTierAuth||s.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=s.credentials.indexOf(this);e>-1&&s.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=h({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};e([k()],j.prototype,\"creationTime\",void 0),e([k()],j.prototype,\"expires\",void 0),e([k()],j.prototype,\"isAdmin\",void 0),e([k()],j.prototype,\"oAuthState\",void 0),e([k()],j.prototype,\"resources\",void 0),e([k()],j.prototype,\"scope\",void 0),e([k()],j.prototype,\"server\",void 0),e([k()],j.prototype,\"ssl\",void 0),e([k()],j.prototype,\"token\",void 0),e([k()],j.prototype,\"tokenRefreshBuffer\",void 0),e([k()],j.prototype,\"userId\",void 0),e([k()],j.prototype,\"validity\",void 0),j=e([A(\"esri.identity.Credential\")],j);export{j as Credential,q as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{setId as e}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";class r extends t{}r.prototype.declaredClass=\"esri.identity.IdentityManager\";const s=new r;e(s);export default s;\n"],"sourceRoot":""}