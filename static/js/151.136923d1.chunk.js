(this["webpackJsonpjsapi-create-react-app"]=this["webpackJsonpjsapi-create-react-app"]||[]).push([[151],{962:function(t,e,n){"use strict";n.r(e),n.d(e,"work",(function(){return R})),n.d(e,"wrappedWork",(function(){return J}));var r=n(29);function o(t,e,n){const o=t.byteLength/(4*e),l=new Uint32Array(t,0,o*e);let f=new Uint32Array(o);const u=n&&n.minReduction||0,g=n&&n.originalIndices||null,d=n&&n.componentOffsets||null;let p=0;if(d)for(let r=0;r<d.length-1;r++){const t=d[r+1]-d[r];t>p&&(p=t)}else p=o;const h=Math.floor(1.1*p)+1;(null==a||a.length<2*h)&&(a=new Uint32Array(Object(r.n)(2*h)));for(let r=0;r<2*h;r++)a[r]=0;let b=0;const m=!!d&&!!g,w=m?g.length:o,j=m?new Uint32Array(g.length):null,O=1.96;let v=0!==u?Math.ceil(4*O*O/(u*u)*u*(1-u)):w,y=1,A=d?d[1]:w;for(let r=0;r<w;r++){if(r===v){const t=1-b/r;if(t+O*Math.sqrt(t*(1-t)/r)<u)return null;v*=2}if(r===A){for(let t=0;t<2*h;t++)a[t]=0;if(g)for(let t=d[y-1];t<d[y];t++)j[t]=f[g[t]];A=d[++y]}const t=m?g[r]:r,n=t*e,o=s(l,n,e);let c=o%h,p=b;for(;0!==a[2*c+1];){if(a[2*c]===o){const t=a[2*c+1]-1;if(i(l,n,t*e,e)){p=f[t];break}}c++,c>=h&&(c-=h)}p===b&&(a[2*c]=o,a[2*c+1]=t+1,b++),f[t]=p}if(0!==u&&1-b/o<u)return null;if(m){for(let t=d[y-1];t<j.length;t++)j[t]=f[g[t]];f=j}const I=new Uint32Array(e*b);b=0;for(let r=0;r<w;r++)f[r]===b&&(c(l,(m?g[r]:r)*e,I,b*e,e),b++);if(g&&!m){const t=new Uint32Array(g.length);for(let e=0;e<t.length;e++)t[e]=f[g[e]];f=t}return{buffer:I.buffer,indices:f,uniqueCount:b}}function i(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function c(t,e,n,r,o){for(let i=0;i<o;i++)n[r+i]=t[e+i]}function s(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null;var l=n(478),f=n(170);const u=Object(f.a)().vec3f("position").u16("componentIndex").u16("_padding"),g=Object(f.a)().vec2u8("sideness"),d=(Object(l.a)(g),Object(f.a)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0}).u16("_padding2",{glPadding:!0})),p=d.clone().vec3f("normal"),h=d.clone().vec3f("normalA").vec3f("normalB");var b=n(473),m=n(15),w=n(4);class j{updateSettings(t){this.settings=t}write(t,e,n){const r=function(t){const e=O;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],y[0]=5381;for(let n=0;n<v.length;n++)y[0]=31*y[0]+v[n];return y[0]}(n);A.seed=r;const o=A.getIntRange(0,255),i=A.getIntRange(0,this.settings.variants-1),c=A.getFloat(),s=255*(.5*function(t,e){const n=t<0?-1:1;return Math.pow(Math.abs(t),1.2)*n}(-(1-Math.min(c/.7,1))+Math.max(0,c-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,o),t.variantStroke.set(e,i),t.variantExtension.set(e,s)}trim(t,e){return t.slice(0,e)}}const O=new Float32Array(6),v=new Uint32Array(O.buffer),y=new Uint32Array(1),A=new b.a;class I{constructor(){this.commonWriter=new j}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return p.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),Object(w.c)(U,n.faceNormal0,n.faceNormal1),Object(w.o)(U,U),t.normal.setVec(e,U)}trim(t,e){return this.commonWriter.trim(t,e)}}I.Layout=p,I.glLayout=Object(l.a)(p,{divisor:1});class S{constructor(){this.commonWriter=new j}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return h.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}S.Layout=h,S.glLayout=Object(l.a)(h,{divisor:1});const U=Object(m.e)();var N=n(80);function V(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:x(t.layout)}}function x(t){const e=new Array;return t.fields.forEach(((t,n)=>{const r={...t,constructor:k(t.constructor)};e.push([n,r])})),{stride:t.stride,fields:e,fieldNames:t.fieldNames}}const E=[N.a,N.m,N.u,N.C,N.f,N.h,N.b,N.n,N.v,N.D,N.g,N.i,N.l,N.t,N.B,N.J,N.j,N.r,N.z,N.H,N.k,N.s,N.A,N.I,N.e,N.q,N.y,N.G,N.c,N.o,N.w,N.E,N.d,N.p,N.x,N.F];function k(t){return`${t.ElementType}_${t.ElementCount}`}const D=new Map;function M(t,e){const n=t.length/3,r=new Uint32Array(e+1),o=new Uint32Array(e+1),i=(t,e)=>{t<e?r[t+1]++:o[e+1]++};for(let b=0;b<n;b++){const e=t[3*b],n=t[3*b+1],r=t[3*b+2];i(e,n),i(n,r),i(r,e)}let c=0,s=0;for(let b=0;b<e;b++){const t=r[b+1],e=o[b+1];r[b+1]=c,o[b+1]=s,c+=t,s+=e}const a=new Uint32Array(6*n),l=r[e],f=(t,e,n)=>{if(t<e){const o=r[t+1]++;a[2*o]=e,a[2*o+1]=n}else{const r=o[e+1]++;a[2*l+2*r]=t,a[2*l+2*r+1]=n}};for(let b=0;b<n;b++){const e=t[3*b],n=t[3*b+1],r=t[3*b+2];f(e,n,b),f(n,r,b),f(r,e,b)}const u=(t,e)=>{const n=2*t,r=e-t;for(let o=1;o<r;o++){const t=a[n+2*o],e=a[n+2*o+1];let r=o-1;for(;r>=0&&a[n+2*r]>t;r--)a[n+2*r+2]=a[n+2*r],a[n+2*r+3]=a[n+2*r+1];a[n+2*r+2]=t,a[n+2*r+3]=e}};for(let b=0;b<e;b++)u(r[b],r[b+1]),u(l+o[b],l+o[b+1]);const g=new Int32Array(3*n),d=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=d(t,e);g[3*e+n]=-1},h=(t,e,n,r)=>{const o=d(t,e);g[3*e+o]=r;const i=d(n,r);g[3*r+i]=e};for(let b=0;b<e;b++){let t=r[b];const e=r[b+1];let n=o[b];const i=o[b+1];for(;t<e&&n<i;){const e=a[2*t],r=a[2*l+2*n];e===r?(h(b,a[2*t+1],r,a[2*l+2*n+1]),t++,n++):e<r?(p(b,a[2*t+1]),t++):(p(r,a[2*l+2*n+1]),n++)}for(;t<e;)p(b,a[2*t+1]),t++;for(;n<i;)p(a[2*l+2*n],a[2*l+2*n+1]),n++}return g}E.forEach((t=>D.set(k(t),t)));var L=n(79),W=n(109),B=n(213);function F(t,e){return t.cosAngle<e}function q(t,e){return t.cosAngle>e}function C(t,e){const n=Object(r.b)(t.cosAngle),o=P.fwd,i=P.ortho;return Object(B.c)(o,t.position1,t.position0),n*(Object(w.e)(Object(w.d)(i,t.faceNormal0,t.faceNormal1),o)>0?-1:1)>e}const P={edge:{position0:Object(m.e)(),position1:Object(m.e)(),faceNormal0:Object(m.e)(),faceNormal1:Object(m.e)(),componentIndex:0,cosAngle:0},ortho:Object(m.e)(),fwd:Object(m.e)()},_={v0:Object(m.e)(),v1:Object(m.e)(),v2:Object(m.e)()},z={anglePlanar:4,angleSignificantEdge:35};async function J(t){const e=function(t){return{data:u.createView(t.dataBuffer),originalIndices:"Uint32Array"===t.originalIndicesType?new Uint32Array(t.originalIndicesBuffer):"Uint16Array"===t.originalIndicesType?new Uint16Array(t.originalIndicesBuffer):void 0,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),n=R(e),r=[e.data.buffer];return{result:function(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:V(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:V(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}(n,r),transferList:r}}function R(t){const e=function(t,e,n){if(e&&n)return{faces:n,neighbors:M(n,t.count),vertices:t};{const e=o(t.buffer,t.stride/4,{originalIndices:n}),r=M(e.indices,e.uniqueCount);return{faces:e.indices,neighbors:r,vertices:u.createView(e.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return T.updateSettings(t.writerSettings),$.updateSettings(t.writerSettings),function(t,e,n,o=z){const i=t.vertices.position,c=t.vertices.componentIndex,s=Object(r.f)(o.anglePlanar),a=Object(r.f)(o.angleSignificantEdge),l=Math.cos(a),f=Math.cos(s),u=P.edge,g=u.position0,d=u.position1,p=u.faceNormal0,h=u.faceNormal1,b=function(t){const e=t.faces.length/3,n=t.vertices.position,r=t.faces,o=_.v0,i=_.v1,c=_.v2,s=new Float32Array(3*e);for(let a=0;a<e;a++){const t=r[3*a+0],e=r[3*a+1],l=r[3*a+2];n.getVec(t,o),n.getVec(e,i),n.getVec(l,c),Object(w.g)(i,i,o),Object(w.g)(c,c,o),Object(w.d)(o,i,c),Object(w.o)(o,o),s[3*a+0]=o[0],s[3*a+1]=o[1],s[3*a+2]=o[2]}return s}(t),m=function(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors;let o=0;for(let s=0;s<e;s++){const t=r[3*s+0],e=r[3*s+1],i=r[3*s+2],c=n[3*s+0],a=n[3*s+1],l=n[3*s+2];o+=-1===t||c<a?1:0,o+=-1===e||a<l?1:0,o+=-1===i||l<c?1:0}const i=new Int32Array(4*o);let c=0;for(let s=0;s<e;s++){const t=r[3*s+0],e=r[3*s+1],o=r[3*s+2],a=n[3*s+0],l=n[3*s+1],f=n[3*s+2];(-1===t||a<l)&&(i[c++]=a,i[c++]=l,i[c++]=s,i[c++]=t),(-1===e||l<f)&&(i[c++]=l,i[c++]=f,i[c++]=s,i[c++]=e),(-1===o||f<a)&&(i[c++]=f,i[c++]=a,i[c++]=s,i[c++]=o)}return i}(t),j=m.length/4,O=e.allocate(j);let v=0;const y=j,A=n.allocate(y);let I=0,S=0,U=0;const N=Object(W.h)(0,j),V=new Float32Array(j);Object(L.b)(V,((t,e,n)=>{i.getVec(m[4*e+0],g),i.getVec(m[4*e+1],d),n[e]=Object(w.l)(g,d)})),N.sort(((t,e)=>V[e]-V[t]));const x=new Array,E=new Array;for(let r=0;r<j;r++){const t=N[r],o=V[t],a=m[4*t+0],j=m[4*t+1],y=m[4*t+2],k=m[4*t+3],D=-1===k;if(i.getVec(a,g),i.getVec(j,d),D)Object(w.s)(p,b[3*y+0],b[3*y+1],b[3*y+2]),Object(w.h)(h,p),u.componentIndex=c.get(a),u.cosAngle=Object(w.e)(p,h);else{if(Object(w.s)(p,b[3*y+0],b[3*y+1],b[3*y+2]),Object(w.s)(h,b[3*k+0],b[3*k+1],b[3*k+2]),u.componentIndex=c.get(a),u.cosAngle=Object(w.e)(p,h),q(u,f))continue;u.cosAngle<-.9999&&Object(w.h)(h,p)}S+=o,U++,D||F(u,l)?(e.write(O,v++,u),x.push(o)):C(u,s)&&(n.write(A,I++,u),E.push(o))}const k=new Float32Array(x.reverse()),D=new Float32Array(E.reverse());return{regular:{instancesData:e.trim(O,v),lodInfo:{lengths:k}},silhouette:{instancesData:n.trim(A,I),lodInfo:{lengths:D}},averageEdgeLength:S/U}}(e,T,$)}const T=new I,$=new S}}]);