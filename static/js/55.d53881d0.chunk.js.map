{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js","../node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js","../node_modules/@arcgis/core/chunks/vec32.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","../node_modules/@arcgis/core/support/requestImageUtils.js","../node_modules/@arcgis/core/chunks/vec33.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js","../node_modules/@arcgis/core/geometry/support/buffer/math/common.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js","../node_modules/@arcgis/core/libs/basisu/BasisU.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DecodeNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialTexture.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateMainLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLDriverTest.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js","../node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js","../node_modules/@arcgis/core/chunks/DefaultMaterial.glsl.js","../node_modules/@arcgis/core/chunks/RealisticTree.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js"],"names":["t","extensions","add","fragment","code","e","u","a","include","r","supportsTextureAtlas","attributeTextureCoordinates","R","shader","get","i","this","configuration","build","OITEnabled","transparencyPassType","output","viewingMode","receiveShadows","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","symbolColor","symbolColors","vvSize","vvColor","vvInstancingEnabled","instanced","instancedColor","instancedDoublePrecision","pbrMode","usePBR","isSchematic","hasMetalnessAndRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","hasNormalTexture","hasColorTexture","receiveAmbientOcclusion","useCustomDTRExponentForWater","normalType","normalsTypeDerivate","doubleSidedMode","vertexTangents","textureAlphaPremultiplied","attributeColor","vertexColors","screenSizePerspectiveEnabled","screenSizePerspective","verticalOffsetEnabled","verticalOffset","offsetBackfaces","doublePrecisionRequiresObfuscation","c","rctx","alphaDiscardMode","multipassTerrainEnabled","cullAboveGround","M","b","program","camera","projectionMatrix","l","setUniform2fv","nearFar","inverseViewport","setUniform1f","opacity","layerOpacity","setUniform4fv","externalColor","setUniform1i","D","colorMixMode","lighting","setUniforms","setUniform3fv","ambient","diffuse","n","s","p","o","w","textureAlphaMode","textureAlphaCutoff","shadowMap","bind","ssaoHelper","viewInverseTransposeMatrix","origin","h","viewMatrix","rebindTextures","d","setUniformMatrix4fv","bindCustomOrigin","slicePlane","A","blending","transparent","y","x","culling","L","E","cullFace","depthTest","func","T","depthWrite","writeDepth","U","colorWrite","z","stencilWrite","sceneHasOcludees","S","stencilTest","C","O","polygonOffset","P","enableOffset","_occludeePipelineState","setPipeline","pipeline","f","m","j","H","arguments","v","g","count","prototype","supportsEdges","techniqueConfig","q","vertexBufferLayout","getVertexBufferLayout","params","instanceBufferLayout","getInstanceBufferLayout","castShadows","indexOf","vvColorEnabled","normalTextureId","textureId","vvSizeEnabled","normals","treeRendering","doubleSided","doubleSidedType","shadowMappingEnabled","ssaoEnabled","receiveSSAO","metallicRoughnessTextureId","emissiveTextureId","occlusionTextureId","offsetTransparentBackfaces","relativeElevation","B","eye","I","transform","inverseRotation","_","vec3f","vec4f","vec2f","vec4u8","mat3f","mat4f","material","updateParameters","_material","updateTexture","_technique","_techniqueRep","releaseAndAcquire","getTechniqueConfig","_output","setParameterValues","hasOccludees","_updateShadowState","_updateOccludeeState","bindPass","bindTextures","getPipelineState","initTextureTransparent","emissiveFactor","mrrFactors","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvSizeValue","vvColorValues","vvColorColors","vvSymbolAnchor","vvSymbolRotationMatrix","createBuffer","indices","length","transformation","invTranspTransformation","getLogger","textureDefinitions","resource","textures","streamDataRequester","ok","value","data","error","request","details","url","topology","vertexAttributes","warn","faces","values","valueType","valuesPerElement","parse","version","validate","model","name","geometries","materialDefinitions","Map","push","size","exclusive","Uint32Array","texture","has","image","set","id","substring","lastIndexOf","transparency","alphaChannelUsage","externalColorMixMode","materialParamsMixin","Object","assign","position","stageResources","materials","pivotOffset","boundingBox","numberOfVertices","lodThreshold","forEach","boundingInfo","getBBMin","getBBMax","images","encoding","noUnpackFlip","wrap","preMultiplyAlpha","disableTextures","Promise","resolve","then","refId","channels","all","region","$","fileType","cache","loadWOSR","N","lods","referenceBoundingBox","isEsriSymbolResource","isWosr","remove","loadGLTF","meta","uri","J","customMeta","esriTreeRendering","specifiedLodIndex","K","match","Number","Array","parts","attributes","normal","color","texCoord0","tangent","textureColor","parameters","textureNormal","textureOcclusion","textureEmissive","textureMetallicRoughness","alphaMode","Q","alphaCutoff","metallicFactor","roughnessFactor","k","F","primitiveType","typedBuffer","elementCount","V","W","G","buffer","getVec","center","radius","Math","min","setVec","uniforms","bindView","vertex","screenSizePerspectiveAlignment","typedBufferStride","sqrt","freeze","__proto__","transformMat4","transformMat3","scale","normalize","shiftRight","fovY","fullViewport","pixelRatio","setUniform4f","screenLength","perDistance","minWorldLength","maxWorldLength","tan","varyings","responseType","dstIndex","srcIndex","copy","fill","_transform","_transformInverse","_transformInverseTranspose","_transformTranspose","_transformInverseRotation","invalidate","invalidateLazyTransforms","setTransformMatrix","multiplyTransform","original","update","dirty","offset","tmpVertex","localOrigin","componentLocalOriginLength","mbs","obb","halfSize","quaternion","sphere","objectTransform","inverse","default","locateFile","initializeBasis","ceil","getNumImages","isUASTC","getFaces","isETC1S","BasisFile","Uint8Array","startTranscoding","getNumLevels","getHasAlpha","getImageWidth","getImageHeight","getImageTranscodedSizeInBytes","transcodeImage","close","delete","KTX2File","getLevels","getWidth","getHeight","capabilities","compressedTextureETC","compressedTextureS3TC","hasMipmap","samplingMode","internalFormat","width","height","type","levels","charCodeAt","Int32Array","String","fromCharCode","max","textureData","glTexture","powerOfTwoStretchInfo","loadingPromise","loadingController","events","mipmap","powerOfTwoResizeMode","estimatedTexMemRequired","estimateTexMemRequired","startPreload","HTMLVideoElement","startPreloadVideoElement","HTMLImageElement","startPreloadImageElement","src","preload","crossOrigin","target","pixelFormat","dataType","wrapMode","flipped","maxAnisotropy","maxMaxAnisotropy","createDescriptor","loadFromURL","Image","loadFromImageElement","loadFromVideoElement","ImageData","HTMLCanvasElement","loadFromImage","DDS_ENCODING","loadFromDDSData","KTX2_ENCODING","loadFromKTX2","BASIS_ENCODING","loadFromBasis","loadFromPixelData","readyState","currentTime","framebuffer","vao","sourceTexture","setData","drawStretchedTexture","descriptor","updateData","generateMipmap","loadAsync","components","signal","complete","loadFromVideoElementAsync","removeEventListener","addEventListener","getDataDimensions","requiresPowerOfTwo","makePowerOfTwoTexture","gl","textureCoordinateScaleFactor","stretchToPowerOfTwo","colorTarget","depthStencilTarget","requiresFrameUpdates","dispose","detachColorTexture","bindFramebuffer","getViewport","setViewport","useProgram","bindTexture","bindVAO","setPipelineState","drawArrays","abort","emit","videoWidth","videoHeight","byteLength","_textureIDs","Set","_textureRepository","textureRep","_textureId","_initTransparent","_texture","_acquire","_textureNormal","_textureEmissive","_textureOcclusion","_textureMetallicRoughness","release","clear","_release","setUniform2f","acquire","Uniforms","linearDepth","int","lightingSphericalHarmonicsOrder","context","svgAlwaysPremultipliesAlpha","_doublePrecisionRequiresObfuscation","createVertex","Uint16Array","geometry","stride","normalized","Float32Array","setUniform3f","getBoundFramebufferObject","readPixels","abs","decode","float","ModelTransform","worldFromModel_RS","worldFromModel_TH","worldFromModel_TL","ViewProjectionTransform","worldFromView_TH","worldFromView_TL","viewFromCameraRelative_RS","projFromView","bindModelTransform","setUniformMatrix3fv","bindViewProjTransform","bindUniforms"],"mappings":"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","file":"static/js/55.d53881d0.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.extensions.add(\"GL_EXT_shader_texture_lod\"),t.extensions.add(\"GL_OES_standard_derivatives\"),t.fragment.code.add(e`#ifndef GL_EXT_shader_texture_lod\nfloat calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\nfloat deltaMaxSqr = max(dot(ddx, ddx), dot(ddy, ddy));\nreturn max(0.0, 0.5 * log2(deltaMaxSqr));\n}\n#endif\nvec4 textureAtlasLookup(sampler2D texture, vec2 textureSize, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DGradEXT(texture, uvAtlas, dUVdx, dUVdy);\n#else\nvec2 dUVdxAuto = dFdx(uvAtlas);\nvec2 dUVdyAuto = dFdy(uvAtlas);\nfloat mipMapLevel = calcMipMapLevel(dUVdx * textureSize, dUVdy * textureSize);\nfloat autoMipMapLevel = calcMipMapLevel(dUVdxAuto * textureSize, dUVdyAuto * textureSize);\nreturn texture2D(texture, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}`)}export{t as TextureAtlasLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{TextureCoordinateAttribute as e}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as t}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function u(u,a){u.include(e,a),u.fragment.code.add(r`\n  struct TextureLookupParameter {\n    vec2 uv;\n    ${a.supportsTextureAtlas?\"vec2 size;\":\"\"}\n  } vtc;\n  `),1===a.attributeTextureCoordinates&&u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn texture2D(tex, params.uv);\n}`),2===a.attributeTextureCoordinates&&(u.include(t),u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn textureAtlasLookup(tex, params.size, params.uv, vuvRegion);\n}`))}export{u as VertexTextureCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import{bindSliceUniforms as i}from\"../core/shaderLibrary/Slice.glsl.js\";import{InstancedDoublePrecision as r}from\"../core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{bindVerticalOffsetUniforms as o}from\"../core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{bindOutputHighlight as s}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{bindMultipassTerrainTexture as a}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindPBRUniforms as n}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{bindReadShadowMapViewCustomOrigin as l}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{bindVisualVariablesUniformsForSymbols as p}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{doublePrecisionRequiresObfuscation as c}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{bindProjectionMatrix as u,bindViewCustomOrigin as h,bindCameraPosition as d}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as m}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as f}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as v,parameter as g}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as b}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as y,OITBlending as x,OITDepthTest as T,getOITPolygonOffset as P}from\"../lib/OrderIndependentTransparency.js\";import{Program as M}from\"../lib/Program.js\";import{stencilWriteMaskOn as S,stencilToolMaskBaseParams as C,stencilBaseAllZerosParams as O}from\"../lib/StencilUtils.js\";import{colorMixModes as D,bindScreenSizePerspective as w}from\"../materials/internal/MaterialUtil.js\";import{D as j}from\"../../../../chunks/DefaultMaterial.glsl.js\";import{makePipelineState as A,cullingParams as E,defaultDepthWriteParams as U,defaultColorWriteParams as z}from\"../../../webgl/renderState.js\";class R extends f{initializeProgram(e){const t=R.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,viewingMode:e.viewingMode,receiveShadows:i.receiveShadows,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:i.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:i.symbolColors,vvSize:i.vvSize,vvColor:i.vvColor,vvInstancingEnabled:!0,instanced:i.instanced,instancedColor:i.instancedColor,instancedDoublePrecision:i.instancedDoublePrecision,pbrMode:i.usePBR?i.isSchematic?2:1:0,hasMetalnessAndRoughnessTexture:i.hasMetalnessAndRoughnessTexture,hasEmissionTexture:i.hasEmissionTexture,hasOcclusionTexture:i.hasOcclusionTexture,hasNormalTexture:i.hasNormalTexture,hasColorTexture:i.hasColorTexture,receiveAmbientOcclusion:i.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:i.normalsTypeDerivate?3:0,doubleSidedMode:i.doubleSidedMode,vertexTangents:i.vertexTangents,attributeTextureCoordinates:i.hasMetalnessAndRoughnessTexture||i.hasEmissionTexture||i.hasOcclusionTexture||i.hasNormalTexture||i.hasColorTexture?1:0,textureAlphaPremultiplied:i.textureAlphaPremultiplied,attributeColor:i.vertexColors,screenSizePerspectiveEnabled:i.screenSizePerspective,verticalOffsetEnabled:i.verticalOffset,offsetBackfaces:i.offsetBackfaces,doublePrecisionRequiresObfuscation:c(e.rctx),alphaDiscardMode:i.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new M(e.rctx,r,b)}bindPass(e,t){var i,r;u(this.program,t.camera.projectionMatrix);const l=this.configuration.output;(1===this.configuration.output||t.multipassTerrainEnabled||3===l)&&this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),a(this.program,t)),7===l&&(this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode])),0===l?(t.lighting.setUniforms(this.program,!1),this.program.setUniform3fv(\"ambient\",e.ambient),this.program.setUniform3fv(\"diffuse\",e.diffuse),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode]),this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.configuration.usePBR&&n(this.program,e,this.configuration.isSchematic)):4===l&&s(this.program,t),p(this.program,e),o(this.program,e,t),w(e.screenSizePerspective,this.program,\"screenSizePerspectiveAlignment\"),2!==e.textureAlphaMode&&3!==e.textureAlphaMode||this.program.setUniform1f(\"textureAlphaCutoff\",e.textureAlphaCutoff),null==(i=t.shadowMap)||i.bind(this.program),null==(r=t.ssaoHelper)||r.bind(this.program)}bindDraw(e){const o=this.configuration.instancedDoublePrecision?t(e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]):e.origin;h(this.program,o,e.camera.viewMatrix),this.program.rebindTextures(),(0===this.configuration.output||7===this.configuration.output||1===this.configuration.output&&this.configuration.screenSizePerspective||2===this.configuration.output&&this.configuration.screenSizePerspective||4===this.configuration.output&&this.configuration.screenSizePerspective)&&d(this.program,o,e.camera.viewInverseTransposeMatrix),2===this.configuration.output&&this.program.setUniformMatrix4fv(\"viewNormal\",e.camera.viewInverseTransposeMatrix),this.configuration.instancedDoublePrecision&&r.bindCustomOrigin(this.program,o),i(this.program,this.configuration,e.slicePlane,o),0===this.configuration.output&&l(this.program,e,o)}setPipeline(e,t){const i=this.configuration,r=3===e,o=2===e;return A({blending:0!==i.output&&7!==i.output||!i.transparent?null:r?y:x(e),culling:L(i)&&E(i.cullFace),depthTest:{func:T(e)},depthWrite:r||o?i.writeDepth&&U:null,colorWrite:z,stencilWrite:i.sceneHasOcludees?S:null,stencilTest:i.sceneHasOcludees?t?C:O:null,polygonOffset:r||o?null:P(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipeline(this.configuration.transparencyPassType,!0),this.setPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}function L(e){return e.cullFace?0!==e.cullFace:!e.slicePlaneEnabled&&(!e.transparent&&!e.doubleSidedMode)}R.shader=new m(j,(()=>import(\"./DefaultMaterial.glsl.js\")));class H extends v{constructor(){super(...arguments),this.output=0,this.alphaDiscardMode=1,this.doubleSidedMode=0,this.isSchematic=!1,this.vertexColors=!1,this.offsetBackfaces=!1,this.symbolColors=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.sliceHighlightDisabled=!1,this.receiveAmbientOcclusion=!1,this.screenSizePerspective=!1,this.textureAlphaPremultiplied=!1,this.hasColorTexture=!1,this.usePBR=!1,this.hasMetalnessAndRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.instanced=!1,this.instancedColor=!1,this.instancedDoublePrecision=!1,this.vertexTangents=!1,this.normalsTypeDerivate=!1,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparent=!1,this.enableOffset=!0,this.cullFace=0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([g({count:8})],H.prototype,\"output\",void 0),e([g({count:4})],H.prototype,\"alphaDiscardMode\",void 0),e([g({count:3})],H.prototype,\"doubleSidedMode\",void 0),e([g()],H.prototype,\"isSchematic\",void 0),e([g()],H.prototype,\"vertexColors\",void 0),e([g()],H.prototype,\"offsetBackfaces\",void 0),e([g()],H.prototype,\"symbolColors\",void 0),e([g()],H.prototype,\"vvSize\",void 0),e([g()],H.prototype,\"vvColor\",void 0),e([g()],H.prototype,\"verticalOffset\",void 0),e([g()],H.prototype,\"receiveShadows\",void 0),e([g()],H.prototype,\"slicePlaneEnabled\",void 0),e([g()],H.prototype,\"sliceHighlightDisabled\",void 0),e([g()],H.prototype,\"receiveAmbientOcclusion\",void 0),e([g()],H.prototype,\"screenSizePerspective\",void 0),e([g()],H.prototype,\"textureAlphaPremultiplied\",void 0),e([g()],H.prototype,\"hasColorTexture\",void 0),e([g()],H.prototype,\"usePBR\",void 0),e([g()],H.prototype,\"hasMetalnessAndRoughnessTexture\",void 0),e([g()],H.prototype,\"hasEmissionTexture\",void 0),e([g()],H.prototype,\"hasOcclusionTexture\",void 0),e([g()],H.prototype,\"hasNormalTexture\",void 0),e([g()],H.prototype,\"instanced\",void 0),e([g()],H.prototype,\"instancedColor\",void 0),e([g()],H.prototype,\"instancedDoublePrecision\",void 0),e([g()],H.prototype,\"vertexTangents\",void 0),e([g()],H.prototype,\"normalsTypeDerivate\",void 0),e([g()],H.prototype,\"writeDepth\",void 0),e([g()],H.prototype,\"sceneHasOcludees\",void 0),e([g()],H.prototype,\"transparent\",void 0),e([g()],H.prototype,\"enableOffset\",void 0),e([g({count:3})],H.prototype,\"cullFace\",void 0),e([g({count:4})],H.prototype,\"transparencyPassType\",void 0),e([g()],H.prototype,\"multipassTerrainEnabled\",void 0),e([g()],H.prototype,\"cullAboveGround\",void 0);export{R as DefaultMaterialTechnique,H as DefaultMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{R as e}from\"../../../../chunks/RealisticTree.glsl.js\";import{doublePrecisionRequiresObfuscation as r}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{ReloadableShaderModule as s}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{Default3D as i}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as o}from\"../lib/Program.js\";import{DefaultMaterialTechnique as t}from\"./DefaultMaterialTechnique.js\";class a extends t{initializeProgram(e){const s=a.shader.get(),t=this.configuration,l=s.build({OITEnabled:0===t.transparencyPassType,output:t.output,viewingMode:e.viewingMode,receiveShadows:t.receiveShadows,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:t.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:t.symbolColors,vvSize:t.vvSize,vvColor:t.vvColor,vvInstancingEnabled:!0,instanced:t.instanced,instancedColor:t.instancedColor,instancedDoublePrecision:t.instancedDoublePrecision,pbrMode:t.usePBR?1:0,hasMetalnessAndRoughnessTexture:!1,hasEmissionTexture:!1,hasOcclusionTexture:!1,hasNormalTexture:!1,hasColorTexture:t.hasColorTexture,receiveAmbientOcclusion:t.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:0,doubleSidedMode:2,vertexTangents:!1,attributeTextureCoordinates:t.hasColorTexture?1:0,textureAlphaPremultiplied:t.textureAlphaPremultiplied,attributeColor:t.vertexColors,screenSizePerspectiveEnabled:t.screenSizePerspective,verticalOffsetEnabled:t.verticalOffset,offsetBackfaces:t.offsetBackfaces,doublePrecisionRequiresObfuscation:r(e.rctx),alphaDiscardMode:t.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new o(e.rctx,l,i)}}a.shader=new s(e,(()=>import(\"../core/shaderLibrary/default/RealisticTree.glsl.js\")));export{a as RealisticTreeTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/mat3f64.js\";import{s as t,g as i,n as s,f as a,l as r,a as n,d as o,t as l}from\"../../../../chunks/vec3.js\";import{c as u,f as c}from\"../../../../chunks/vec3f64.js\";import{newLayout as h}from\"../../support/buffer/InterleavedLayout.js\";import{defaultMaskAlphaCutoff as d}from\"../core/shaderLibrary/util/AlphaDiscard.glsl.js\";import p from\"../lib/GLMaterialTexture.js\";import{Material as m,materialParametersDefaults as f}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as v}from\"../lib/OrderIndependentTransparency.js\";import{getVerticalOffsetObject3D as g}from\"../lib/verticalOffsetUtils.js\";import{writeDefaultAttributes as C}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as b,intersectTriangleGeometry as x}from\"./internal/MaterialUtil.js\";import{DefaultMaterialTechniqueConfiguration as q,DefaultMaterialTechnique as S}from\"../shaders/DefaultMaterialTechnique.js\";import{RealisticTreeTechnique as T}from\"../shaders/RealisticTreeTechnique.js\";class y extends m{constructor(e){super(e,O),this.supportsEdges=!0,this.techniqueConfig=new q,this.vertexBufferLayout=y.getVertexBufferLayout(this.params),this.instanceBufferLayout=e.instanced?y.getInstanceBufferLayout(this.params):null}isVisibleInPass(e){return 4!==e&&6!==e&&7!==e||this.params.castShadows}isVisible(){const e=this.params;if(!super.isVisible()||0===e.layerOpacity)return!1;const t=e.instanced,i=e.vertexColors,s=e.symbolColors,a=!!t&&t.indexOf(\"color\")>-1,r=e.vvColorEnabled,n=\"replace\"===e.colorMixMode,o=e.opacity>0,l=e.externalColor&&e.externalColor[3]>0;return i&&(a||r||s)?!!n||o:i?n?l:o:a||r||s?!!n||o:n?l:o}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.hasNormalTexture=!!this.params.normalTextureId,this.techniqueConfig.hasColorTexture=!!this.params.textureId,this.techniqueConfig.vertexTangents=this.params.vertexTangents,this.techniqueConfig.instanced=!!this.params.instanced,this.techniqueConfig.instancedDoublePrecision=this.params.instancedDoublePrecision,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.verticalOffset=null!==this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=null!==this.params.screenSizePerspective,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sliceHighlightDisabled=this.params.sliceHighlightDisabled,this.techniqueConfig.alphaDiscardMode=this.params.textureAlphaMode,this.techniqueConfig.normalsTypeDerivate=\"screenDerivative\"===this.params.normals,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.cullFace=this.params.slicePlaneEnabled?0:this.params.cullFace,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,0!==e&&7!==e||(this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.symbolColors=this.params.symbolColors,this.params.treeRendering?this.techniqueConfig.doubleSidedMode=2:this.techniqueConfig.doubleSidedMode=this.params.doubleSided&&\"normal\"===this.params.doubleSidedType?1:this.params.doubleSided&&\"winding-order\"===this.params.doubleSidedType?2:0,this.techniqueConfig.instancedColor=!!this.params.instanced&&this.params.instanced.indexOf(\"color\")>-1,this.techniqueConfig.receiveShadows=this.params.receiveShadows&&this.params.shadowMappingEnabled,this.techniqueConfig.receiveAmbientOcclusion=!(!t||!t.ssaoEnabled)&&this.params.receiveSSAO,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.textureAlphaPremultiplied=!!this.params.textureAlphaPremultiplied,this.techniqueConfig.usePBR=this.params.usePBR,this.techniqueConfig.hasMetalnessAndRoughnessTexture=!!this.params.metallicRoughnessTextureId,this.techniqueConfig.hasEmissionTexture=!!this.params.emissiveTextureId,this.techniqueConfig.hasOcclusionTexture=!!this.params.occlusionTextureId,this.techniqueConfig.offsetBackfaces=!(!this.params.transparent||!this.params.offsetTransparentBackfaces),this.techniqueConfig.isSchematic=this.params.usePBR&&this.params.isSchematic,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<v),this.techniqueConfig}intersect(e,u,c,h,d,p,m){if(null!==this.params.verticalOffset){const e=h.camera;t(A,c[12],c[13],c[14]);let u=null;switch(h.viewingMode){case 1:u=s(E,A);break;case 2:u=i(E,B)}let m=0;if(null!==this.params.verticalOffset){const t=a(L,A,e.eye),i=r(t),s=n(t,t,1/i);let l=null;this.params.screenSizePerspective&&(l=o(u,s)),m+=b(e,i,this.params.verticalOffset,l,this.params.screenSizePerspective)}n(u,u,m),l(I,u,h.transform.inverseRotation),d=a(w,d,I),p=a(_,p,I)}x(e,u,h,d,p,g(h.verticalOffset),m)}getGLMaterial(e){if(0===e.output||7===e.output||1===e.output||2===e.output||3===e.output||4===e.output)return new P(e)}createBufferWriter(){return new M(this.vertexBufferLayout,this.instanceBufferLayout)}static getVertexBufferLayout(e){const t=e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId,i=h().vec3f(\"position\").vec3f(\"normal\");return e.vertexTangents&&i.vec4f(\"tangent\"),t&&i.vec2f(\"uv0\"),e.vertexColors&&i.vec4u8(\"color\"),e.symbolColors&&i.vec4u8(\"symbolColor\"),i}static getInstanceBufferLayout(e){let t=h();return t=e.instancedDoublePrecision?t.vec3f(\"modelOriginHi\").vec3f(\"modelOriginLo\").mat3f(\"model\").mat3f(\"modelNormal\"):t.mat4f(\"model\").mat4f(\"modelNormal\"),e.instanced&&e.instanced.indexOf(\"color\")>-1&&(t=t.vec4f(\"instanceColor\")),e.instanced&&e.instanced.indexOf(\"featureAttribute\")>-1&&(t=t.vec4f(\"instanceFeatureAttribute\")),t}}class P extends p{constructor(e){const t=e.material;super({...e,...t.params}),this.updateParameters()}updateParameters(e){const t=this._material.params;this.updateTexture(t.textureId),this._technique=this._techniqueRep.releaseAndAcquire(t.treeRendering?T:S,this._material.getTechniqueConfig(this._output,e),this._technique)}selectPipelines(){}_updateShadowState(e){e.shadowMappingEnabled!==this._material.params.shadowMappingEnabled&&this._material.setParameterValues({shadowMappingEnabled:e.shadowMappingEnabled})}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this._output&&7!==this._output||(this._updateShadowState(e),this._updateOccludeeState(e)),this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.params,e),this.bindTextures(this._technique.program)}beginSlot(e){return e===(this._material.params.transparent?this._material.params.writeDepth?5:8:3)}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const O={textureId:void 0,initTextureTransparent:!1,isSchematic:!1,usePBR:!1,normalTextureId:void 0,vertexTangents:!1,occlusionTextureId:void 0,emissiveTextureId:void 0,metallicRoughnessTextureId:void 0,emissiveFactor:[0,0,0],mrrFactors:[0,1,.5],ambient:[.2,.2,.2],diffuse:[.8,.8,.8],externalColor:[1,1,1,1],colorMixMode:\"multiply\",opacity:1,layerOpacity:1,vertexColors:!1,symbolColors:!1,doubleSided:!1,doubleSidedType:\"normal\",cullFace:2,instanced:void 0,instancedDoublePrecision:!1,normals:\"default\",receiveSSAO:!0,receiveShadows:!0,castShadows:!0,shadowMappingEnabled:!1,verticalOffset:null,screenSizePerspective:null,slicePlaneEnabled:!1,sliceHighlightDisabled:!1,offsetTransparentBackfaces:!1,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvSizeValue:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:e(),transparent:!1,writeDepth:!0,textureAlphaMode:0,textureAlphaCutoff:d,textureAlphaPremultiplied:!1,sceneHasOcludees:!1,...f};class M{constructor(e,t){this.vertexBufferLayout=e,this.instanceBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,i,s){C(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,i,s)}}const w=u(),_=u(),B=c(0,0,1),E=u(),I=u(),A=u(),L=u();export{y as DefaultMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/Error.js\";import n from\"../../../../core/Logger.js\";import{isSome as a,unwrap as s}from\"../../../../core/maybe.js\";import{throwIfAbortError as o}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{d as u}from\"../../../../chunks/vec3f64.js\";import{empty as l,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Geometry as m}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as f}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as d}from\"../../webgl-engine/materials/DefaultMaterial.js\";const y=n.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");async function x(e,t){const r=await g(e,t);return{resource:r,textures:await A(r.textureDefinitions,t)}}async function g(r,n){const i=a(n)&&n.streamDataRequester;if(i)return h(r,i,n);const u=await t(e(r,s(n)));if(!0===u.ok)return u.value.data;o(u.error),w(u.error)}async function h(e,r,n){const a=await t(r.request(e,\"json\",n));if(!0===a.ok)return a.value;o(a.error),w(a.error.details.url)}function w(e){throw new r(\"\",`Request for object resource failed: ${e}`)}function v(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(y.warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t&&t.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(y.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(y.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(y.warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else y.warn(\"Indexed geometries must specify faces\"),n=!1;break}default:y.warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(y.warn(\"Geometry requires material\"),n=!1);const a=e.params.vertexAttributes;for(const s in a){a[s].values||(y.warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function b(e,t){const r=[],n=[],s=[],o=[],l=e.resource,c=i.parse(l.version||\"1.0\",\"wosr\");I.validate(c);const p=l.model.name,y=l.model.geometries,x=l.materialDefinitions,g=e.textures;let h=0;const w=new Map;for(let i=0;i<y.length;i++){const e=y[i];if(!v(e))continue;const l=M(e),c=e.params.vertexAttributes,p=[];for(const t in c){const e=c[t],r=e.values;p.push([t,{data:r,size:e.valuesPerElement,exclusive:!0}])}const b=[];if(\"PerAttributeArray\"!==e.params.topology){const t=e.params.faces;for(const e in t)b.push([e,new Uint32Array(t[e].values)])}const j=g&&g[l.texture];if(j&&!w.has(l.texture)){const{image:e,params:t}=j,r=new f(e,t);o.push(r),w.set(l.texture,r)}const A=w.get(l.texture),I=A?A.id:void 0;let P=s[l.material]?s[l.material][l.texture]:null;if(!P){const e=x[l.material.substring(l.material.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=j&&j.alphaChannelUsage,n=e.transparency>0||\"transparency\"===r||\"maskAndTransparency\"===r,o={ambient:u(e.diffuse),diffuse:u(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:j?U(j.alphaChannelUsage):void 0,textureAlphaCutoff:.33,textureId:I,initTextureTransparent:!0,doubleSided:!0,cullFace:0,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:!0};a(t)&&t.materialParamsMixin&&Object.assign(o,t.materialParamsMixin),P=new d(o),s[l.material]||(s[l.material]={}),s[l.material][l.texture]=P}n.push(P);const T=new m(p,b);h+=b.position?b.position.length:0,r.push(T)}return{name:p,stageResources:{textures:o,materials:n,geometries:r},pivotOffset:l.model.pivotOffset,boundingBox:j(r),numberOfVertices:h,lodThreshold:null}}function j(e){const t=l();return e.forEach((e=>{const r=e.boundingInfo;a(r)&&(c(t,r.getBBMin()),c(t,r.getBBMax()))})),t}async function A(e,t){const r=[];for(const o in e){const n=e[o],s=n.images[0].data;if(!s){y.warn(\"Externally referenced texture data is not yet supported\");continue}const i=n.encoding+\";base64,\"+s,u=\"/textureDefinitions/\"+o,l={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:!0},c=a(t)&&t.disableTextures?Promise.resolve(null):p(i,t);r.push(c.then((e=>({refId:u,image:e,params:l,alphaChannelUsage:\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\"}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function U(e){switch(e){case\"mask\":return 2;case\"maskAndTransparency\":return 3;case\"none\":return 1;case\"transparency\":default:return 0}}function M(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const I=new i(1,2,\"wosr\");export{A as createTextureResources,x as load,b as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{a as o}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{a}from\"../../../../chunks/mat4.js\";import{c as u}from\"../../../../chunks/mat4f64.js\";import{m as n,f as l,E as c,l as m,n as d,e as f}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as x,expandWithVec3 as g}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as h,BufferViewVec4f as b,BufferViewVec2f as v,BufferViewVec4u8 as R,BufferViewVec4u16 as y,BufferViewVec3u8 as M,BufferViewVec3u16 as B}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as w,a as j,s as C}from\"../../../../chunks/vec32.js\";import{t as E,s as T}from\"../../../../chunks/vec42.js\";import{createBuffer as S}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as A}from\"../../glTF/DefaultLoadingContext.js\";import{load as O}from\"../../glTF/loader.js\";import{triangleFanToTriangles as F,triangleStripToTriangles as I,trianglesToTriangles as k}from\"../../glTF/internal/indexUtils.js\";import{load as L,processLoadResult as N}from\"./wosrLoader.js\";import{Geometry as P}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as D}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as _}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as z}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{n as V}from\"../../../../chunks/vec22.js\";import{c as W,f as G}from\"../../../../chunks/vec43.js\";import{c as U}from\"../../../../chunks/vec33.js\";async function $(s,o){const i=q(e(s));if(\"wosr\"===i.fileType){const e=await(o.cache?o.cache.loadWOSR(i.url,o):L(i.url,o)),t=N(e,o);return{lods:[t],referenceBoundingBox:t.boundingBox,isEsriSymbolResource:!1,isWosr:!0,remove:e.remove}}const a=await(o.cache?o.cache.loadGLTF(i.url,o,o.usePBR):O(new A(o.streamDataRequester),i.url,o,o.usePBR)),u=t(a.model.meta,\"ESRI_proxyEllipsoid\");a.meta.isEsriSymbolResource&&r(u)&&-1!==a.meta.uri.indexOf(\"/RealisticTrees/\")&&J(a,u);const n=a.meta.isEsriSymbolResource?{usePBR:o.usePBR,isSchematic:!1,treeRendering:a.customMeta.esriTreeRendering,mrrFactors:[0,1,.2]}:{usePBR:o.usePBR,isSchematic:!1,mrrFactors:[0,1,.5]},l={...o.materialParamsMixin,treeRendering:a.customMeta.esriTreeRendering};if(null!=i.specifiedLodIndex){const e=K(a,n,l,i.specifiedLodIndex);let t=e[0].boundingBox;if(0!==i.specifiedLodIndex){t=K(a,n,l,0)[0].boundingBox}return{lods:e,referenceBoundingBox:t,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}const c=K(a,n,l);return{lods:c,referenceBoundingBox:c[0].boundingBox,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}function q(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function K(e,t,s,a){const u=e.model,n=i(),l=new Array,c=new Map,m=new Map;return u.lods.forEach(((e,i)=>{if(void 0!==a&&i!==a)return;const d={name:e.name,stageResources:{textures:new Array,materials:new Array,geometries:new Array},lodThreshold:r(e.lodThreshold)?e.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:x()};l.push(d),e.parts.forEach((e=>{const i=e.material+(e.attributes.normal?\"_normal\":\"\")+(e.attributes.color?\"_color\":\"\")+(e.attributes.texCoord0?\"_texCoord0\":\"\")+(e.attributes.tangent?\"_tangent\":\"\"),a=u.materials.get(e.material),l=r(e.attributes.texCoord0),f=r(e.attributes.normal);if(!c.has(i)){if(l){if(r(a.textureColor)&&!m.has(a.textureColor)){const e=u.textures.get(a.textureColor),t={...e.parameters,preMultiplyAlpha:!0};m.set(a.textureColor,new D(e.data,t))}if(r(a.textureNormal)&&!m.has(a.textureNormal)){const e=u.textures.get(a.textureNormal),t={...e.parameters,preMultiplyAlpha:!0};m.set(a.textureNormal,new D(e.data,t))}if(r(a.textureOcclusion)&&!m.has(a.textureOcclusion)){const e=u.textures.get(a.textureOcclusion),t={...e.parameters,preMultiplyAlpha:!0};m.set(a.textureOcclusion,new D(e.data,t))}if(r(a.textureEmissive)&&!m.has(a.textureEmissive)){const e=u.textures.get(a.textureEmissive),t={...e.parameters,preMultiplyAlpha:!0};m.set(a.textureEmissive,new D(e.data,t))}if(r(a.textureMetallicRoughness)&&!m.has(a.textureMetallicRoughness)){const e=u.textures.get(a.textureMetallicRoughness),t={...e.parameters,preMultiplyAlpha:!0};m.set(a.textureMetallicRoughness,new D(e.data,t))}}const o=a.color[0]**(1/z),n=a.color[1]**(1/z),d=a.color[2]**(1/z),p=a.emissiveFactor[0]**(1/z),x=a.emissiveFactor[1]**(1/z),g=a.emissiveFactor[2]**(1/z);c.set(i,new _({...t,transparent:\"BLEND\"===a.alphaMode,textureAlphaMode:Q(a.alphaMode),textureAlphaCutoff:a.alphaCutoff,diffuse:[o,n,d],ambient:[o,n,d],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:\"winding-order\",cullFace:a.doubleSided?0:2,vertexColors:!!e.attributes.color,vertexTangents:!!e.attributes.tangent,normals:f?\"default\":\"screenDerivative\",castShadows:!0,receiveSSAO:!0,textureId:r(a.textureColor)&&l?m.get(a.textureColor).id:void 0,colorMixMode:a.colorMixMode,normalTextureId:r(a.textureNormal)&&l?m.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:!0,occlusionTextureId:r(a.textureOcclusion)&&l?m.get(a.textureOcclusion).id:void 0,emissiveTextureId:r(a.textureEmissive)&&l?m.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:r(a.textureMetallicRoughness)&&l?m.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[p,x,g],mrrFactors:[a.metallicFactor,a.roughnessFactor,t.mrrFactors[2]],isSchematic:!1,...s}))}const p=H(e.indices||e.attributes.position.count,e.primitiveType),x=e.attributes.position.count,A=S(h,x);w(A,e.attributes.position,e.transform);const O=[[\"position\",{data:A.typedBuffer,size:A.elementCount,exclusive:!0}]],F=[[\"position\",p]];if(r(e.attributes.normal)){const t=S(h,x);o(n,e.transform),j(t,e.attributes.normal,n),O.push([\"normal\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),F.push([\"normal\",p])}if(r(e.attributes.tangent)){const t=S(b,x);o(n,e.transform),E(t,e.attributes.tangent,n),O.push([\"tangent\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),F.push([\"tangent\",p])}if(r(e.attributes.texCoord0)){const t=S(v,x);V(t,e.attributes.texCoord0),O.push([\"uv0\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),F.push([\"uv0\",p])}if(r(e.attributes.color)){const t=S(R,x);if(4===e.attributes.color.elementCount)e.attributes.color instanceof b?T(t,e.attributes.color,255):e.attributes.color instanceof R?W(t,e.attributes.color):e.attributes.color instanceof y&&T(t,e.attributes.color,1/256);else{G(t,255,255,255,255);const r=new M(t.buffer,0,4);e.attributes.color instanceof h?C(r,e.attributes.color,255):e.attributes.color instanceof M?U(r,e.attributes.color):e.attributes.color instanceof B&&C(r,e.attributes.color,1/256)}O.push([\"color\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),F.push([\"color\",p])}const I=new P(O,F);d.stageResources.geometries.push(I),d.stageResources.materials.push(c.get(i)),l&&(r(a.textureColor)&&d.stageResources.textures.push(m.get(a.textureColor)),r(a.textureNormal)&&d.stageResources.textures.push(m.get(a.textureNormal)),r(a.textureOcclusion)&&d.stageResources.textures.push(m.get(a.textureOcclusion)),r(a.textureEmissive)&&d.stageResources.textures.push(m.get(a.textureEmissive)),r(a.textureMetallicRoughness)&&d.stageResources.textures.push(m.get(a.textureMetallicRoughness))),d.numberOfVertices+=x;const k=I.boundingInfo;r(k)&&(g(d.boundingBox,k.getBBMin()),g(d.boundingBox,k.getBBMax()))}))})),l}function Q(e){switch(e){case\"BLEND\":return 0;case\"MASK\":return 2;case\"OPAQUE\":return 1;default:return 0}}function H(e,t){switch(t){case 4:return k(e);case 5:return I(e);case 6:return F(e)}}function J(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];e.customMeta.esriTreeRendering=!0;for(const i of o.parts){const o=i.attributes.normal;if(s(o))return;const x=i.attributes.position,g=x.count,b=p(),v=p(),y=p(),M=S(R,g),B=S(h,g),w=a(u(),i.transform);for(let s=0;s<g;s++){x.getVec(s,v),o.getVec(s,b),n(v,v,i.transform),l(y,v,t.center),c(y,y,t.radius);const a=y[2],u=m(y),p=Math.min(.45+.55*u*u,1);c(y,y,t.radius),n(y,y,w),d(y,y),r+1!==e.model.lods.length&&e.model.lods.length>1&&f(y,y,b,a>-1?.2:Math.min(-4*a-3.8,1)),B.setVec(s,y),M.set(s,0,255*p),M.set(s,1,255*p),M.set(s,2,255*p),M.set(s,3,255)}i.attributes.normal=B,i.attributes.color=M}}}export{$ as fetch,K as gltfToEngineResources,q as parseUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{RgbaFloatEncoding as a}from\"../util/RgbaFloatEncoding.glsl.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.fragment.include(a),t.fragment.uniforms.add(\"uShadowMapTex\",\"sampler2D\"),t.fragment.uniforms.add(\"uShadowMapNum\",\"int\"),t.fragment.uniforms.add(\"uShadowMapDistance\",\"vec4\"),t.fragment.uniforms.add(\"uShadowMapMatrix\",\"mat4\",4),t.fragment.uniforms.add(\"uDepthHalfPixelSz\",\"float\"),t.fragment.code.add(e`int chooseCascade(float _linearDepth, out mat4 mat) {\nvec4 distance = uShadowMapDistance;\nfloat depth = _linearDepth;\nint i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\nmat = i == 0 ? uShadowMapMatrix[0] : i == 1 ? uShadowMapMatrix[1] : i == 2 ? uShadowMapMatrix[2] : uShadowMapMatrix[3];\nreturn i;\n}\nvec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\nvec4 lv = mat * vec4(_vpos, 1.0);\nlv.xy /= lv.w;\nreturn 0.5 * lv.xyz + vec3(0.5);\n}\nvec2 cascadeCoordinates(int i, vec3 lvpos) {\nreturn vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;\n}\nfloat readShadowMapDepth(vec2 uv, sampler2D _depthTex) {\nreturn rgba2float(texture2D(_depthTex, uv));\n}\nfloat posIsInShadow(vec2 uv, vec3 lvpos, sampler2D _depthTex) {\nreturn readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;\n}\nfloat filterShadow(vec2 uv, vec3 lvpos, float halfPixelSize, sampler2D _depthTex) {\nfloat texSize = 0.5 / halfPixelSize;\nvec2 st = fract((vec2(halfPixelSize) + uv) * texSize);\nfloat s00 = posIsInShadow(uv + vec2(-halfPixelSize, -halfPixelSize), lvpos, _depthTex);\nfloat s10 = posIsInShadow(uv + vec2(halfPixelSize, -halfPixelSize), lvpos, _depthTex);\nfloat s11 = posIsInShadow(uv + vec2(halfPixelSize, halfPixelSize), lvpos, _depthTex);\nfloat s01 = posIsInShadow(uv + vec2(-halfPixelSize, halfPixelSize), lvpos, _depthTex);\nreturn mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}\nfloat readShadowMap(const in vec3 _vpos, float _linearDepth) {\nmat4 mat;\nint i = chooseCascade(_linearDepth, mat);\nif (i >= uShadowMapNum) { return 0.0; }\nvec3 lvpos = lightSpacePosition(_vpos, mat);\nif (lvpos.z >= 1.0) { return 0.0; }\nif (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\nvec2 uv = cascadeCoordinates(i, lvpos);\nreturn filterShadow(uv, lvpos, uDepthHalfPixelSz, uShadowMapTex);\n}`)}function o(a,e){e.shadowMappingEnabled&&(e.shadowMap.bind(a),e.shadowMap.bindView(a,e.origin))}function i(a,e,t){e.shadowMappingEnabled&&e.shadowMap.bindView(a,t)}function l(a,e){e.shadowMappingEnabled&&e.shadowMap.bindView(a,e.origin)}export{t as ReadShadowMap,o as bindReadShadowMapUniforms,l as bindReadShadowMapView,i as bindReadShadowMapViewCustomOrigin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{bindScreenSizePerspective as a}from\"../../../materials/internal/MaterialUtil.js\";function r(a){a.vertex.code.add(e`float screenSizePerspectiveMinSize(float size, vec4 factor) {\nfloat nonZeroSize = 1.0 - step(size, 0.0);\nreturn (\nfactor.z * (\n1.0 +\nnonZeroSize *\n2.0 * factor.w / (\nsize + (1.0 - nonZeroSize)\n)\n)\n);\n}`),a.vertex.code.add(e`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\nreturn absCosAngle * absCosAngle * absCosAngle;\n}`),a.vertex.code.add(e`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\nreturn vec4(\nmin(params.x / (distanceToCamera - params.y), 1.0),\nscreenSizePerspectiveViewAngleDependentFactor(absCosAngle),\nparams.z,\nparams.w\n);\n}`),a.vertex.code.add(e`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\nreturn max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}`),a.vertex.code.add(e`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorFloat(\nsize,\nscreenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n);\n}`),a.vertex.code.add(e`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\nreturn mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n}`),a.vertex.code.add(e`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}`)}function c(e,r){if(r.screenSizePerspective){a(r.screenSizePerspective,e,\"screenSizePerspective\");const c=r.screenSizePerspectiveAlignment||r.screenSizePerspective;a(c,e,\"screenSizePerspectiveAlignment\")}}export{r as ScreenSizePerspective,c as bindScreenSizePerspectiveUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{logger as t}from\"../geometry/support/buffer/math/common.js\";function e(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[4],c=r[5],i=r[6],a=r[8],p=r[9],y=r[10],B=r[12],m=r[13],h=r[14],l=e.typedBuffer,S=e.typedBufferStride,b=f.typedBuffer,v=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*S,f=t*v,r=b[f],o=b[f+1],M=b[f+2];l[e]=n*r+s*o+a*M+B,l[e+1]=u*r+c*o+p*M+m,l[e+2]=d*r+i*o+y*M+h}}function f(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[3],c=r[4],i=r[5],a=r[6],p=r[7],y=r[8],B=e.typedBuffer,m=e.typedBufferStride,h=f.typedBuffer,l=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*m,f=t*l,r=h[f],o=h[f+1],S=h[f+2];B[e]=n*r+s*o+a*S,B[e+1]=u*r+c*o+p*S,B[e+2]=d*r+i*o+y*S}}function r(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=f*u[e],o[t+1]=f*u[e+1],o[t+2]=f*u[e+2]}}function o(t,e){const f=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,n=e.typedBuffer,u=e.typedBufferStride;for(let d=0;d<f;d++){const t=d*o,e=d*u,f=n[e],s=n[e+1],c=n[e+2],i=Math.sqrt(f*f+s*s+c*c);if(i>0){const e=1/i;r[t]=e*f,r[t+1]=e*s,r[t+2]=e*c}}}function n(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=u[e]>>f,o[t+1]=u[e+1]>>f,o[t+2]=u[e+2]>>f}}var u=Object.freeze({__proto__:null,transformMat4:e,transformMat3:f,scale:r,normalize:o,shiftRight:n});export{f as a,n as b,o as n,r as s,e as t,u as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ScreenSizePerspective as e}from\"../util/ScreenSizePerspective.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function t(t,l){const c=t.vertex.code;l.verticalOffsetEnabled?(t.vertex.uniforms.add(\"verticalOffset\",\"vec4\"),l.screenSizePerspectiveEnabled&&(t.include(e),t.vertex.uniforms.add(\"screenSizePerspectiveAlignment\",\"vec4\")),c.add(r`\n    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n      ${1===l.viewingMode?r`vec3 worldNormal = normalize(worldPos + localOrigin);`:r`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}\n      ${l.screenSizePerspectiveEnabled?r`\n          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));\n          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:r`\n          float verticalOffsetScreenHeight = verticalOffset.x;`}\n      // Screen sized offset in world space, used for example for line callouts\n      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n      return worldNormal * worldOffset;\n    }\n\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n    }\n    `)):c.add(r`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}function l(e,r,t){if(!r.verticalOffset)return;const l=c(r.verticalOffset,t.camera.fovY,t.camera.fullViewport[3]),i=t.camera.pixelRatio||1;e.setUniform4f(\"verticalOffset\",l.screenLength*i,l.perDistance,l.minWorldLength,l.maxWorldLength)}function c(e,r,t,l=i){return l.screenLength=e.screenLength,l.perDistance=Math.tan(.5*r)/(.5*t),l.minWorldLength=e.minWorldLength,l.maxWorldLength=e.maxWorldLength,l}const i={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0};export{t as VerticalOffset,l as bindVerticalOffsetUniforms,c as calculateVerticalOffsetFactors};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function a(a,r){0===r.output&&r.receiveShadows?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.code.add(e`void forwardLinearDepth() { linearDepth = gl_Position.w; }`)):1===r.output||3===r.output?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),a.vertex.code.add(e`void forwardLinearDepth() {\nlinearDepth = (-position_view().z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n}`)):a.vertex.code.add(e`void forwardLinearDepth() {}`)}export{a as ForwardLinearDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n{\nreturn ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n}`),a.add(e`float integratedRadiance(float cosTheta2, float roughness)\n{\nreturn (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n}`),a.add(e`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n{\nfloat cosTheta2 = 1.0 - RdotNG * RdotNG;\nfloat intRadTheta = integratedRadiance(cosTheta2, roughness);\nfloat ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\nfloat sky = 2.0 - ground;\nreturn (ground * ambientGround + sky * ambientSky) * 0.5;\n}`)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{AnalyticalSkyModel as e}from\"./AnalyticalSkyModel.glsl.js\";import{PiUtils as o}from\"./PiUtils.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function a(a,n){const r=a.fragment.code;a.include(o),3===n.pbrMode||4===n.pbrMode?(r.add(t`\n    struct PBRShadingWater\n    {\n        float NdotL;   // cos angle between normal and light direction\n        float NdotV;   // cos angle between normal and view direction\n        float NdotH;   // cos angle between normal and half vector\n        float VdotH;   // cos angle between view direction and half vector\n        float LdotH;   // cos angle between light direction and half vector\n        float VdotN;   // cos angle between view direction and normal vector\n    };\n\n    float dtrExponent = ${n.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n    `),r.add(t`vec3 fresnelReflection(float angle, vec3 f0, float f90) {\nreturn f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n}`),r.add(t`float normalDistributionWater(float NdotH, float roughness)\n{\nfloat r2 = roughness * roughness;\nfloat NdotH2 = NdotH * NdotH;\nfloat denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\nreturn r2 / denom;\n}`),r.add(t`float geometricOcclusionKelemen(float LoH)\n{\nreturn 0.25 / (LoH * LoH);\n}`),r.add(t`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n{\nvec3  F = fresnelReflection(props.VdotH, F0, F0Max);\nfloat dSun = normalDistributionWater(props.NdotH, roughness);\nfloat V = geometricOcclusionKelemen(props.LdotH);\nfloat diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\nfloat strengthSunHaze  = 1.2;\nfloat dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\nreturn ((dSun + dSunHaze) * V) * F;\n}\nvec3 tonemapACES(const vec3 x) {\nreturn (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n}`)):1!==n.pbrMode&&2!==n.pbrMode||(a.include(e),r.add(t`struct PBRShadingInfo\n{\nfloat NdotL;\nfloat NdotV;\nfloat NdotH;\nfloat VdotH;\nfloat LdotH;\nfloat NdotNG;\nfloat RdotNG;\nfloat NdotAmbDir;\nfloat NdotH_Horizon;\nvec3 skyRadianceToSurface;\nvec3 groundRadianceToSurface;\nvec3 skyIrradianceToSurface;\nvec3 groundIrradianceToSurface;\nfloat averageAmbientRadiance;\nfloat ssao;\nvec3 albedoLinear;\nvec3 f0;\nvec3 f90;\nvec3 diffuseColor;\nfloat metalness;\nfloat roughness;\n};`),r.add(t`float normalDistribution(float NdotH, float roughness)\n{\nfloat a = NdotH * roughness;\nfloat b = roughness / (1.0 - NdotH * NdotH + a * a);\nreturn b * b * INV_PI;\n}`),r.add(t`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\nconst vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\nconst vec2 c2 = vec2(-1.04, 1.04);\nvec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\nreturn c2 * a004 + r.zw;\n}`),r.add(t`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\nvec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\nvec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\nvec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\nvec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\nvec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\nvec3 specularComponent = specularColor * indirectSpecular;\nreturn (diffuseComponent + specularComponent);\n}`),r.add(t`float gamutMapChanel(float x, vec2 p){\nreturn (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n}`),r.add(t`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\nvec3 outColor;\nvec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\noutColor.x = gamutMapChanel(inColor.x, p) ;\noutColor.y = gamutMapChanel(inColor.y, p) ;\noutColor.z = gamutMapChanel(inColor.z, p) ;\nreturn outColor;\n}`))}export{a as PhysicallyBasedRendering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,r){const{data:a}=await e(t,{responseType:\"image\",...r});return a}export{t as requestImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction e(e,t,n){const d=e.typedBuffer,f=e.typedBufferStride,r=t.typedBuffer,u=t.typedBufferStride,l=n?n.count:t.count;let o=(n&&n.dstIndex?n.dstIndex:0)*f,c=(n&&n.srcIndex?n.srcIndex:0)*u;for(let s=0;s<l;++s)d[o]=r[c],d[o+1]=r[c+1],d[o+2]=r[c+2],o+=f,c+=u}function t(e,t,n,d,f){var r,u;const l=e.typedBuffer,o=e.typedBufferStride,c=null!=(r=null==f?void 0:f.count)?r:e.count;let s=(null!=(u=null==f?void 0:f.dstIndex)?u:0)*o;for(let p=0;p<c;++p)l[s]=t,l[s+1]=n,l[s+2]=d,s+=o}var n=Object.freeze({__proto__:null,copy:e,fill:t});export{e as c,t as f,n as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{n as s}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{a as r,e,d as o,m as n}from\"../../../../chunks/mat4.js\";import{c as h}from\"../../../../chunks/mat4f64.js\";import{c as a}from\"../../../../chunks/quat.js\";import{a as f}from\"../../../../chunks/quatf64.js\";import{q as l,b as m,f as c}from\"../../../../chunks/vec3.js\";import{c as b}from\"../../../../chunks/vec3f32.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../chunks/vec4f64.js\";import{c as v}from\"../../../../chunks/sphere.js\";class z{constructor(){this._transform=h(),this._transformInverse=new g({value:this._transform},r,h),this._transformInverseTranspose=new g(this._transformInverse,e,h),this._transformTranspose=new g({value:this._transform},e,h),this._transformInverseRotation=new g({value:this._transform},s,i)}invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){o(this._transform,t)}multiplyTransform(t){n(this._transform,this._transform,t)}set(t){o(this._transform,t),this.invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this.invalidateLazyTransforms()}}class g{constructor(t,s,i){this.original=t,this.update=s,this.dirty=!0,this.transform=i()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}class S{constructor(t=0){this.offset=t,this.tmpVertex=p()}applyToVertex(t,s,i){const r=t+this.localOrigin[0],e=s+this.localOrigin[1],o=i+this.localOrigin[2],n=this.offset/Math.sqrt(r*r+e*e+o*o);return this.tmpVertex[0]=t+r*n,this.tmpVertex[1]=s+e*n,this.tmpVertex[2]=i+o*n,this.tmpVertex}applyToAabb(t){const s=t[0]+this.localOrigin[0],i=t[1]+this.localOrigin[1],r=t[2]+this.localOrigin[2],e=t[3]+this.localOrigin[0],o=t[4]+this.localOrigin[1],n=t[5]+this.localOrigin[2],h=this.offset/Math.sqrt(s*s+i*i+r*r);t[0]+=s*h,t[1]+=i*h,t[2]+=r*h;const a=this.offset/Math.sqrt(e*e+o*o+n*n);return t[3]+=e*a,t[4]+=o*a,t[5]+=n*a,t}}class T{constructor(t=0){this.offset=t,this.componentLocalOriginLength=0,this.tmpVertex=p(),this.mbs=u(),this.obb={center:p(),halfSize:b(),quaternion:null}}set localOrigin(t){this.componentLocalOriginLength=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}applyToVertex(t,s,i){const r=t,e=s,o=i+this.componentLocalOriginLength,n=this.offset/Math.sqrt(r*r+e*e+o*o);return this.tmpVertex[0]=t+r*n,this.tmpVertex[1]=s+e*n,this.tmpVertex[2]=i+o*n,this.tmpVertex}applyToAabb(t){const s=t[0],i=t[1],r=t[2]+this.componentLocalOriginLength,e=t[3],o=t[4],n=t[5]+this.componentLocalOriginLength,h=this.offset/Math.sqrt(s*s+i*i+r*r);t[0]+=s*h,t[1]+=i*h,t[2]+=r*h;const a=this.offset/Math.sqrt(e*e+o*o+n*n);return t[3]+=e*a,t[4]+=o*a,t[5]+=n*a,t}applyToMbs(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/s;return this.mbs[0]=t[0]+t[0]*i,this.mbs[1]=t[1]+t[1]*i,this.mbs[2]=t[2]+t[2]*i,this.mbs[3]=t[3]+t[3]*this.offset/s,this.mbs}applyToObb(t){const s=t.center,i=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);this.obb.center[0]=s[0]+s[0]*i,this.obb.center[1]=s[1]+s[1]*i,this.obb.center[2]=s[2]+s[2]*i,l(this.obb.halfSize,t.halfSize,t.quaternion),m(this.obb.halfSize,this.obb.halfSize,t.center);const r=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);return this.obb.halfSize[0]+=this.obb.halfSize[0]*r,this.obb.halfSize[1]+=this.obb.halfSize[1]*r,this.obb.halfSize[2]+=this.obb.halfSize[2]*r,c(this.obb.halfSize,this.obb.halfSize,t.center),a(j,t.quaternion),l(this.obb.halfSize,this.obb.halfSize,j),this.obb.halfSize[0]*=this.obb.halfSize[0]<0?-1:1,this.obb.halfSize[1]*=this.obb.halfSize[1]<0?-1:1,this.obb.halfSize[2]*=this.obb.halfSize[2]<0?-1:1,this.obb.quaternion=t.quaternion,this.obb}}class q{constructor(t=0){this.offset=t,this.sphere=v(),this.tmpVertex=p()}applyToVertex(t,s,i){const r=this.objectTransform.transform;let e=r[0]*t+r[4]*s+r[8]*i+r[12],o=r[1]*t+r[5]*s+r[9]*i+r[13],n=r[2]*t+r[6]*s+r[10]*i+r[14];const h=this.offset/Math.sqrt(e*e+o*o+n*n);e+=e*h,o+=o*h,n+=n*h;const a=this.objectTransform.inverse;return this.tmpVertex[0]=a[0]*e+a[4]*o+a[8]*n+a[12],this.tmpVertex[1]=a[1]*e+a[5]*o+a[9]*n+a[13],this.tmpVertex[2]=a[2]*e+a[6]*o+a[10]*n+a[14],this.tmpVertex}applyToMinMax(t,s){const i=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*i,t[1]+=t[1]*i,t[2]+=t[2]*i;const r=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]+=s[0]*r,s[1]+=s[1]*r,s[2]+=s[2]*r}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const i=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*i,t[4]+=t[4]*i,t[5]+=t[5]*i,t}applyToBoundingSphere(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/s;return this.sphere[0]=t[0]+t[0]*i,this.sphere[1]=t[1]+t[1]*i,this.sphere[2]=t[2]+t[2]*i,this.sphere[3]=t[3]+t[3]*this.offset/s,this.sphere}}const x=new q;function _(s){return t(s)?(x.offset=s,x):null}const y=new T;function M(s){return t(s)?(y.offset=s,y):null}const d=new S;function V(s){return t(s)?(d.offset=s,d):null}const O=\"terrain\",j=f();export{T as I3SVerticalOffsetGlobalViewingMode,z as IntersectorTransform,q as Object3DVerticalOffsetGlobalViewingMode,O as TERRAIN_ID,S as TerrainVerticalOffsetGlobalViewingMode,M as getVerticalOffsetI3S,_ as getVerticalOffsetObject3D,V as getVerticalOffsetTerrain};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport r from\"../../../../core/Logger.js\";const e=r.getLogger(\"esri.views.3d.support.buffer.math\");export{e as logger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,d){1===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\n}`)),2===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.attributes.add(\"uvRegion\",\"vec4\"),t.varyings.add(\"vuvRegion\",\"vec4\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}`)),0===d.attributeTextureCoordinates&&t.vertex.code.add(e`void forwardTextureCoordinates() {}`)}export{t as TextureCoordinateAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import{isNone as t}from\"../../core/maybe.js\";function s(){if(t(i)){const t=t=>e(`esri/libs/basisu/${t}`);i=import(\"../../chunks/basis_transcoder.js\").then((function(e){return e.b})).then((({default:e})=>e({locateFile:t}).then((e=>(e.initializeBasis(),delete e.then,e)))))}return i}let i;export{s as getBasisTranscoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{getBasisTranscoder as t}from\"../../../../libs/basisu/BasisU.js\";import n from\"../../../webgl/Texture.js\";import{getBytesPerElementFormat as r}from\"../../../webgl/Util.js\";let s=null,i=null;async function a(){return e(i)&&(i=t(),s=await i),i}function o(t,n){if(e(s))return t.byteLength;const r=new s.BasisFile(new Uint8Array(t)),i=c(r)?l(r.getNumLevels(0),r.getHasAlpha(),r.getImageWidth(0,0),r.getImageHeight(0,0),n):0;return r.close(),r.delete(),i}function g(t,n){if(e(s))return t.byteLength;const r=new s.KTX2File(new Uint8Array(t)),i=u(r)?l(r.getLevels(),r.getHasAlpha(),r.getWidth(),r.getHeight(),n):0;return r.close(),r.delete(),i}function l(e,t,n,s,i){const a=r(t?37496:37492),o=i&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(n*s*a*o)}function c(e){return e.getNumImages()>=1&&!e.isUASTC()}function u(e){return e.getFaces()>=1&&e.isETC1S()}async function m(t,n,r){e(s)&&(s=await a());const i=new s.BasisFile(new Uint8Array(r));if(!c(i))return null;i.startTranscoding();const o=d(t,n,i.getNumLevels(0),i.getHasAlpha(),i.getImageWidth(0,0),i.getImageHeight(0,0),((e,t)=>i.getImageTranscodedSizeInBytes(0,e,t)),((e,t,n)=>i.transcodeImage(n,0,e,t,0,0)));return i.close(),i.delete(),o}async function h(t,n,r){e(s)&&(s=await a());const i=new s.KTX2File(new Uint8Array(r));if(!u(i))return null;i.startTranscoding();const o=d(t,n,i.getLevels(),i.getHasAlpha(),i.getWidth(),i.getHeight(),((e,t)=>i.getImageTranscodedSizeInBytes(e,0,0,t)),((e,t,n)=>i.transcodeImage(n,e,0,0,t,0,-1,-1)));return i.close(),i.delete(),o}function d(e,t,r,s,i,a,o,g){const{compressedTextureETC:l,compressedTextureS3TC:c}=e.capabilities,[u,m]=l?s?[1,37496]:[0,37492]:c?s?[3,33779]:[2,33776]:[13,6408],h=t.hasMipmap?r:Math.min(1,r),d=[];for(let n=0;n<h;n++)d.push(new Uint8Array(o(n,u))),g(n,u,d[n]);const p=d.length>1,f=p?9987:9729,w={...t,samplingMode:f,hasMipmap:p,internalFormat:m,width:i,height:a};return new n(e,w,{type:\"compressed\",levels:d})}export{m as createTextureBasis,h as createTextureKTX2,o as estimateMemoryBasis,g as estimateMemoryKTX2,a as loadBasis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isPowerOfTwo as t}from\"../../../../core/mathUtils.js\";import r from\"../../../webgl/Texture.js\";const n=e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),o=542327876,a=131072,i=4;function s(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function l(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const u=s(\"DXT1\"),c=s(\"DXT3\"),m=s(\"DXT5\"),h=31,p=0,d=1,g=2,f=3,w=4,C=7,x=20,D=21;function b(e,t,n){const{textureData:o,internalFormat:a,width:i,height:s}=A(n,t.hasMipmap);return t.samplingMode=o.levels.length>1?9987:9729,t.hasMipmap=o.levels.length>1,t.internalFormat=a,t.width=i,t.height=s,new r(e,t,o)}function A(e,r){const s=new Int32Array(e,0,h);if(s[p]!==o)return n.error(\"Invalid magic number in DDS header\"),null;if(!(s[x]&i))return n.error(\"Unsupported format, must contain a FourCC code\"),null;const b=s[D];let A,M;switch(b){case u:A=8,M=33776;break;case c:A=16,M=33778;break;case m:A=16,M=33779;break;default:return n.error(\"Unsupported FourCC code:\",l(b)),null}let v=1,F=s[w],U=s[f];0==(3&F)&&0==(3&U)||(n.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),F=F+3&-4,U=U+3&-4);const T=F,j=U;let k,y;s[g]&a&&!1!==r&&(v=Math.max(1,s[C])),1===v||t(F)&&t(U)||(n.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"),v=1);let I=s[d]+4;const S=[];for(let t=0;t<v;++t)y=(F+3>>2)*(U+3>>2)*A,k=new Uint8Array(e,I,y),S.push(k),I+=y,F=Math.max(1,F>>1),U=Math.max(1,U>>1);return{textureData:{type:\"compressed\",levels:S},internalFormat:M,width:T,height:j}}export{b as createDDSTexture,A as createDDSTextureData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../../core/compilerUtils.js\";import e from\"../../../../core/Error.js\";import r from\"../../../../core/Evented.js\";import{isPowerOfTwo as i,nextHighestPowerOfTwo as s}from\"../../../../core/mathUtils.js\";import{isNone as a,isSome as o}from\"../../../../core/maybe.js\";import{createAbortController as n,onAbort as m,createAbortError as h}from\"../../../../core/promiseUtils.js\";import{isArrayBuffer as l,isUint8Array as p}from\"../../../../core/typedArrayUtil.js\";import{isBlobProtocol as d,isDataProtocol as c}from\"../../../../core/urlUtils.js\";import{requestImage as u}from\"../../../../support/requestImageUtils.js\";import{loadImageAsync as g}from\"../../../../support/requestUtils.js\";import{estimateMemoryKTX2 as f,estimateMemoryBasis as w,createTextureKTX2 as T,createTextureBasis as x}from\"./BasisUtil.js\";import{ContentObject as D}from\"./ContentObject.js\";import{createDDSTexture as F}from\"./DDSUtil.js\";import{createQuadVAO as M}from\"./glUtil3D.js\";import{assert as y}from\"./Util.js\";import I from\"../../../webgl/FramebufferObject.js\";import E from\"../../../webgl/Texture.js\";import{vertexCount as O}from\"../../../webgl/Util.js\";import b from\"../../../webgl/capabilities/isWebGL2Context.js\";class S extends D{constructor(t,e){super(),this.data=t,this.type=4,this.glTexture=null,this.powerOfTwoStretchInfo=null,this.loadingPromise=null,this.loadingController=null,this.events=new r,this.params=e||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:10497,t:10497},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1,this.estimatedTexMemRequired=S.estimateTexMemRequired(this.data,this.params),this.startPreload()}startPreload(){const t=this.data;a(t)||(t instanceof HTMLVideoElement?this.startPreloadVideoElement(t):t instanceof HTMLImageElement&&this.startPreloadImageElement(t))}startPreloadVideoElement(t){d(t.src)||\"auto\"===t.preload&&t.crossOrigin||(t.preload=\"auto\",t.crossOrigin=\"anonymous\",t.src=t.src)}startPreloadImageElement(t){c(t.src)||d(t.src)||t.crossOrigin||(t.crossOrigin=\"anonymous\",t.src=t.src)}static getDataDimensions(t){return t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t}static estimateTexMemRequired(t,e){if(a(t))return 0;if(l(t)||p(t))return e.encoding===S.KTX2_ENCODING?f(t,e.mipmap):e.encoding===S.BASIS_ENCODING?w(t,e.mipmap):t.byteLength;const{width:r,height:i}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?S.getDataDimensions(t):e;return(e.mipmap?4/3:1)*r*i*(e.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}createDescriptor(t){var e;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:null!=(e=this.params.maxAnisotropy)?e:this.params.mipmap?t.parameters.maxMaxAnisotropy:1}}load(t,e){if(o(this.glTexture))return this.glTexture;if(o(this.loadingPromise))return this.loadingPromise;const r=this.data;return a(r)?(this.glTexture=new E(t,this.createDescriptor(t),null),this.glTexture):\"string\"==typeof r?this.loadFromURL(t,e,r):r instanceof Image?this.loadFromImageElement(t,e,r):r instanceof HTMLVideoElement?this.loadFromVideoElement(t,e,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this.loadFromImage(t,r,e):(l(r)||p(r))&&this.params.encoding===S.DDS_ENCODING?this.loadFromDDSData(t,r):(l(r)||p(r))&&this.params.encoding===S.KTX2_ENCODING?this.loadFromKTX2(t,r):(l(r)||p(r))&&this.params.encoding===S.BASIS_ENCODING?this.loadFromBasis(t,r):p(r)?this.loadFromPixelData(t,r):l(r)?this.loadFromPixelData(t,new Uint8Array(r)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(t,e,r){if(!(this.data instanceof HTMLVideoElement)||a(this.glTexture))return r;if(this.data.readyState<2||r===this.data.currentTime)return r;if(o(this.powerOfTwoStretchInfo)){const{framebuffer:r,vao:i,sourceTexture:s}=this.powerOfTwoStretchInfo;s.setData(this.data),this.drawStretchedTexture(t,e,r,i,s,this.glTexture)}else{const{width:t,height:e}=this.data,{width:r,height:i}=this.glTexture.descriptor;t!==r||e!==i?this.glTexture.updateData(0,0,0,Math.min(t,r),Math.min(e,i),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}loadFromDDSData(t,e){return this.glTexture=F(t,this.createDescriptor(t),e),this.glTexture}loadFromKTX2(t,e){return this.loadAsync((()=>T(t,this.createDescriptor(t),e).then((t=>(this.glTexture=t,t)))))}loadFromBasis(t,e){return this.loadAsync((()=>x(t,this.createDescriptor(t),e).then((t=>(this.glTexture=t,t)))))}loadFromPixelData(t,e){y(this.params.width>0&&this.params.height>0);const r=this.createDescriptor(t);return r.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,r.width=this.params.width,r.height=this.params.height,this.glTexture=new E(t,r,e),this.glTexture}loadAsync(t){const e=n();this.loadingController=e;const r=t(e.signal);this.loadingPromise=r;const i=()=>{this.loadingController===e&&(this.loadingController=null),this.loadingPromise===r&&(this.loadingPromise=null)};return r.then(i,i),r}loadFromURL(t,e,r){return this.loadAsync((async i=>{const s=await u(r,{signal:i});return this.loadFromImage(t,s,e)}))}loadFromImageElement(t,e,r){return r.complete?this.loadFromImage(t,r,e):this.loadAsync((async i=>{const s=await g(r,r.src,!1,i);return this.loadFromImage(t,s,e)}))}loadFromVideoElement(t,e,r){return r.readyState>=2?this.loadFromImage(t,r,e):this.loadFromVideoElementAsync(t,e,r)}loadFromVideoElementAsync(t,r,i){return this.loadAsync((s=>new Promise(((a,n)=>{const l=()=>{i.removeEventListener(\"loadeddata\",p),i.removeEventListener(\"error\",d),o(c)&&c.remove()},p=()=>{i.readyState>=2&&(l(),a(this.loadFromImage(t,i,r)))},d=t=>{l(),n(t||new e(\"Failed to load video\"))};i.addEventListener(\"loadeddata\",p),i.addEventListener(\"error\",d);const c=m(s,(()=>d(h())))}))))}loadFromImage(t,e,r){const s=S.getDataDimensions(e);this.params.width=s.width,this.params.height=s.height;const a=this.createDescriptor(t);return a.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(t,a)||i(s.width)&&i(s.height)?(a.width=s.width,a.height=s.height,this.glTexture=new E(t,a,e),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(t,e,s,a,r),this.glTexture)}requiresPowerOfTwo(t,e){const r=33071,i=\"number\"==typeof e.wrapMode?e.wrapMode===r:e.wrapMode.s===r&&e.wrapMode.t===r;return!b(t.gl)&&(e.hasMipmap||!i)}makePowerOfTwoTexture(e,r,i,a,o){const{width:n,height:m}=i,h=s(n),l=s(m);let p;switch(a.width=h,a.height=l,this.params.powerOfTwoResizeMode){case 2:a.textureCoordinateScaleFactor=[n/h,m/l],p=new E(e,a),p.updateData(0,0,0,n,m,r);break;case 1:case null:case void 0:p=this.stretchToPowerOfTwo(e,r,a,o);break;default:t(this.params.powerOfTwoResizeMode)}return a.hasMipmap&&p.generateMipmap(),p}stretchToPowerOfTwo(t,e,r,i){const s=new E(t,r),a=new I(t,{colorTarget:0,depthStencilTarget:0},s),o=new E(t,{target:3553,pixelFormat:r.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},e),n=M(t);return this.drawStretchedTexture(t,i,a,n,o,s),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:n,sourceTexture:o,framebuffer:a}:(n.dispose(!0),o.dispose(),a.detachColorTexture(),t.bindFramebuffer(null),a.dispose()),s}drawStretchedTexture(t,e,r,i,s,a){t.bindFramebuffer(r);const o=t.getViewport();t.setViewport(0,0,a.descriptor.width,a.descriptor.height);const n=e.program;t.useProgram(n),n.setUniform4f(\"color\",1,1,1,1),n.bindTexture(s,\"tex\"),t.bindVAO(i),t.setPipelineState(e.pipeline),t.drawArrays(5,0,O(i,\"geometry\")),t.bindFramebuffer(null),t.setViewport(o.x,o.y,o.width,o.height)}unload(){if(o(this.powerOfTwoStretchInfo)){const{framebuffer:t,vao:e,sourceTexture:r}=this.powerOfTwoStretchInfo;e.dispose(!0),r.dispose(),t.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(o(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),o(this.loadingController)){const t=this.loadingController;this.loadingController=null,this.loadingPromise=null,t.abort()}this.events.emit(\"unloaded\")}}S.DDS_ENCODING=\"image/vnd-ms.dds\",S.KTX2_ENCODING=\"image/ktx2\",S.BASIS_ENCODING=\"image/x.basis\";export{S as Texture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){const d=e`vec3 decodeNormal(vec2 f) {\nfloat z = 1.0 - abs(f.x) - abs(f.y);\nreturn vec3(f + sign(f) * min(z, 0.0), z);\n}`;o.fragment.code.add(d),o.vertex.code.add(d)}export{o as DecodeNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{DecodeNormal as e}from\"../util/DecodeNormal.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o,d){0===d.normalType&&(o.attributes.add(\"normal\",\"vec3\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`)),1===d.normalType&&(o.include(e),o.attributes.add(\"normalCompressed\",\"vec2\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn decodeNormal(normalCompressed);\n}`)),3===d.normalType&&(o.extensions.add(\"GL_OES_standard_derivatives\"),o.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`))}export{o as NormalAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import r from\"./GLMaterial.js\";class i extends r{constructor(e){super(e),this._textureIDs=new Set,this._textureRepository=e.textureRep,this._textureId=e.textureId,this._initTransparent=!!e.initTextureTransparent,this._texture=this._acquire(this._textureId),this._textureNormal=this._acquire(e.normalTextureId),this._textureEmissive=this._acquire(e.emissiveTextureId),this._textureOcclusion=this._acquire(e.occlusionTextureId),this._textureMetallicRoughness=this._acquire(e.metallicRoughnessTextureId)}dispose(){this._textureIDs.forEach((e=>this._textureRepository.release(e))),this._textureIDs.clear()}updateTexture(e){e!==this._textureId&&(this._release(this._textureId),this._textureId=e,this._texture=this._acquire(this._textureId))}bindTextures(t){e(this._texture)&&t.bindTexture(this._texture.glTexture,\"tex\"),e(this._textureNormal)&&t.bindTexture(this._textureNormal.glTexture,\"normalTexture\"),e(this._textureEmissive)&&t.bindTexture(this._textureEmissive.glTexture,\"texEmission\"),e(this._textureOcclusion)&&t.bindTexture(this._textureOcclusion.glTexture,\"texOcclusion\"),e(this._textureMetallicRoughness)&&t.bindTexture(this._textureMetallicRoughness.glTexture,\"texMetallicRoughness\")}bindTextureScale(t){const r=e(this._texture)&&this._texture.glTexture;r&&r.descriptor.textureCoordinateScaleFactor?t.setUniform2fv(\"textureCoordinateScaleFactor\",r.descriptor.textureCoordinateScaleFactor):t.setUniform2f(\"textureCoordinateScaleFactor\",1,1)}_acquire(e){if(!t(e))return this._textureIDs.add(e),this._textureRepository.acquire(e,this._initTransparent)}_release(e){t(e)||(this._textureIDs.delete(e),this._textureRepository.release(e))}}export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../../chunks/vec3f64.js\";import{DoublePrecision as i}from\"../util/DoublePrecision.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{encodeDoubleArraySplit as n}from\"../../../lib/doublePrecisionUtils.js\";function o(e,n){n.instanced&&n.instancedDoublePrecision&&(e.attributes.add(\"modelOriginHi\",\"vec3\"),e.attributes.add(\"modelOriginLo\",\"vec3\"),e.attributes.add(\"model\",\"mat3\"),e.attributes.add(\"modelNormal\",\"mat3\")),n.instancedDoublePrecision&&(e.vertex.include(i,n),e.vertex.uniforms.add(\"viewOriginHi\",\"vec3\"),e.vertex.uniforms.add(\"viewOriginLo\",\"vec3\"));const o=[r`\n    vec3 calculateVPos() {\n      ${n.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `,r`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${n.instancedDoublePrecision?r`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `,r`\n    vec3 dpNormal(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `,r`\n    vec3 dpNormalView(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `,n.vertexTangents?r`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${n.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `:r``];e.vertex.code.add(o[0]),e.vertex.code.add(o[1]),e.vertex.code.add(o[2]),2===n.output&&e.vertex.code.add(o[3]),e.vertex.code.add(o[4])}!function(e){class i{}function r(e,i){n(i,t,a,3),e.setUniform3fv(\"viewOriginHi\",t),e.setUniform3fv(\"viewOriginLo\",a)}e.Uniforms=i,e.bindCustomOrigin=r}(o||(o={}));const t=e(),a=e();export{o as InstancedDoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";const t=e(0,.6,.2);function r(e,t){const r=e.fragment,a=t.hasMetalnessAndRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture;1===t.pbrMode&&a&&e.include(s,t),2!==t.pbrMode?(0===t.pbrMode&&r.code.add(o`float getBakedOcclusion() { return 1.0; }`),1===t.pbrMode&&(r.uniforms.add(\"emissionFactor\",\"vec3\"),r.uniforms.add(\"mrrFactors\",\"vec3\"),r.code.add(o`vec3 mrr;\nvec3 emission;\nfloat occlusion;`),t.hasMetalnessAndRoughnessTexture&&(r.uniforms.add(\"texMetallicRoughness\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texMetallicRoughnessSize\",\"vec2\"),r.code.add(o`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),t.hasEmissionTexture&&(r.uniforms.add(\"texEmission\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texEmissionSize\",\"vec2\"),r.code.add(o`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),t.hasOcclusionTexture?(r.uniforms.add(\"texOcclusion\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texOcclusionSize\",\"vec2\"),r.code.add(o`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):r.code.add(o`float getBakedOcclusion() { return 1.0; }`),r.code.add(o`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${a?\"vtc.uv = vuv0;\":\"\"}\n      ${t.hasMetalnessAndRoughnessTexture?t.supportsTextureAtlas?\"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);\":\"applyMetallnessAndRoughness(vtc);\":\"\"}\n      ${t.hasEmissionTexture?t.supportsTextureAtlas?\"vtc.size = texEmissionSize; applyEmission(vtc);\":\"applyEmission(vtc);\":\"\"}\n      ${t.hasOcclusionTexture?t.supportsTextureAtlas?\"vtc.size = texOcclusionSize; applyOcclusion(vtc);\":\"applyOcclusion(vtc);\":\"\"}\n    }\n  `))):r.code.add(o`const vec3 mrr = vec3(0.0, 0.6, 0.2);\nconst vec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}function a(e,s,o=!1){o||(e.setUniform3fv(\"mrrFactors\",s.mrrFactors),e.setUniform3fv(\"emissionFactor\",s.emissiveFactor))}export{t as PBRSchematicMRRValues,r as PhysicallyBasedRenderingParameters,a as bindPBRUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){o.attributes.add(\"position\",\"vec3\"),o.vertex.code.add(e`vec3 positionModel() { return position; }`)}export{o as PositionAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o,t){const r=o.fragment;t.receiveAmbientOcclusion?(r.uniforms.add(\"ssaoTex\",\"sampler2D\"),r.uniforms.add(\"viewportPixelSz\",\"vec4\"),r.code.add(e`float evaluateAmbientOcclusion() {\nreturn 1.0 - texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n}\nfloat evaluateAmbientOcclusionInverse() {\nfloat ssao = texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\nreturn viewportPixelSz.z < 0.0 ? 1.0 : ssao;\n}`)):r.code.add(e`float evaluateAmbientOcclusion() { return 0.0; }\nfloat evaluateAmbientOcclusionInverse() { return 1.0; }`)}export{o as EvaluateAmbientOcclusion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Slice as o}from\"../Slice.glsl.js\";import{Transform as r}from\"../Transform.glsl.js\";import{NormalAttribute as e}from\"../attributes/NormalAttribute.glsl.js\";import{TextureCoordinateAttribute as t}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as i}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as a}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as l}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as s}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlpha as d}from\"../util/AlphaDiscard.glsl.js\";import{glsl as n}from\"../../shaderModules/interfaces.js\";function u(u,c){const p=u.vertex.code,v=u.fragment.code;1!==c.output&&3!==c.output||(u.include(r,{linearDepth:!0}),u.include(t,c),u.include(s,c),u.include(a,c),u.include(o,c),u.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),u.varyings.add(\"depth\",\"float\"),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, cameraNearFar, depth);\nforwardTextureCoordinates();\n}`),u.include(d,c),v.add(n`\n      void main(void) {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputDepth(depth);\n      }\n    `)),2===c.output&&(u.include(r,{linearDepth:!1}),u.include(e,c),u.include(i,c),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),u.vertex.uniforms.add(\"viewNormal\",\"mat4\"),u.varyings.add(\"vPositionView\",\"vec3\"),p.add(n`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        ${0===c.normalType?n`\n        vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:\"\"}\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();\n      }\n    `),u.include(o,c),u.include(d,c),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n\n        ${3===c.normalType?n`\n            vec3 normal = screenDerivativeNormal(vPositionView);`:n`\n            vec3 normal = normalize(vNormalWorld);\n            if (gl_FrontFacing == false) normal = -normal;`}\n        gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n      }\n    `)),4===c.output&&(u.include(r,{linearDepth:!1}),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();\n}`),u.include(o,c),u.include(d,c),u.include(l),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputHighlight();\n      }\n    `))}export{u as DefaultMaterialAuxiliaryPasses};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ColorConversion as e}from\"./ColorConversion.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function i(i){i.include(e),i.code.add(t`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${t.int(1)}) {\n        return allMixed;\n      }\n      else if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalColor;\n      }\n      else {\n        // tint (or something invalid)\n        float vIn = rgb2v(internalMixed);\n        vec3 hsvTint = rgb2hsv(externalColor);\n        vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n        return hsv2rgb(hsvOut);\n      }\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalOpacity;\n      }\n      else {\n        // multiply or tint (or something invalid)\n        return allMixed;\n      }\n    }\n  `)}export{i as MixExternalColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n,t){const e=n.fragment,a=void 0!==t.lightingSphericalHarmonicsOrder?t.lightingSphericalHarmonicsOrder:2;0===a?(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===a?(e.uniforms.add(\"lightingAmbientSH_R\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===a&&(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.uniforms.add(\"lightingAmbientSH_R1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_R2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B2\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),1!==t.pbrMode&&2!==t.pbrMode||e.code.add(i`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}export{n as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n){const t=n.fragment;t.uniforms.add(\"lightingMainDirection\",\"vec3\"),t.uniforms.add(\"lightingMainIntensity\",\"vec3\"),t.uniforms.add(\"lightingFixedFactor\",\"float\"),t.code.add(i`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {\nfloat dotVal = clamp(dot(normal_global, lightingMainDirection), 0.0, 1.0);\ndotVal = mix(dotVal, 1.0, lightingFixedFactor);\nreturn lightingMainIntensity * ((1.0 - shadowing) * dotVal);\n}`)}export{n as EvaluateMainLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{EvaluateAmbientLighting as i}from\"./EvaluateAmbientLighting.glsl.js\";import{EvaluateAmbientOcclusion as n}from\"./EvaluateAmbientOcclusion.glsl.js\";import{EvaluateMainLighting as o}from\"./EvaluateMainLighting.glsl.js\";import{PhysicallyBasedRendering as e}from\"./PhysicallyBasedRendering.glsl.js\";import{PiUtils as t}from\"./PiUtils.glsl.js\";import{ReadShadowMap as a}from\"./ReadShadowMap.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function l(l,d){const c=l.fragment;l.include(o),l.include(n,d),0!==d.pbrMode&&l.include(e,d),l.include(i,d),d.receiveShadows&&l.include(a,d),c.uniforms.add(\"lightingGlobalFactor\",\"float\"),c.uniforms.add(\"ambientBoostFactor\",\"float\"),l.include(t),c.code.add(r`\n    const float GAMMA_SRGB = 2.1;\n    const float INV_GAMMA_SRGB = 0.4761904;\n    ${0===d.pbrMode?\"\":\"const vec3 GROUND_REFLECTANCE = vec3(0.2);\"}\n  `),c.code.add(r`\n    float additionalDirectedAmbientLight(vec3 vPosWorld) {\n      float vndl = dot(${1===d.viewingMode?r`normalize(vPosWorld)`:r`vec3(0.0, 0.0, 1.0)`}, lightingMainDirection);\n      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n    }\n  `),c.code.add(r`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {\nfloat additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);\nreturn (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * lightingMainIntensity;\n}`),0===d.pbrMode||4===d.pbrMode?c.code.add(r`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight)\n{\nvec3 mainLighting = evaluateMainLighting(normalWorld, shadow);\nvec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);\nvec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\nvec3 totalLight = mainLighting + ambientLighting + additionalLight;\ntotalLight = min(totalLight, vec3(PI));\nvec3 outColor = vec3((albedoLinear / PI) * totalLight);\nreturn pow(outColor, vec3(INV_GAMMA_SRGB));\n}`):1!==d.pbrMode&&2!==d.pbrMode||(c.code.add(r`const float fillLightIntensity = 0.25;\nconst float horizonLightDiffusion = 0.4;\nconst float additionalAmbientIrradianceFactor = 0.02;\nvec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec3 _emission, float additionalAmbientIrradiance)\n{\nvec3 viewDirection = -viewDir;\nvec3 mainLightDirection = lightingMainDirection;\nvec3 h = normalize(viewDirection + mainLightDirection);\nPBRShadingInfo inputs;\ninputs.NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);\ninputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\ninputs.NdotH = clamp(dot(normal, h), 0.0, 1.0);\ninputs.VdotH = clamp(dot(viewDirection, h), 0.0, 1.0);\ninputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);\nvec3 reflectedView = normalize(reflect(viewDirection, normal));\ninputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);\ninputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\ninputs.ssao = ssao;\ninputs.metalness = mrr[0];\ninputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),c.code.add(r`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\ninputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\ninputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),c.code.add(r`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);\nambientDir = ambientDir != vec3(0.0)? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));\ninputs.NdotAmbDir = abs(dot(normal, ambientDir));\nvec3 mainLightIrradianceComponent = inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;\nvec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;\ninputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;\ninputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),c.code.add(r`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;\nvec3 horizonRingH = normalize(viewDirection + horizonRingDir);\ninputs.NdotH_Horizon = dot(normal, horizonRingH);\nvec3 mainLightRadianceComponent = normalDistribution(inputs.NdotH, inputs.roughness) * lightingMainIntensity * (1.0 - shadow);\nvec3 horizonLightRadianceComponent = normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightRadianceComponent = calculateAmbientRadiance(ssao) + additionalLight;\ninputs.skyRadianceToSurface = ambientLightRadianceComponent + mainLightRadianceComponent + horizonLightRadianceComponent;\ninputs.groundRadianceToSurface = GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) + mainLightRadianceComponent;\ninputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),c.code.add(r`\n        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);\n        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;\n        vec3 emissionComponent = pow(_emission, vec3(GAMMA_SRGB));\n        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;\n        ${2===d.pbrMode?r`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`:r`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`}\n        return outColor;\n      }\n    `))}export{l as EvaluateSceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as n}from\"../../../../core/maybe.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import o from\"../../../webgl/BufferObject.js\";import i from\"../../../webgl/FramebufferObject.js\";import{Program as r}from\"../../../webgl/Program.js\";import\"../../../webgl/enums.js\";import\"../../../webgl/RenderingContext.js\";import\"../../../webgl/Texture.js\";import s from\"../../../webgl/VertexArrayObject.js\";import{encodeDoubleArray as c}from\"./doublePrecisionUtils.js\";import{unpackFloatRGBA as a}from\"./Util.js\";import{testSVGPremultipliedAlpha as l}from\"../../../webgl/testSVGPremultipliedAlpha.js\";class u{constructor(e){this.context=e,this.svgAlwaysPremultipliesAlpha=!1,this._doublePrecisionRequiresObfuscation=null,l(e).then((e=>this.svgAlwaysPremultipliesAlpha=!e))}get doublePrecisionRequiresObfuscation(){if(e(this._doublePrecisionRequiresObfuscation)){const e=h(this.context,!1),n=h(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==e&&(0===n||e/n>5)}return this._doublePrecisionRequiresObfuscation}}let p=null;function f(n){return(e(p)||p.context!==n)&&(p=new u(n)),p}function v(e){n(p)&&p.context===e&&(p=null)}function h(e,n){const l=new i(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1});function u(t,o){const i=new r(e,`\\n\\n  precision highp float;\\n\\n  attribute vec2 position;\\n\\n  uniform vec3 u_highA;\\n  uniform vec3 u_lowA;\\n  uniform vec3 u_highB;\\n  uniform vec3 u_lowB;\\n\\n  varying vec4 v_color;\\n\\n  ${n?\"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION\":\"\"}\\n\\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\\n\\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\\n  }\\n\\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\\n  }\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = dpPlusFrc(hiA, hiB);\\n    vec3 e = dpMinusFrc(t1, hiA);\\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #else\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = hiA + hiB;\\n    vec3 e = t1 - hiA;\\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #endif\\n\\n  const float MAX_RGBA_FLOAT =\\n    255.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\\n\\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\\n\\n  vec4 float2rgba(const float value) {\\n    // Make sure value is in the domain we can represent\\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\\n\\n    // Decompose value in 32bit fixed point parts represented as\\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\\n    // by a power of 256 (this removes the bits that are represented in the previous\\n    // component) and then converts the fractional part to 8bits.\\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\\n\\n    // Convert uint8 values (from 0 to 255) to floating point representation for\\n    // the shader\\n    const float toU8AsFloat = 1.0 / 255.0;\\n\\n    return fixedPointU8 * toU8AsFloat;\\n  }\\n\\n  void main() {\\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\\n\\n    v_color = float2rgba(val.z / 25.0);\\n\\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  `,\"\\n  precision highp float;\\n\\n  varying vec4 v_color;\\n\\n  void main() {\\n    gl_FragColor = v_color;\\n  }\\n  \",new Map([[\"position\",0]])),s=new Float32Array(6);c(t,s,3);const a=new Float32Array(6);return c(o,a,3),e.useProgram(i),i.setUniform3f(\"u_highA\",s[0],s[2],s[4]),i.setUniform3f(\"u_lowA\",s[1],s[3],s[5]),i.setUniform3f(\"u_highB\",a[0],a[2],a[4]),i.setUniform3f(\"u_lowB\",a[1],a[3],a[5]),i}const p=o.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),f=new s(e,new Map([[\"position\",0]]),{geometry:[{name:\"position\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),v=t(5633261.287538229,2626832.878767164,1434988.0495278358),h=t(5633271.46742708,2626873.6381334523,1434963.231608387),m=u(v,h),d=e.getBoundFramebufferObject(),{x:b,y:A,width:g,height:_}=e.getViewport();e.bindFramebuffer(l),e.setViewport(0,0,1,1),e.bindVAO(f),e.drawArrays(5,0,4);const w=new Uint8Array(4);l.readPixels(0,0,1,1,6408,5121,w),m.dispose(),f.dispose(!1),p.dispose(),l.dispose(),e.setViewport(b,A,g,_),e.bindFramebuffer(d);const F=(v[2]-h[2])/25,B=a(w);return Math.abs(F-B)}export{v as clearTestWebGLDriver,f as testWebGLDriver};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/has.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";import{testWebGLDriver as i}from\"../../../lib/WebGLDriverTest.js\";function r({code:e},i){i.doublePrecisionRequiresObfuscation?e.add(c`vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}`):e.add(c`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}`)}function o(c){return!!e(\"force-double-precision-obfuscation\")||i(c).doublePrecisionRequiresObfuscation}export{r as DoublePrecision,o as doublePrecisionRequiresObfuscation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../../../core/shaderModules/interfaces.js\";function l(l){l.vertex.code.add(o`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${o.int(3)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${o.int(4)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{l as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function r(r,l){l.symbolColor?(r.include(o),r.attributes.add(\"symbolColor\",\"vec4\"),r.varyings.add(\"colorMixMode\",\"mediump float\")):r.fragment.uniforms.add(\"colorMixMode\",\"int\"),l.symbolColor?r.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`):r.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`)}export{r as SymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./BufferObject.js\";import t from\"./FramebufferObject.js\";import{Program as r}from\"./Program.js\";import i from\"./Texture.js\";import o from\"./VertexArrayObject.js\";async function n(n){const a=new Image;if(a.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",a.width=5,a.height=5,await a.decode(),!n.gl)return!0;const s=new t(n,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=e.createVertex(n,35044,new Uint16Array([0,0,1,0,0,1,1,1])),m=new o(n,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),d=new r(n,\"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \",new Map([[\"a_pos\",0]]));n.useProgram(d);const g=new i(n,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},a);n.bindTexture(g,0),d.setUniform1i(\"u_texture\",0);const c=n.getBoundFramebufferObject(),{x:u,y:f,width:w,height:l}=n.getViewport();n.bindFramebuffer(s),n.setViewport(0,0,1,1),n.bindVAO(m),n.drawArrays(5,0,4);const v=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,v),d.dispose(),m.dispose(!1),p.dispose(),s.dispose(),g.dispose(),n.setViewport(u,f,w,l),n.bindFramebuffer(c),a.src=\"\",255===v[0]}export{n as testSVGPremultipliedAlpha};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VertexNormal as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{VerticalOffset as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as m}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{ComputeNormalTexture as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js\";import{EvaluateAmbientOcclusion as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{Normals as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{PhysicallyBasedRendering as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as C}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as L,DiscardOrAdjustAlpha as j}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{HeaderComment as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js\";import{MixExternalColor as T}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as E}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as O}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function P(P){const _=new O,S=_.vertex.code,$=_.fragment.code;return _.include(M,{name:\"Default Material Shader\",output:P.output}),_.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),_.include(t),_.varyings.add(\"vpos\",\"vec3\"),_.include(C,P),_.include(i,P),_.include(g,P),0!==P.output&&7!==P.output||(_.include(l,P),_.include(a,{linearDepth:!1}),0===P.normalType&&P.offsetBackfaces&&_.include(r),_.include(p,P),_.include(c,P),P.instancedColor&&_.attributes.add(\"instanceColor\",\"vec4\"),_.varyings.add(\"localvpos\",\"vec3\"),_.include(d,P),_.include(e,P),_.include(n,P),_.include(s,P),_.vertex.uniforms.add(\"externalColor\",\"vec4\"),_.varyings.add(\"vcolorExt\",\"vec4\"),P.multipassTerrainEnabled&&_.varyings.add(\"depth\",\"float\"),S.add(E`\n      void main(void) {\n        forwardNormalizedVertexColor();\n        vcolorExt = externalColor;\n        ${P.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n        vcolorExt *= vvColor();\n        vcolorExt *= getSymbolColor();\n        forwardColorMixMode();\n\n        if (vcolorExt.a < ${E.float(L)}) {\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        }\n        else {\n          vpos = calculateVPos();\n          localvpos = vpos - view[3].xyz;\n          vpos = subtractOrigin(vpos);\n          ${0===P.normalType?E`\n          vNormalWorld = dpNormal(vvLocalNormal(normalModel()));`:\"\"}\n          vpos = addVerticalOffset(vpos, localOrigin);\n          ${P.vertexTangents?\"vTangent = dpTransformVertexTangent(tangent);\":\"\"}\n          gl_Position = transformPosition(proj, view, vpos);\n          ${0===P.normalType&&P.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n        }\n\n        ${P.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n        forwardLinearDepth();\n        forwardTextureCoordinates();\n      }\n    `)),7===P.output&&(_.include(o,P),_.include(j,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.fragment.include(T),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        ${P.attributeColor?E`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===P.output&&(_.include(o,P),_.include(b,P),_.include(u,P),_.include(j,P),P.receiveShadows&&_.include(y,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.include(w,P),_.include(x,P),_.fragment.include(T),_.include(f,P),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        shadingParams.viewDirection = normalize(vpos - camPos);\n        ${3===P.normalType?E`\n        vec3 normal = screenDerivativeNormal(localvpos);`:E`\n        shadingParams.normalView = vNormalWorld;\n        vec3 normal = shadingNormal(shadingParams);`}\n        ${1===P.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${P.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===P.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${P.attributeColor?E`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${P.hasNormalTexture?E`\n              mat3 tangentSpace = ${P.vertexTangents?\"computeTangentSpace(normal);\":\"computeTangentSpace(normal, vpos, vuv0);\"}\n              vec3 shadedNormal = computeTextureNormal(tangentSpace, vuv0);`:\"vec3 shadedNormal = normal;\"}\n        ${1===P.pbrMode||2===P.pbrMode?1===P.viewingMode?E`vec3 normalGround = normalize(vpos + localOrigin);`:E`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:E``}\n        ${1===P.pbrMode||2===P.pbrMode?E`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${P.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),_.include(m,P),_}var _=Object.freeze({__proto__:null,build:P});export{_ as D,P as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VerticalOffset as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as g}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{EvaluateAmbientOcclusion as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{PhysicallyBasedRendering as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as x,DiscardOrAdjustAlpha as y}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{MixExternalColor as C}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as L}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as M}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function j(j){const E=new M,O=E.vertex.code,_=E.fragment.code;return E.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),E.include(t),E.varyings.add(\"vpos\",\"vec3\"),E.include(w,j),E.include(i,j),E.include(c,j),0!==j.output&&7!==j.output||(E.include(l,j),E.include(a,{linearDepth:!1}),j.offsetBackfaces&&E.include(o),j.instancedColor&&E.attributes.add(\"instanceColor\",\"vec4\"),E.varyings.add(\"vNormalWorld\",\"vec3\"),E.varyings.add(\"localvpos\",\"vec3\"),j.multipassTerrainEnabled&&E.varyings.add(\"depth\",\"float\"),E.include(n,j),E.include(e,j),E.include(d,j),E.include(s,j),E.vertex.uniforms.add(\"externalColor\",\"vec4\"),E.varyings.add(\"vcolorExt\",\"vec4\"),O.add(L`\n        void main(void) {\n          forwardNormalizedVertexColor();\n          vcolorExt = externalColor;\n          ${j.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n          vcolorExt *= vvColor();\n          vcolorExt *= getSymbolColor();\n          forwardColorMixMode();\n\n          if (vcolorExt.a < ${L.float(x)}) {\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          }\n          else {\n            vpos = calculateVPos();\n            localvpos = vpos - view[3].xyz;\n            vpos = subtractOrigin(vpos);\n            vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, vpos);\n            ${j.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n          }\n          ${j.multipassTerrainEnabled?L`depth = (view * vec4(vpos, 1.0)).z;`:\"\"}\n          forwardLinearDepth();\n          forwardTextureCoordinates();\n        }\n      `)),7===j.output&&(E.include(r,j),E.include(y,j),j.multipassTerrainEnabled&&(E.fragment.include(v),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        ${j.attributeColor?L`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===j.output&&(E.include(r,j),E.include(p,j),E.include(m,j),E.include(y,j),j.receiveShadows&&E.include(h,j),j.multipassTerrainEnabled&&(E.fragment.include(v),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.include(f,j),E.include(b,j),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        vec3 viewDirection = normalize(vpos - camPos);\n        ${1===j.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${j.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===j.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${j.attributeColor?L`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${L`\n        vec3 shadedNormal = normalize(vNormalWorld);\n        albedo_ *= 1.2;\n        vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);\n        float alignmentLightView = clamp(dot(viewForward, -lightingMainDirection), 0.0, 1.0);\n        float transmittance = 1.0 - clamp(dot(viewForward, shadedNormal), 0.0, 1.0);\n        float treeRadialFalloff = vColor.r;\n        float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n        additionalLight += backLightFactor * lightingMainIntensity;`}\n        ${1===j.pbrMode||2===j.pbrMode?1===j.viewingMode?L`vec3 normalGround = normalize(vpos + localOrigin);`:L`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:L``}\n        ${1===j.pbrMode||2===j.pbrMode?L`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${j.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),E.include(g,j),E}var E=Object.freeze({__proto__:null,build:j});export{E as R,j as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{c as o}from\"../../../../../../chunks/mat3f64.js\";import{c as r}from\"../../../../../../chunks/mat4f64.js\";import{c as e}from\"../../../../../../chunks/vec3f64.js\";import{PositionAttribute as i}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as m}from\"../util/DoublePrecision.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function d(o,r){o.include(i),o.vertex.include(m,r),o.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),o.varyings.add(\"vPosition_view\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_ViewFromCameraRelative_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_ProjFromView\",\"mat4\"),o.vertex.code.add(a`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = uTransform_WorldFromModel_RS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\nuTransform_WorldFromModel_TL,\nuTransform_WorldFromModel_TH,\n-uTransform_WorldFromView_TL,\n-uTransform_WorldFromView_TH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}\nvec3 position_view() {\nreturn uTransform_ViewFromCameraRelative_RS * positionWorldCameraRelative();\n}\nvoid forwardPosition() {\nvPositionWorldCameraRelative = positionWorldCameraRelative();\nvPosition_view = position_view();\ngl_Position = uTransform_ProjFromView * vec4(vPosition_view, 1.0);\n}\nvec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`),o.fragment.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.fragment.code.add(a`vec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`)}!function(i){class m{constructor(){this.worldFromModel_RS=o(),this.worldFromModel_TH=e(),this.worldFromModel_TL=e()}}i.ModelTransform=m;class a{constructor(){this.worldFromView_TH=e(),this.worldFromView_TL=e(),this.viewFromCameraRelative_RS=o(),this.projFromView=r()}}function d(o,r){o.setUniformMatrix3fv(\"uTransform_WorldFromModel_RS\",r.worldFromModel_RS),o.setUniform3fv(\"uTransform_WorldFromModel_TH\",r.worldFromModel_TH),o.setUniform3fv(\"uTransform_WorldFromModel_TL\",r.worldFromModel_TL)}function s(o,r){o.setUniform3fv(\"uTransform_WorldFromView_TH\",r.worldFromView_TH),o.setUniform3fv(\"uTransform_WorldFromView_TL\",r.worldFromView_TL),o.setUniformMatrix4fv(\"uTransform_ProjFromView\",r.projFromView),o.setUniformMatrix3fv(\"uTransform_ViewFromCameraRelative_RS\",r.viewFromCameraRelative_RS)}i.ViewProjectionTransform=a,i.bindModelTransform=d,i.bindViewProjTransform=s}(d||(d={}));export{d as VertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{NormalAttribute as o}from\"./NormalAttribute.glsl.js\";import{VertexPosition as r}from\"./VertexPosition.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function l(l,e){0===e.normalType||1===e.normalType?(l.include(o,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.varyings.add(\"vNormalView\",\"vec3\"),l.vertex.uniforms.add(\"uTransformNormal_GlobalFromModel\",\"mat3\"),l.vertex.uniforms.add(\"uTransformNormal_ViewFromGlobal\",\"mat3\"),l.vertex.code.add(a`void forwardNormal() {\nvNormalWorld = uTransformNormal_GlobalFromModel * normalModel();\nvNormalView = uTransformNormal_ViewFromGlobal * vNormalWorld;\n}`)):2===e.normalType?(l.include(r,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.vertex.code.add(a`\n    void forwardNormal() {\n      vNormalWorld = ${1===e.viewingMode?a`normalize(vPositionWorldCameraRelative);`:a`vec3(0.0, 0.0, 1.0);`}\n    }\n    `)):l.vertex.code.add(a`void forwardNormal() {}`)}!function(o){function r(o,r){o.setUniformMatrix4fv(\"viewNormal\",r)}o.bindUniforms=r}(l||(l={}));export{l as VertexNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{VertexTextureCoordinates as e}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function n(n,a){const r=n.fragment;a.vertexTangents?(n.attributes.add(\"tangent\",\"vec4\"),n.varyings.add(\"vTangent\",\"vec4\"),2===a.doubleSidedMode?r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):(n.extensions.add(\"GL_OES_standard_derivatives\"),r.code.add(t`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`)),0!==a.attributeTextureCoordinates&&(n.include(e,a),r.uniforms.add(\"normalTexture\",\"sampler2D\"),r.uniforms.add(\"normalTextureSize\",\"vec2\"),r.code.add(t`\n    vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\n      vtc.uv = uv;\n      ${a.supportsTextureAtlas?\"vtc.size = normalTextureSize;\":\"\"}\n      vec3 rawNormal = textureLookup(normalTexture, vtc).rgb * 2.0 - 1.0;\n      return tangentSpace * rawNormal;\n    }\n  `))}export{n as ComputeNormalTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";function r(r,e){const m=r.fragment;m.code.add(a`struct ShadingNormalParameters {\nvec3 normalView;\nvec3 viewDirection;\n} shadingParams;`),1===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);\n}`):2===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);\n}`):m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn normalize(params.normalView);\n}`)}export{r as Normals};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";import{webglValidateShadersEnabled as e}from\"../../../../../webgl/RenderingContext.js\";function u(u,o){const r=t`\n  /*\n  *  ${o.name}\n  *  ${0===o.output?\"RenderOutput: Color\":1===o.output?\"RenderOutput: Depth\":3===o.output?\"RenderOutput: Shadow\":2===o.output?\"RenderOutput: Normal\":4===o.output?\"RenderOutput: Highlight\":\"\"}\n  */\n  `;e()&&(u.fragment.code.add(r),u.vertex.code.add(r))}export{u as HeaderComment};\n"],"sourceRoot":""}