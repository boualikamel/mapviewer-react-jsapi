(this["webpackJsonptesting-ant-cra"]=this["webpackJsonptesting-ant-cra"]||[]).push([[140],{1019:function(e,t,r){"use strict";r.r(t);var o=r(15),n=r(8),i=r.n(n),a=r(14),s=r(4),p=r(5),u=r(18),c=r(47),l=r(46),d=r(6),y=r(7),b=r(0),f=(r(90),r(197)),O=(r(340),r(369),r(376),r(374),r(131),r(303),r(299),r(271),r(244)),j=r(237),v=r(1),h=(r(13),r(16),r(12),r(9)),g=r(218),m=r(166),x=r(27),S=r(22),w=r(103),k=r(10),F=r(45),I=r(964),C=r(44),R="http://www.opengis.net/def/crs/OGC/1.3/CRS84",D=function(e){Object(d.a)(r,e);var t=Object(y.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).featureDefinition=null,e.type="ogc-feature",e}return Object(p.a)(r,[{key:"load",value:function(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}},{key:"getFeatureDefinition",value:function(){var e=this.featureDefinition,t=e.collection,r=e.layerDefinition,o=e.spatialReference,n=e.supportedCrs,i=this.layer,a=i.apiKey;return{capabilities:i.capabilities,collection:t,layerDefinition:r,queryParameters:{apiKey:a,customParameters:i.customParameters},spatialReference:o,supportedCrs:n}}},{key:"queryExtent",value:function(e){return null}},{key:"queryFeatureCount",value:function(e){return null}},{key:"queryFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getFeatureDefinition();return this.load(t).then((function(){return Object(I.g)(r,e,t)}))}},{key:"queryFeaturesJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getFeatureDefinition();return this.load(t).then((function(){return Object(I.h)(r,e,t)}))}},{key:"queryObjectIds",value:function(e){return null}},{key:"supportsSpatialReference",value:function(e){return!(!e.isWGS84&&!e.isWebMercator)||this.featureDefinition.supportedCrs.some((function(t){var r=Object(I.f)(t);return!Object(k.j)(r)&&Object(F.c)(r,e)}))}},{key:"_conformsToType",value:function(e,t){var r,o=new RegExp("^".concat(t,"$"),"i");return null!=(r=e.conformsTo.some((function(e){return o.test(e)})))&&r}},{key:"_getCapabilities",value:function(e,t){var r,o,n,i,a,s,p,u=Object(k.k)(t)?null==(r=t.components)?void 0:r.parameters:null;return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:null!=(o=null!=(n=null==u||null==(i=u.limit)||null==(a=i.schema)?void 0:a.maximum)?n:null==u||null==(s=u.limitFeatures)||null==(p=s.schema)?void 0:p.maximum)?o:5e3,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}},{key:"_getExtent",value:function(e){var t,r=null==(t=e.extent)?void 0:t.spatial;if(!r)return null;var o=r.bbox[0],n=4===o.length,i=o[0],a=o[1],s=n?void 0:o[2];return{xmin:i,ymin:a,xmax:n?o[2]:o[3],ymax:n?o[3]:o[4],zmin:s,zmax:n?void 0:o[5],spatialReference:C.a.WGS84.toJSON()}}},{key:"_getSpatialReference",value:function(e){var t,r=null!=(t=e.storageCrs)?t:R,o=Object(I.f)(r);return Object(k.j)(o)?C.a.WGS84:o}},{key:"_getSupportedSpatialReferences",value:function(e,t){var r,o="#/crs",n=null!=(r=e.crs)?r:[R],i=n.includes(o)?n.filter((function(e){return e!==o})).concat(t.crs):n,a=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return i.filter((function(e){return!a.test(e)}))}},{key:"_loadOGCServices",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r){var o,n,a,s,p,u,c,l,d,y,b,f,O,j,v,h,m,w,F,C,R,D,T,P;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(k.k)(r)?r.signal:null,n=t.apiKey,a=t.collectionId,s=t.customParameters,p=t.fields,u=t.geometryType,c=t.hasZ,l=t.objectIdField,d=t.timeInfo,y=t.url,b={fields:null==p?void 0:p.map((function(e){return e.toJSON()})),geometryType:g.c.toJSON(u),hasZ:c,objectIdField:l,timeInfo:null==d?void 0:d.toJSON()},f={apiKey:n,customParameters:s,signal:o},e.next=14,Object(I.d)(y,f);case 14:return O=e.sent,e.next=17,Promise.all([Object(I.c)(O,f),Object(I.b)(O,f)]);case 17:if(j=e.sent,v=Object(x.a)(j,2),h=v[0],m=v[1],this._conformsToType(h,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson")){e.next=23;break}throw new S.a("ogc-feature-layer:no-geojson-support","Server does not support geojson");case 23:if(w=m.collections.find((function(e){return e.id===a}))){e.next=26;break}throw new S.a("ogc-feature-layer:collection-not-found","Server does not contain the named collection");case 26:if(!this._conformsToType(h,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")){e.next=32;break}return e.next=29,Object(I.e)(O,f);case 29:e.t0=e.sent,e.next=33;break;case 32:e.t0=null;case 33:return F=e.t0,e.next=36,Object(I.a)(w,b,f);case 36:C=e.sent,R=this._getCapabilities(C.hasZ,F),D=this._getExtent(w),T=this._getSpatialReference(w).toJSON(),P=this._getSupportedSpatialReferences(w,m),C.extent=D,this.featureDefinition={capabilities:R,collection:w,layerDefinition:C,queryParameters:{},spatialReference:T,supportedCrs:P};case 42:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(w.a);Object(b.a)([Object(v.b)()],D.prototype,"featureDefinition",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],D.prototype,"layer",void 0),Object(b.a)([Object(v.b)()],D.prototype,"type",void 0);var T=D=Object(b.a)([Object(h.a)("esri.layers.graphics.sources.OGCFeatureSource")],D),P=r(377),E=r(239),_=r(379),G=r(297),Q=r(296),q=r(298),M=r(238),B=r(380),z=r(106),L=r(308),J=r(385),A=r(344),Z=r(347),H=r(240),N=r(476),U=r(70),W=r(246),V=r(447),K=r(98),$=r(373),X=r(378),Y=r(53),ee=Object(N.a)(),te=function(e){Object(d.a)(r,e);var t=Object(y.a)(r);function r(e){var o;return Object(s.a)(this,r),(o=t.call(this,e)).collectionId=null,o.copyright=null,o.definitionExpression=null,o.description=null,o.displayField=null,o.elevationInfo=null,o.featureReduction=null,o.fields=null,o.fieldsIndex=null,o.fullExtent=null,o.geometryType=null,o.hasZ=void 0,o.labelingInfo=null,o.labelsVisible=!0,o.legendEnabled=!0,o.objectIdField=null,o.operationalLayerType="OGCFeatureLayer",o.popupEnabled=!0,o.popupTemplate=null,o.screenSizePerspectiveEnabled=!0,o.source=new T({layer:Object(u.a)(o)}),o.spatialReference=null,o.title=null,o.type="ogc-feature",o.typeIdField=null,o.types=null,o.url=null,o}return Object(p.a)(r,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy()}},{key:"load",value:function(e){var t=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then((function(){return t._fetchService(e)}))),this.when()}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(U.j)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"on",value:function(e,t){return Object(c.a)(Object(l.a)(r.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object($.a)(this,e)}},{key:"createQuery",value:function(){return new K.a}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e,t){var r,o,n=this,i=!1,a=null==t||null==(r=t.feature)?void 0:r.attributes,s=this.typeIdField&&(null==a?void 0:a[this.typeIdField]);return null!=s&&this.types&&(i=this.types.some((function(t){var r,i;return t.id==s&&("inherited"===(null==(i=o=null==(r=t.domains)?void 0:r[e])?void 0:i.type)&&(o=n._getLayerDomain(e)),!0)}))),i||o||(o=this._getLayerDomain(e)),o}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(K.a.from(e)||r.createQuery(),t)})).then((function(e){var t;return null==e||null==(t=e.features)||t.forEach((function(e){e.layer=e.sourceLayer=r})),e}))}},{key:"_fetchService",value:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.source.load(t);case 2:this.read(this.source.featureDefinition,{origin:"service"}),Object(U.j)(this.renderer,this.fieldsIndex),Object(U.k)(this.timeInfo,this.fieldsIndex);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getLayerDomain",value:function(e){if(!this.fields)return null;var t,r=Object(o.a)(this.fields);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.name===e&&n.domain)return n.domain}}catch(i){r.e(i)}finally{r.f()}return null}}]),r}(Object(P.a)(Object(_.a)(Object(E.a)(Object(B.a)(Object(M.a)(Object(G.a)(Object(Q.a)(Object(q.a)(Object(j.a)(m.a))))))))));Object(b.a)([Object(v.b)({readOnly:!0,json:{origins:{service:{read:!0}}}})],te.prototype,"capabilities",void 0),Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],te.prototype,"collectionId",void 0),Object(b.a)([Object(v.b)({type:String})],te.prototype,"copyright",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],te.prototype,"defaultPopupTemplate",null),Object(b.a)([Object(v.b)({type:String})],te.prototype,"definitionExpression",void 0),Object(b.a)([Object(v.b)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"collection.description"}}}}})],te.prototype,"description",void 0),Object(b.a)([Object(v.b)({type:String})],te.prototype,"displayField",void 0),Object(b.a)([Object(v.b)({type:X.a})],te.prototype,"elevationInfo",void 0),Object(b.a)([Object(v.b)({types:{key:"type",base:L.a,typeMap:{selection:A.a,cluster:J.a}}})],te.prototype,"featureReduction",void 0),Object(b.a)([Object(v.b)({type:[H.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],te.prototype,"fields",void 0),Object(b.a)([Object(v.b)(ee.fieldsIndex)],te.prototype,"fieldsIndex",void 0),Object(b.a)([Object(v.b)({readOnly:!0,type:Y.a,json:{origins:{service:{read:{source:"layerDefinition.extent"}}}}})],te.prototype,"fullExtent",void 0),Object(b.a)([Object(v.b)({type:g.a.apiValues,json:{origins:{service:{read:{source:"layerDefinition.geometryType",reader:g.a.read}}}}})],te.prototype,"geometryType",void 0),Object(b.a)([Object(v.b)({type:Boolean,json:{origins:{service:{read:{source:"layerDefinition.hasZ"}}}}})],te.prototype,"hasZ",void 0),Object(b.a)([Object(v.b)({type:[W.a],json:{origins:{"web-map":{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:V.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}}}})],te.prototype,"labelingInfo",void 0),Object(b.a)([Object(v.b)(z.d)],te.prototype,"labelsVisible",void 0),Object(b.a)([Object(v.b)(z.e)],te.prototype,"legendEnabled",void 0),Object(b.a)([Object(v.b)({type:String,json:{origins:{service:{read:{source:"layerDefinition.objectIdField"}}}}})],te.prototype,"objectIdField",void 0),Object(b.a)([Object(v.b)({type:["OGCFeatureLayer"]})],te.prototype,"operationalLayerType",void 0),Object(b.a)([Object(v.b)(z.j)],te.prototype,"popupEnabled",void 0),Object(b.a)([Object(v.b)({type:f.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],te.prototype,"popupTemplate",void 0),Object(b.a)([Object(v.b)({types:O.a,json:{origins:{service:{read:{source:"layerDefinition.drawingInfo.renderer"},write:!1}},read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer"}}})],te.prototype,"renderer",null),Object(b.a)([Object(v.b)({type:Boolean})],te.prototype,"screenSizePerspectiveEnabled",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],te.prototype,"source",void 0),Object(b.a)([Object(v.b)({readOnly:!0,type:C.a,json:{origins:{service:{read:!0}}}})],te.prototype,"spatialReference",void 0),Object(b.a)([Object(v.b)({type:String,json:{origins:{service:{read:{source:"collection.title"}},"web-map":{write:{ignoreOrigin:!0}}}}})],te.prototype,"title",void 0),Object(b.a)([Object(v.b)({readOnly:!0,json:{read:!1}})],te.prototype,"type",void 0),Object(b.a)([Object(v.b)({type:String,readOnly:!0})],te.prototype,"typeIdField",void 0),Object(b.a)([Object(v.b)({type:[Z.a]})],te.prototype,"types",void 0),Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],te.prototype,"url",void 0);var re=te=Object(b.a)([Object(h.a)("esri.layers.OGCFeatureLayer")],te);t.default=re},699:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var o={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}}]);
//# sourceMappingURL=140.cb9c7a72.chunk.js.map