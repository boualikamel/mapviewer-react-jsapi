(this["webpackJsonpjsapi-create-react-app"]=this["webpackJsonpjsapi-create-react-app"]||[]).push([[28],{152:function(e,t,i){"use strict";i.r(t),i.d(t,"view",(function(){return l})),i.d(t,"initialize",(function(){return o}));var n=i(358);var s=[new n.default({url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/Alternative_Fuel_Station_March2018/FeatureServer",outFields:["*"]}),new n.default({url:"https://services1.arcgis.com/4yjifSiIG17X0gW4/arcgis/rest/services/Alternative_Fuel_Station_March2018/FeatureServer",outFields:["*"]})],a=i(416),c=i(516);const r=new a.a({basemap:"gray-vector"}),l=new c.a({container:"viewDiv",map:r,zoom:6,center:[3.262939,36.618283],showAttribution:!1});l.ui._removeComponents(["attribution"]),r.addMany(s);const o=e=>{l.container=e,l.when().then((e=>{console.log("Map and View are ready")})).catch((e=>{console.warn("An error in creating the map occured:",e)}))}},497:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=497},544:function(e,t,i){},548:function(e,t,i){"use strict";i.r(t);var n=i(38),s=i(18),a=i(250),c=i.n(a);const r=Object(s.createContext)({container:null,setContainer:e=>{}}),l=({children:e})=>{const[t,a]=Object(s.useState)(null);Object(s.useEffect)((()=>{(async()=>{t&&(await Promise.resolve().then(i.bind(null,152))).initialize(t)})()}),[t]);const c={container:t,setContainer:a};return Object(n.jsx)(r.Provider,{value:c,children:e})},o=()=>{const e=Object(s.useRef)(null),{setContainer:t}=Object(s.useContext)(r);return Object(s.useEffect)((()=>{t(e.current)}),[e.current]),Object(n.jsx)("div",{className:"webmap",ref:e})};var d=i(98),j=i(515),u=i(152);var b=()=>{const e=Object(s.useRef)(null),t=new j.a({view:u.view});return Object(s.useEffect)((()=>{const i=e=>{const t=e.vertices;u.view.graphics.removeAll();const i=new d.a({geometry:{type:"polyline",paths:t,spatialReference:u.view.spatialReference},symbol:{type:"simple-line",color:[4,90,141],width:4,cap:"round",join:"round"}});u.view.graphics.add(i)};e.current=e=>{const n=t.create("polyline");u.view.focus(),n.on(["vertex-add","vertex-remove","cursor-update","redo","undo","draw-complete"],i)}}),[]),Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"primary",onClick:()=>e.current(),children:"Drawing"})})};var h=()=>Object(n.jsx)("div",{});var m=()=>Object(n.jsx)("div",{children:"STATISTIQUE"}),x=i(562),v=i(521),O=i(561),p=i(264),g=i(266),f=i(142),w=i(331);var y=[new f.default({baseLayers:[new w.default({urlTemplate:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{level}/{row}/{col}.png"})],title:"satellite",id:"satellite",thumbnailUrl:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/4/5/4"}),new f.default({baseLayers:[new w.default({urlTemplate:"https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",subDomains:["a","b","c"]})],title:"osm",id:"osm",thumbnailUrl:"https://a.tile.openstreetmap.org/6/31/25.png"}),new f.default({baseLayers:[new w.default({urlTemplate:"http://{subDomain}.google.com/vt/lyrs=m&x={col}&y={row}&z={level}",subDomains:["mt0","mt1","mt2","mt3"]})],title:"googleStreets",id:"google_streets",thumbnailUrl:"http://mt3.google.com/vt/lyrs=m&x=17&y=11&z=5"}),new f.default({baseLayers:[new w.default({urlTemplate:"http://{subDomain}.google.com/vt/lyrs=s&x={col}&y={row}&z={level}",subDomains:["mt0","mt1","mt2","mt3"]})],title:"googleSatellite",id:"google_satellite",thumbnailUrl:"http://mt3.google.com/vt/lyrs=s&x=17&y=11&z=5"})],S=i(517),N=i(318);var C=()=>{const e=Object(s.useRef)(null);return Object(s.useEffect)((()=>{const t=new N.a({basemaps:y});new S.a({view:u.view,source:t,container:e.current})}),[]),Object(n.jsx)("div",{className:"baseMapGalery",ref:e})},z=i(518);var D=()=>{const e=Object(s.useRef)(null);return Object(s.useEffect)((()=>{new z.default({view:u.view,container:e.current})}),[]),Object(n.jsx)("div",{className:"legendContainer",ref:e})},I=i(519);var W=()=>{const e=Object(s.useRef)(null);return Object(s.useEffect)((()=>{new I.a({view:u.view,container:e.current})}),[]),Object(n.jsx)("div",{className:"layerList",ref:e})},E=i(520);var T=()=>{const e=Object(s.useRef)(null);return Object(s.useEffect)((()=>{new E.a({view:u.view,container:e.current})}),[]),Object(n.jsx)("div",{className:"coordinateConversion",ref:e})},k=i(563),M=i(560);function _(e){const[t,i]=Object(s.useState)("");return Object(s.useEffect)((()=>{e.hide?i("block"):i("none")}),[e.hide]),Object(n.jsx)("div",{className:"sidebar",style:{display:t},children:Object(n.jsxs)(k.a,{defaultActiveKey:"1",children:[Object(n.jsx)(M.a,{eventKey:"1",title:Object(n.jsx)("i",{className:"esri-icon-basemap"}),children:Object(n.jsx)(C,{})}),Object(n.jsx)(M.a,{eventKey:"2",title:Object(n.jsx)("i",{className:"esri-icon-collection"}),children:Object(n.jsx)(D,{})}),Object(n.jsx)(M.a,{eventKey:"3",title:Object(n.jsx)("i",{className:"esri-icon-layers"}),children:Object(n.jsx)(W,{})}),Object(n.jsx)(M.a,{eventKey:"4",title:Object(n.jsx)("i",{className:"esri-icon-locate"}),children:Object(n.jsx)(T,{})})]})})}function A(e){const[t,i]=Object(s.useState)(!1);return console.log("IN HEADER ",e.listWidget),Object(n.jsxs)("header",{className:"header",children:[Object(n.jsxs)(x.a,{className:"header-bar",expand:"lg",children:[Object(n.jsxs)(x.a.Brand,{className:"header-logo",href:"#home",children:[Object(n.jsx)(p.a,{icon:g.d}),Object(n.jsx)("p",{children:"Viewer"})]}),Object(n.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsx)(x.a.Collapse,{className:"header-menu",id:"basic-navbar-nav",children:Object(n.jsx)(v.a,{className:"mr-auto",children:e.listWidget.map((t=>Object(n.jsx)(v.a.Link,{onClick:()=>{e.handleClickMenu(t[1])},className:"header-menu-elem",children:t[0]},t[1])))})}),Object(n.jsxs)("div",{className:"right-content",children:[Object(n.jsx)(O.a,{variant:"transparent",children:Object(n.jsx)(p.a,{icon:g.b})}),Object(n.jsx)(O.a,{variant:"transparent",children:Object(n.jsx)(p.a,{icon:g.f})}),Object(n.jsx)(O.a,{variant:"transparent",onClick:()=>i(!t),children:Object(n.jsx)(p.a,{icon:g.a})})]})]}),Object(n.jsx)(_,{hide:t})]})}i(542),i(543),i(544);var F=i(514),L=i.n(F);var R=e=>{const t=Object(s.useRef)(null),[i,a]=Object(s.useState)({x:0,y:0}),[c,r]=Object(s.useState)({x:0,y:0}),[l,o]=Object(s.useState)(0),[d,j]=Object(s.useState)(!0),[u,b]=Object(s.useState)({}),[h,m]=Object(s.useState)((()=>e.initialDimension?{height:e.initialDimension.height,width:e.initialDimension.width}:{height:"200px",width:"200px"})),[x,v]=Object(s.useState)({x:0,y:0}),[O,f]=Object(s.useState)(!0);return Object(s.useEffect)((()=>{e.fix?(v({...i}),m({height:t.current.offsetHeight,width:t.current.offsetWidth}),a({x:0,y:0}),r({x:0,y:0}),j(!1),b({height:"100%",width:"500px"})):(j(!0),a({...x}),r({...x}),b({height:h.height,width:h.width}))}),[e.fix]),Object(n.jsx)(L.a,{handle:"strong",bounds:"parent",onDrag:(e,t)=>{const{x:i,y:n}=c;r({x:i+t.deltaX,y:n+t.deltaY}),a({x:n+t.deltaY,y:n+t.deltaY})},onStart:()=>(o(l+1),d),onStop:()=>{o(l-1),a({x:c.x,y:c.y})},position:i,children:Object(n.jsxs)("div",{className:" widgetContainer",style:{zIndex:e.zIndex,height:u.height,width:u.width,display:e.display},ref:t,onMouseDownCapture:t=>e.upWidget(e.id),children:[Object(n.jsx)("strong",{children:Object(n.jsxs)("div",{className:"widgetHeader ",children:[Object(n.jsx)("p",{className:"widgetTitle",children:e.title}),Object(n.jsxs)("div",{className:"widgetCustomize",children:[Object(n.jsx)("div",{size:"small",className:"circle maximizeWidget",onClick:()=>{O?(m({height:t.current.offsetHeight,width:t.current.offsetWidth}),v({...i}),b({height:"100%",width:"100%"}),a({x:0,y:0}),f(!O),j(!1)):(b({...h}),a({...x}),f(!O),j(!0))},children:Object(n.jsx)(p.a,{icon:g.c})}),Object(n.jsx)("div",{className:"circle closeWidget",onClick:()=>{e.closeWidget(e.id)},children:Object(n.jsx)(p.a,{icon:g.e})})]})]})}),Object(n.jsx)("div",{className:"widgetBody bg-light",children:e.children})]})})};var P=e=>{const[t,i]=Object(s.useState)(e.listWidget),a=e=>{let n=[...t],s=Math.max.apply(Math,n.map((function(e){return e.zIndex})));n.map(((t,i)=>{i===e&&(n[i].zIndex=s+1)})),i(n)},c=e=>{console.log("index",e);let n=[...t];n[e].display="none",i(n)},r=e.listWidget.filter(((e,t)=>!0===e.rendered));return Object(n.jsx)("div",{className:"widgetList",children:r.map((t=>Object(n.jsx)(R,{id:t.i,fix:e.fix,title:t.title,zIndex:t.zIndex,upWidget:a,initialDimension:t.initialSize,display:t.display,closeWidget:c,children:t.body},t.i)))})};var U=()=>{const[e,t]=Object(s.useState)([{title:"Affaire",menuTitle:"Affaire",body:Object(n.jsx)(h,{}),icon:"",initialSize:{height:"400px",width:"400px"},initalPosition:""},{title:"Drawing",menuTitle:"Drawing",body:Object(n.jsx)(b,{}),icon:"",initialSize:{height:"500px",width:"500px"},initalPosition:""},{title:"Statistique",menuTitle:"Statistique",body:Object(n.jsx)(m,{}),icon:"",initalPosition:""}]),[i,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{const i=[...e];i.map(((e,t)=>{e.rendered=!1,e.zIndex=0,e.display="none",e.i=t})),t(i)}),[!0]);return Object(n.jsxs)(l,{children:[Object(n.jsx)(A,{click:()=>{a(!i)},handleClickMenu:i=>{let n=[...e],s=n.find((e=>e.i===i));s.rendered||(s.rendered=!0),s.display="flex",t(n)},listWidget:e.map((e=>[e.menuTitle,e.i]))}),Object(n.jsxs)("div",{className:"mapContainer",children:[Object(n.jsx)(o,{}),Object(n.jsx)(P,{fix:i,listWidget:e})]})]})};var G=e=>{e&&e instanceof Function&&i.e(223).then(i.bind(null,874)).then((({getCLS:t,getFID:i,getFCP:n,getLCP:s,getTTFB:a})=>{t(e),i(e),n(e),s(e),a(e)}))};c.a.render(Object(n.jsx)(U,{}),document.getElementById("root")),G()}},[[548,29,30]]]);