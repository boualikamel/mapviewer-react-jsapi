{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"names":["p","e","layer","parent","this","when","catch","name","t","id","r","title","o","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","s","i","n","EventedMixin","l","prototype","readOnly","type","Boolean","d","a","arguments","left","right","top","bottom","_get","Number","String","json","write","y","base","key","typeMap","extent","m","polygon","c","geometry","clone","types","read","path","ofType","rect","h","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","detach","remove","minScale","maxScale","isFulfilled","isResolved","_set","update","isVisibleAtScale","scale","set","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","Math","max","abs","yoffset","length","size","filter","map","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","x","xmin","min","ymin","xmax","ymax","toMap","intersects","popupTemplate","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","u","relationships","includes","push","has","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","where","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","source","reader","target","writer","from","overridePolicy","isAggregate","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","default","some","globalId","values","delete","_hasGlobalIds","_queueProcessor","concurrency","process","clear","last","finally","popLast","_mergeEdits","edits","addedFeatures","deletedFeatures","updatedFeatures","addOrModified","removed","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","query","params","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","_releaseTile","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","pool","release","hasMissingTiles","added","_addPlaceholderChildren","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","includedEffect","excludedEffect","excludedLabelsVisible","I","R","_updatingRequiredFieldsPromise","requiredFields","_handleRequiredFieldsChange","outFields","Error","returnGeometry","outSpatialReference","createQuery","intersection","b","_updateRequiredFields","collectRequiredFields","timeInfo","F","startField","endField","floorInfo","floorField","w","subtypeField","sublayers","Promise","all","displayField","sort","clientGraphics","q","createPopupQuery","_loadArcadeModules","arcadeUtils","hasGeometryOperations","g","attributes","queryFeatures","concat","features","geometryType","j","returnZ","returnM","isEmpty","E","v","K","W","X","Y","_pipelineIsUpdating","_commandsQueue","P","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","z","excluded","_updateClusterSizeTask","destroy","_initProxy","_initServiceOptions","valueRanges","isTable","_createClientOptions","V","_createServiceOptions","items","labelingInfo","labelsVisible","enable","_serviceOptions","availableFields","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","geometryDefinition","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","getObjectId","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","_hitTest","queryStatistics","viewInfoParams","viewingMode","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","S","fromJSON","_setLayersForFeature","queryObjectIds","queryFeatureCount","queryExtent","count","G","_update","_tileStrategy","updateTiles","timeline","record","N","_acquireTile","featuresTilingScheme","_edit","removeAllChildren","uninstall","_tileRendererHash","popup","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","createFetchPopupFeaturesQueryGeometry","Q","console","log","setUpdating","emitEvent","emit","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","L","customParameters","token","apiKey","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","_detectQueryMode","maxRecordCount","tileMaxRecordCount","_validateEdit","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","C","_createConfiguration","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","effects","onConfigUpdate","tileKeys","startup","hasHighlight","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","T","O","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","layerView","install","getAttributeHash","_addFloorFilterClause","$","viewAllLevelIds","replace","join","RegExp","trim","_injectOverrides","A","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","_","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","H","k","U","J","M","Z"],"mappings":"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","file":"static/js/12.8116a6ee.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends(s(i(n(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([l()],p.prototype,\"fullOpacity\",null),e([l()],p.prototype,\"layer\",void 0),e([l()],p.prototype,\"parent\",void 0),e([l({readOnly:!0})],p.prototype,\"suspended\",null),e([l({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([l({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([l({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([l({readOnly:!0})],p.prototype,\"updatingProgress\",null),e([l()],p.prototype,\"visible\",null),p=e([a(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends o{};e=r([s(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([o(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{fixFields as d,unpackFieldNames as m,collectLabelingFields as c,collectElevationFields as f,collectFilterFields as y,collectFeatureReductionFields as h,collectFields as F,collectField as w,featureHasFields as g}from\"../../layers/support/fieldUtils.js\";import x from\"../../rest/support/Query.js\";import{loadArcade as b}from\"../../support/arcadeOnDemand.js\";import E from\"./support/FeatureEffect.js\";import v from\"./support/FeatureFilter.js\";import{getFetchPopupTemplate as q,getRequiredFields as j}from\"./support/popupUtils.js\";const I=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?d(t,[...m(t,e.outFields),...r]):d(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){I.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new x(e);return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return b()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,l=t.featureReduction,a=new Set,u=await o([n?n.collectRequiredFields(a,r):null,c(a,t),e?f(a,t):null,i(this.filter)?y(a,t,this.filter):null,this.effect?y(a,t,this.effect.filter):null,l?h(a,t,l):null]);if(t.timeInfo&&this.timeExtent&&F(a,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&F(a,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){w(a,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(a,r),c(a,e)])}));await o(e)}for(const i of u)i.error&&I.error(i.error);w(a,r,s),e&&\"displayField\"in t&&t.displayField&&w(a,r,t.displayField);const p=Array.from(a).sort();this._set(\"requiredFields\",p)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const n of t){const{layer:t}=n;if(!(\"popupEnabled\"in t))continue;const l=m(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!g(l,n)?s.push(n):r.push(n)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const n of o){if(!(\"popupEnabled\"in n))continue;const t=q(n,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),l=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!l);const a=await j(this.layer,t);for(const e of a)r.add(e)}return t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],R.prototype,\"availableFields\",null),e([a({type:E})],R.prototype,\"effect\",void 0),e([a({type:v})],R.prototype,\"filter\",void 0),e([a(p)],R.prototype,\"timeExtent\",void 0),e([a()],R.prototype,\"layer\",void 0),e([a({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([a()],R.prototype,\"suspended\",void 0),e([a()],R.prototype,\"view\",void 0),R=e([u(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as f,isAbortError as y,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as R}from\"../../../layers/support/arcgisLayerUrl.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import S from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as E}from\"./features/tileRenderers.js\";import{computePxBuffer as C}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as O,isClusterCompatibleRenderer as j,createClusterRenderer as q}from\"./support/clusterUtils.js\";import P from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/effects/EffectList.js\";import $ from\"../../layers/support/FeatureFilter.js\";import M from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as Q}from\"../../support/drapedUtils.js\";import A from\"../../webgl/capabilities.js\";import G from\"../../../geometry/Extent.js\";const D=2147483648,B=1,K=e=>(e&D)>>>31===B;function W(e){return e&&\"openPorts\"in e}const X=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let Y=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new P({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new z,excluded:new z}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,u=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON(),c=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({sublayerHash:c,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:h,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:u,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=S.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:G.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return f([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return Q(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&R(e.path)&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){X.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u={...\"customParameters\"in t?t.customParameters:void 0,token:\"apiKey\"in t?t.apiKey:void 0},d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():W(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:y}=await this._detectQueryMode(p);return{type:f,subtypeField:c,featureCount:y,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,customParameters:u}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=w.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(X.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await C(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&W(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){y(e)||X.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){y(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){y(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=O(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=q(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await E(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new $;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=A();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!A().supportsTextureFloat)||(X.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!K(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],Y.prototype,\"_serviceOptions\",void 0),e([v()],Y.prototype,\"_proxy\",void 0),e([v()],Y.prototype,\"_pipelineIsUpdating\",void 0),e([v()],Y.prototype,\"_effectiveRenderer\",void 0),e([v()],Y.prototype,\"_aggregateValueRanges\",void 0),e([v()],Y.prototype,\"_commandsQueue\",void 0),e([v()],Y.prototype,\"labelsVisible\",null),e([v({type:$})],Y.prototype,\"filter\",void 0),e([v({type:M})],Y.prototype,\"effect\",null),e([v({readOnly:!0})],Y.prototype,\"effects\",null),e([v({readOnly:!0})],Y.prototype,\"queryMode\",null),e([v()],Y.prototype,\"renderingConfigHash\",null),e([v()],Y.prototype,\"tileRenderer\",void 0),e([v()],Y.prototype,\"updating\",void 0),Y=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],Y);var Z=Y;export default Z;\n"],"sourceRoot":""}