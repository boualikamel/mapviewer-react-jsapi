(this["webpackJsonptesting-ant-cra"]=this["webpackJsonptesting-ant-cra"]||[]).push([[11,136,156],{609:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return A}));var i=n(27),r=n(82);var a=function(e,t,n){return[t,n]},o=function(e,t,n){return[t,n,e[2]]},s=function(e,t,n){return[t,n,e[2],e[3]]};function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l(e,t){var n=e.scale,i=e.translate;return Math.round((t-i[0])/n[0])}function u(e,t){var n=e.scale,i=e.translate;return Math.round((i[1]-t)/n[1])}function h(e,t,n){for(var i,r,a,o,s=[],c=0;c<n.length;c++){var h=n[c];c>0?(a=l(e,h[0]),o=u(e,h[1]),a===i&&o===r||(s.push(t(h,a-i,o-r)),i=a,r=o)):(i=l(e,h[0]),r=u(e,h[1]),s.push(t(h,i,r)))}return s.length>0?s:null}function d(e,t){var n=e.scale,i=e.translate;return t*n[0]+i[0]}function f(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function p(e,t,n){var r=new Array(n.length);if(!n.length)return r;var a=Object(i.a)(e.scale,2),o=a[0],s=a[1],c=d(e,n[0][0]),l=f(e,n[0][1]);r[0]=t(n[0],c,l);for(var u=1;u<n.length;u++){var h=n[u];c+=h[0]*o,l-=h[1]*s,r[u]=t(h,c,l)}return r}function b(e,t,n){for(var i=new Array(n.length),r=0;r<n.length;r++)i[r]=p(e,t,n[r]);return i}function v(e,t,n,i,r){return t.points=function(e,t,n,i){return h(e,n?i?s:o:i?o:a,t)}(e,n.points,i,r),t}function m(e,t,n,i,r){return t.x=l(e,n.x),t.y=u(e,n.y),t!==n&&(i&&(t.z=n.z),r&&(t.m=n.m)),t}function g(e,t,n,i,r){var c=function(e,t,n,i){for(var r=[],c=n?i?s:o:i?o:a,l=0;l<t.length;l++){var u=h(e,c,t[l]);u&&u.length>=3&&r.push(u)}return r.length?r:null}(e,n.rings,i,r);return c?(t.rings=c,t):null}function O(e,t,n,i,r){var c=function(e,t,n,i){for(var r=[],c=n?i?s:o:i?o:a,l=0;l<t.length;l++){var u=h(e,c,t[l]);u&&u.length>=2&&r.push(u)}return r.length?r:null}(e,n.paths,i,r);return c?(t.paths=c,t):null}function j(e,t){return e&&t?Object(r.f)(t)?m(e,{},t,!1,!1):Object(r.h)(t)?O(e,{},t,!1,!1):Object(r.g)(t)?g(e,{},t,!1,!1):Object(r.e)(t)?v(e,{},t,!1,!1):Object(r.d)(t)?(o=!1,s=!1,(i={}).xmin=l(n=e,(a=t).xmin),i.ymin=u(n,a.ymin),i.xmax=l(n,a.xmax),i.ymax=u(n,a.ymax),i!==a&&(o&&(i.zmin=a.zmin,i.zmax=a.zmax),s&&(i.mmin=a.mmin,i.mmax=a.mmax)),i):null:null;var n,i,a,o,s}function y(e,t,n,i,r){return t.points=function(e,t,n,i){return p(e,n?i?s:o:i?o:a,t)}(e,n.points,i,r),t}function _(e,t,n,i,r){return t.x=d(e,n.x),t.y=f(e,n.y),t!==n&&(i&&(t.z=n.z),r&&(t.m=n.m)),t}function x(e,t,n,i,r){return t.rings=function(e,t,n,i){return b(e,n?i?s:o:i?o:a,t)}(e,n.rings,i,r),t}function A(e,t,n,i,r){return t.paths=function(e,t,n,i){return b(e,n?i?s:o:i?o:a,t)}(e,n.paths,i,r),t}},625:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return O})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return p}));var i=n(10);n(53),n(142);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,n,i,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r();return s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=a,s[5]=o,s}function o(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function s(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function c(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length/3,r=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5],u=0;u<i;u++)r=Math.min(r,t[n+3*u]),a=Math.min(a,t[n+3*u+1]),o=Math.min(o,t[n+3*u+2]),s=Math.max(s,t[n+3*u]),c=Math.max(c,t[n+3*u+1]),l=Math.max(l,t[n+3*u+2]);e[0]=r,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function l(e,t,n){var i=t.length,r=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5];if(n)for(var u=0;u<i;u++){var h=t[u];r=Math.min(r,h[0]),a=Math.min(a,h[1]),o=Math.min(o,h[2]),s=Math.max(s,h[0]),c=Math.max(c,h[1]),l=Math.max(l,h[2])}else for(var d=0;d<i;d++){var f=t[d];r=Math.min(r,f[0]),a=Math.min(a,f[1]),s=Math.max(s,f[0]),c=Math.max(c,f[1])}e[0]=r,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function u(e){return e[0]>=e[3]?0:e[3]-e[0]}function h(e){return e[1]>=e[4]?0:e[4]-e[1]}function d(e){return e[2]>=e[5]?0:e[5]-e[2]}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=e[0]+u(e)/2,t[1]=e[1]+h(e)/2,t[2]=e[2]+d(e)/2,t}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=u(e),t[1]=h(e),t[2]=d(e),t}function b(e){return Math.max(u(e),d(e),h(e))}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=e[0]+u(e)/2,r=e[1]+h(e)/2,a=e[2]+d(e)/2;return n[0]=i+(e[0]-i)*t,n[1]=r+(e[1]-r)*t,n[2]=a+(e[2]-a)*t,n[3]=i+(e[3]-i)*t,n[4]=r+(e[4]-r)*t,n[5]=a+(e[5]-a)*t,n}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function j(e){return e?O(e,P):r(P)}function y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function _(e){return 6===e.length}function x(e){return 0===u(e)&&0===h(e)&&0===d(e)}function A(e,t,n){if(Object(i.j)(e)||Object(i.j)(t))return e===t;if(!_(e)||!_(t))return!1;if(n){for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}var P=[1/0,1/0,1/0,-1/0,-1/0,-1/0],E=[0,0,0,0,0,0];r()},678:function(e,t,n){"use strict";function i(){return new Float32Array(4)}function r(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,n,i){var r=new Float32Array(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function o(){return i()}function s(){return a(1,1,1,1)}function c(){return a(1,0,0,0)}function l(){return a(0,1,0,0)}function u(){return a(0,0,1,0)}function h(){return a(0,0,0,1)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var d=o(),f=s(),p=c(),b=l(),v=u(),m=h();Object.freeze({__proto__:null,create:i,clone:r,fromValues:a,createView:function(e,t){return new Float32Array(e,t,4)},zeros:o,ones:s,unitX:c,unitY:l,unitZ:u,unitW:h,ZEROS:d,ONES:f,UNIT_X:p,UNIT_Y:b,UNIT_Z:v,UNIT_W:m})},697:function(e,t,n){"use strict";var i,r,a=n(54),o=n(752),s=n(85),c=n(704),l=n(647);(r=i||(i={})).length=function(e,t){var n=e[t],i=e[t+1],r=e[t+2];return Math.sqrt(n*n+i*i+r*r)},r.normalize=function(e,t){var n=e[t],i=e[t+1],r=e[t+2],a=1/Math.sqrt(n*n+i*i+r*r);e[t]*=a,e[t+1]*=a,e[t+2]*=a},r.scale=function(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n},r.add=function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t;(r=r||e)[a]=e[t]+n[i],r[a+1]=e[t+1]+n[i+1],r[a+2]=e[t+2]+n[i+2]},r.subtract=function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t;(r=r||e)[a]=e[t]-n[i],r[a+1]=e[t+1]-n[i+1],r[a+2]=e[t+2]-n[i+2]};var u,h,d,f,p=n(720),b=n(759),v=n(365),m=i;!function(e){for(var t=.5,n=[[-t,-t,t],[t,-t,t],[t,t,t],[-t,t,t],[-t,-t,-t],[t,-t,-t],[t,t,-t],[-t,t,-t]],i=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],r=[0,0,1,0,1,1,0,1],a=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),o=new Uint16Array(36),s=0;s<6;s++)for(var c=0;c<6;c++)o[6*s+c]=s;for(var l=new Uint16Array(36),u=0;u<6;u++)l[6*u+0]=0,l[6*u+1]=1,l[6*u+2]=2,l[6*u+3]=2,l[6*u+4]=3,l[6*u+5]=0;e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(24),s=0;s<8;s++)t[3*s]=n[s][0]*e[0],t[3*s+1]=n[s][1]*e[1],t[3*s+2]=n[s][2]*e[2];return new p.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:i}],["uv0",{size:2,data:r}]],[["position",a],["normal",o],["uv0",l]])}}(u||(u={})),function(e){var t=.5,n=[[-t,0,-t],[t,0,-t],[t,0,t],[-t,0,t],[0,-t,0],[0,t,0]],i=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],r=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),a=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(18),o=0;o<6;o++)t[3*o]=n[o][0]*e[0],t[3*o+1]=n[o][1]*e[1],t[3*o+2]=n[o][2]*e[2];return new p.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:i}]],[["position",r],["normal",a]])}}(h||(h={})),function(e){var t=.5,n=Object(o.c)(-t,0,-t),i=Object(o.c)(t,0,-t),r=Object(o.c)(0,0,t),s=Object(o.c)(0,.5,0),c=Object(o.b)(),l=Object(o.b)(),u=Object(o.b)(),h=Object(o.b)(),d=Object(o.b)();Object(a.g)(c,n,s),Object(a.g)(l,n,i),Object(a.d)(u,c,l),Object(a.o)(u,u),Object(a.g)(c,i,s),Object(a.g)(l,i,r),Object(a.d)(h,c,l),Object(a.o)(h,h),Object(a.g)(c,r,s),Object(a.g)(l,r,n),Object(a.d)(d,c,l),Object(a.o)(d,d);var f=[n,i,r,s],b=[0,-1,0,u[0],u[1],u[2],h[0],h[1],h[2],d[0],d[1],d[2]],v=[0,1,2,3,1,0,3,2,1,3,0,2],m=[0,0,0,1,1,1,2,2,2,3,3,3];e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(12),n=0;n<4;n++)t[3*n]=f[n][0]*e[0],t[3*n+1]=f[n][1]*e[1],t[3*n+2]=f[n][2]*e[2];return new p.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:b}]],[["position",new Uint16Array(v)],["normal",new Uint16Array(m)]])}}(d||(d={})),function(e){e.createBoxGeometry=u.createGeometry,e.createDiamondGeometry=h.createGeometry,e.createTetrahedronGeometry=d.createGeometry,e.createSphereGeometry=function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{uv:!0},r=-Math.PI,a=2*Math.PI,o=-Math.PI/2,s=Math.PI,c=Math.max(3,Math.floor(t)),l=Math.max(2,Math.floor(n)),u=(c+1)*(l+1),h=new Float32Array(3*u),d=new Float32Array(3*u),f=new Float32Array(2*u),b=[],v=0,m=0;m<=l;m++){for(var g=[],O=m/l,j=o+O*s,y=Math.cos(j),_=0;_<=c;_++){var x=_/c,A=r+x*a,P=Math.cos(A)*y,E=Math.sin(j),w=-Math.sin(A)*y;h[3*v]=P*e,h[3*v+1]=E*e,h[3*v+2]=w*e,d[3*v]=P,d[3*v+1]=E,d[3*v+2]=w,f[2*v]=x,f[2*v+1]=O,g.push(v),++v}b.push(g)}var k=new Uint32Array(2*c*(l-1)*3);v=0;for(var S=0;S<l;S++)for(var M=0;M<c;M++){var C=b[S][M],D=b[S][M+1],V=b[S+1][M+1],R=b[S+1][M];0===S?(k[v++]=C,k[v++]=V,k[v++]=R):S===l-1?(k[v++]=C,k[v++]=D,k[v++]=V):(k[v++]=C,k[v++]=D,k[v++]=V,k[v++]=V,k[v++]=R,k[v++]=C)}var z=[["position",k],["normal",k]],L=[["position",{size:3,data:h,exclusive:!0}],["normal",{size:3,data:d,exclusive:!0}]];return i.uv&&(L.push(["uv0",{size:2,data:f,exclusive:!0}]),z.push(["uv0",k])),i.offset&&(z[0][0]="offset",L[0][0]="offset",z.push(["position",new Uint32Array(k.length)]),L.push(["position",{size:3,data:Float64Array.from(i.offset),exclusive:!0}])),new p.a(L,z)},e.createPolySphereGeometry=function(e,t,n){var i,r,a=e;if(n)i=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]);else{var o=a*(1+Math.sqrt(5))/2;i=[-a,o,0,a,o,0,-a,-o,0,a,-o,0,0,-a,o,0,a,o,0,-a,-o,0,a,-o,o,0,-a,o,0,a,-o,0,-a,-o,0,a],r=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1])}for(var s=0;s<i.length;s+=3)m.scale(i,s,e/m.length(i,s));var c={};function l(t,n){var r;t>n&&(t=(r=[n,t])[0],n=r[1]);var a=t.toString()+"."+n.toString();if(c[a])return c[a];var o=i.length;return i.length+=3,m.add(i,3*t,i,3*n,i,o),m.scale(i,o,e/m.length(i,o)),o/=3,c[a]=o,o}for(var u=0;u<t;u++){for(var h=r.length,d=new Uint32Array(4*h),f=0;f<h;f+=3){var b=r[f],v=r[f+1],g=r[f+2],O=l(b,v),j=l(v,g),y=l(g,b),_=4*f;d[_]=b,d[_+1]=O,d[_+2]=y,d[_+3]=v,d[_+4]=j,d[_+5]=O,d[_+6]=g,d[_+7]=y,d[_+8]=j,d[_+9]=O,d[_+10]=j,d[_+11]=y}r=d,c={}}for(var x=new Float32Array(i),A=0;A<x.length;A+=3)m.normalize(x,A);var P=[["position",r],["normal",r]],E=[["position",{size:3,data:new Float32Array(i),exclusive:!0}],["normal",{size:3,data:x,exclusive:!0}]];return new p.a(E,P)},e.createPointGeometry=function(e,t,n,i,r,a,o){var s=t?[t[0],t[1],t[2]]:[0,0,0],c=e?[e[0],e[1],e[2]]:[0,0,1];a=a||[0,0];var l=n?[255*n[0],255*n[1],255*n[2],n.length>3?255*n[3]:255]:[255,255,255,255],u=null!=i&&2===i.length?i:[1,1],h=[["position",{size:3,data:s,exclusive:!0}],["normal",{size:3,data:c,exclusive:!0}],["uv0",{size:a.length,data:a}],["color",{size:4,data:l,exclusive:!0}],["size",{size:2,data:u}]];if(null!=r){var d=new Float32Array([r[0],r[1],r[2],r[3]]);h.push(["auxpos1",{size:4,data:d}])}if(null!=o){var f=new Float32Array([o[0],o[1],o[2],o[3]]);h.push(["auxpos2",{size:4,data:f}])}return new p.a(h,null,1)},e.updatePointGeometry=function(e,t,n,i,r,a,o,s){if(null!=e){var c=s.getMutableAttribute("normal").data;c[0]=e[0],c[1]=e[1],c[2]=e[2]}if(null!=t){var l=s.getMutableAttribute("position").data;l[0]=t[0],l[1]=t[1],l[2]=t[2]}if(null!=n){var u=s.getMutableAttribute("color").data;u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3]}if(null!=i){var h=s.getMutableAttribute("size").data;h[0]=i[0],h[1]=i[1]}if(null!=r){var d=s.getMutableAttribute("auxpos1").data;d[0]=r[0],d[1]=r[1],d[2]=r[2],d[3]=r[3]}if(null!=a){var f=s.getMutableAttribute("uv0").data;f[0]=a[0],f[1]=a[1]}if(null!=o){var p=s.getMutableAttribute("auxpos2").data;p[0]=o[0],p[1]=o[1],p[2]=o[2],p[3]=o[3]}},e.createPointArrayGeometry=function(e,t){for(var n=new Float32Array(3*e.length),i=new Float32Array(t?3*e.length:3),r=new Uint32Array(e.length),a=new Uint32Array(e.length),o=0;o<e.length;o++)n[3*o]=e[o][0],n[3*o+1]=e[o][1],n[3*o+2]=e[o][2],t&&(i[3*o]=t[o][0],i[3*o+1]=t[o][1],i[3*o+2]=t[o][2]),r[o]=o,a[o]=0;return t||(i[0]=0,i[1]=1,i[2]=0),new p.a([["position",{size:3,data:n,exclusive:!0}],["normal",{size:3,data:i,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",r],["normal",t?r:a],["uv0",a]],1)},e.createTriangleGeometry=function(){var e=new Uint16Array([0,1,2]),t=new Uint16Array([0,0,0]),n=new Uint16Array([0,0,0]);return new p.a([["position",{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],["normal",{size:3,data:[0,1,0],exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",e],["normal",t],["uv0",n]])};var t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function n(e,t,n,i,r){return!(Math.abs(Object(a.e)(t,e))>r)&&(Object(a.d)(n,e,t),Object(a.o)(n,n),Object(a.d)(i,n,e),Object(a.o)(i,i),!0)}function i(e,t,i,r,a,o,s){return n(e,t,a,o,s)||n(e,i,a,o,s)||n(e,r,a,o,s)}e.createSquareGeometry=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=new Array(12),i=0;i<4;i++)for(var r=0;r<3;r++)n[3*i+r]=e[i][r];var a=new Uint32Array([0,1,2,2,3,0]),o=[0,0,1],s=new Uint32Array([0,0,0,0,0,0]);return new p.a([["position",{size:3,data:n,exclusive:!0}],["normal",{size:3,data:o,exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",a],["normal",s],["uv0",a],["color",s]])},e.createConeGeometry=function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=0,c=t,l=e,u=Object(o.c)(0,s,0),h=Object(o.c)(0,s+l,0),d=Object(o.c)(0,-1,0),f=Object(o.c)(0,1,0);i&&(s=l,h=Object(o.c)(0,0,0),u=Object(o.c)(0,s,0),d=Object(o.c)(0,1,0),f=Object(o.c)(0,-1,0));var b=[h,u],v=[d,f],m=n+2,g=Math.sqrt(l*l+c*c);if(i)for(var O=n-1;O>=0;O--){var j=O*(2*Math.PI/n),y=Object(o.c)(Math.cos(j)*c,s,Math.sin(j)*c);b.push(y);var _=Object(o.c)(l*Math.cos(j)/g,-c/g,l*Math.sin(j)/g);v.push(_)}else for(var x=0;x<n;x++){var A=x*(2*Math.PI/n),P=Object(o.c)(Math.cos(A)*c,s,Math.sin(A)*c);b.push(P);var E=Object(o.c)(l*Math.cos(A)/g,c/g,l*Math.sin(A)/g);v.push(E)}var w=new Uint32Array(2*(n+2)*3),k=new Uint32Array(2*(n+2)*3),S=0,M=0;if(r){for(var C=3;C<b.length;C++)w[S++]=1,w[S++]=C-1,w[S++]=C,k[M++]=0,k[M++]=0,k[M++]=0;w[S++]=b.length-1,w[S++]=2,w[S++]=1,k[M++]=0,k[M++]=0,k[M++]=0}if(a){for(var D=3;D<b.length;D++)w[S++]=D,w[S++]=D-1,w[S++]=0,k[M++]=D,k[M++]=D-1,k[M++]=1;w[S++]=0,w[S++]=2,w[S++]=b.length-1,k[M++]=1,k[M++]=2,k[M++]=v.length-1}for(var V=new Float32Array(3*m),R=0;R<m;R++)V[3*R]=b[R][0],V[3*R+1]=b[R][1],V[3*R+2]=b[R][2];for(var z=new Float32Array(3*m),L=0;L<m;L++)z[3*L]=v[L][0],z[3*L+1]=v[L][1],z[3*L+2]=v[L][2];return new p.a([["position",{size:3,data:V,exclusive:!0}],["normal",{size:3,data:z,exclusive:!0}]],[["position",w],["normal",k]])},e.createCylinderGeometry=function(e,t,n,i,r,s){var c=i?Object(o.a)(i):Object(o.c)(1,0,0),l=r?Object(o.a)(r):Object(o.c)(0,0,0);s=null==s||s;var u=Object(o.b)();Object(a.o)(u,c);var h=Object(o.b)();Object(a.b)(h,u,Math.abs(e));var d=Object(o.b)();Object(a.b)(d,h,-.5),Object(a.c)(d,d,l);var f=Object(o.c)(0,1,0);Math.abs(1-Object(a.e)(u,f))<.2&&Object(a.t)(f,0,0,1);var b=Object(o.b)();Object(a.d)(b,u,f),Object(a.o)(b,b),Object(a.d)(f,b,u);var v=2*n+(s?2:0),m=n+(s?2:0),g=new Float32Array(3*v),O=new Float32Array(3*m),j=new Float32Array(2*v),y=new Uint32Array(3*n*(s?4:2)),_=new Uint32Array(3*n*(s?4:2));s&&(g[3*(v-2)+0]=d[0],g[3*(v-2)+1]=d[1],g[3*(v-2)+2]=d[2],j[2*(v-2)]=0,j[2*(v-2)+1]=0,g[3*(v-1)+0]=g[3*(v-2)+0]+h[0],g[3*(v-1)+1]=g[3*(v-2)+1]+h[1],g[3*(v-1)+2]=g[3*(v-2)+2]+h[2],j[2*(v-1)]=1,j[2*(v-1)+1]=1,O[3*(m-2)+0]=-u[0],O[3*(m-2)+1]=-u[1],O[3*(m-2)+2]=-u[2],O[3*(m-1)+0]=u[0],O[3*(m-1)+1]=u[1],O[3*(m-1)+2]=u[2]);for(var x=function(e,t,n){y[e]=t,_[e]=n},A=0,P=Object(o.b)(),E=Object(o.b)(),w=0;w<n;w++){var k=w*(2*Math.PI/n);Object(a.b)(P,f,Math.sin(k)),Object(a.b)(E,b,Math.cos(k)),Object(a.c)(P,P,E),O[3*w+0]=P[0],O[3*w+1]=P[1],O[3*w+2]=P[2],Object(a.b)(P,P,t),Object(a.c)(P,P,d),g[3*w+0]=P[0],g[3*w+1]=P[1],g[3*w+2]=P[2],j[2*w+0]=w/n,j[2*w+1]=0,g[3*(w+n)+0]=g[3*w+0]+h[0],g[3*(w+n)+1]=g[3*w+1]+h[1],g[3*(w+n)+2]=g[3*w+2]+h[2],j[2*(w+n)+0]=w/n,j[2*w+1]=1;var S=(w+1)%n;x(A++,w,w),x(A++,w+n,w),x(A++,S,S),x(A++,S,S),x(A++,w+n,w),x(A++,S+n,S)}if(s){for(var M=0;M<n;M++){var C=(M+1)%n;x(A++,v-2,m-2),x(A++,M,m-2),x(A++,C,m-2)}for(var D=0;D<n;D++){var V=(D+1)%n;x(A++,D+n,m-1),x(A++,v-1,m-1),x(A++,V+n,m-1)}}return new p.a([["position",{size:3,data:g,exclusive:!0}],["normal",{size:3,data:O,exclusive:!0}],["uv0",{size:2,data:j,exclusive:!0}]],[["position",y],["normal",_],["uv0",y]])},e.createTubeGeometry=function(t,n,i,r,a){i=i||10,r=null==r||r,Object(v.a)(t.length>1);for(var o=[],s=[],c=0;c<i;c++){o.push([0,-c-1,-(c+1)%i-1]);var l=c/i*2*Math.PI;s.push([Math.cos(l)*n,Math.sin(l)*n])}return e.createPathExtrusionGeometry(s,t,[[0,0,0]],o,r,a)},e.createPathExtrusionGeometry=function(e,t,n,r,u){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Object(o.c)(0,0,0),d=e.length,f=new Float32Array(t.length*d*3+(6*n.length||0)),b=new Float32Array(t.length*d*3+(n?6:0)),v=(t.length-1)*d*6+3*r.length*2,m=new Uint32Array(v),O=new Uint32Array(v),j=0,y=0,_=0,x=0,A=Object(o.b)(),P=Object(o.b)(),E=Object(o.b)(),w=Object(o.b)(),k=Object(o.b)(),S=Object(o.b)(),M=Object(o.b)(),C=Object(s.e)(),D=Object(o.b)(),V=Object(o.b)(),R=Object(o.b)(),z=Object(o.b)(),L=Object(o.b)(),T=Object(c.d)();Object(a.t)(D,0,1,0),Object(a.g)(P,t[1],t[0]),Object(a.o)(P,P),u?(Object(a.c)(C,t[0],h),Object(a.o)(E,C)):Object(a.t)(E,0,0,1),i(P,E,D,D,k,E,g),Object(a.h)(w,E),Object(a.h)(z,k);for(var U=0;U<n.length;U++)Object(a.b)(S,k,n[U][0]),Object(a.b)(C,E,n[U][2]),Object(a.c)(S,S,C),Object(a.c)(S,S,t[0]),f[j++]=S[0],f[j++]=S[1],f[j++]=S[2];b[y++]=-P[0],b[y++]=-P[1],b[y++]=-P[2];for(var q=0;q<r.length;q++)m[_++]=r[q][0]>0?r[q][0]:-r[q][0]-1+n.length,m[_++]=r[q][1]>0?r[q][1]:-r[q][1]-1+n.length,m[_++]=r[q][2]>0?r[q][2]:-r[q][2]-1+n.length,O[x++]=0,O[x++]=0,O[x++]=0;for(var F=n.length,I=n.length-1,N=0;N<t.length;N++){var G=!1;N>0&&(Object(a.h)(A,P),N<t.length-1?(Object(a.g)(P,t[N+1],t[N]),Object(a.o)(P,P)):G=!0,Object(a.c)(V,A,P),Object(a.o)(V,V),Object(a.c)(R,t[N-1],w),Object(c.f)(t[N],V,T),Object(c.l)(T,Object(l.g)(R,A),C)?(Object(a.g)(C,C,t[N]),Object(a.o)(E,C),Object(a.d)(k,V,E),Object(a.o)(k,k)):i(V,w,z,D,k,E,g),Object(a.h)(w,E),Object(a.h)(z,k)),u&&(Object(a.c)(C,t[N],h),Object(a.o)(L,C));for(var B=0;B<d;B++)if(Object(a.b)(S,k,e[B][0]),Object(a.b)(C,E,e[B][1]),Object(a.c)(S,S,C),Object(a.o)(M,S),b[y++]=M[0],b[y++]=M[1],b[y++]=M[2],Object(a.c)(S,S,t[N]),f[j++]=S[0],f[j++]=S[1],f[j++]=S[2],!G){var W=(B+1)%d;m[_++]=F+B,m[_++]=F+d+B,m[_++]=F+W,m[_++]=F+W,m[_++]=F+d+B,m[_++]=F+d+W;for(var H=0;H<6;H++)O[x++]=m[_-6+H]-I}F+=d}for(var Z=t[t.length-1],X=0;X<n.length;X++)Object(a.b)(S,k,n[X][0]),Object(a.b)(C,E,n[X][1]),Object(a.c)(S,S,C),Object(a.c)(S,S,Z),f[j++]=S[0],f[j++]=S[1],f[j++]=S[2];var J=y/3;b[y++]=P[0],b[y++]=P[1],b[y++]=P[2];for(var Y=F-d,Q=0;Q<r.length;Q++)m[_++]=r[Q][0]>=0?F+r[Q][0]:-r[Q][0]-1+Y,m[_++]=r[Q][2]>=0?F+r[Q][2]:-r[Q][2]-1+Y,m[_++]=r[Q][1]>=0?F+r[Q][1]:-r[Q][1]-1+Y,O[x++]=J,O[x++]=J,O[x++]=J;return new p.a([["position",{size:3,data:f,exclusive:!0}],["normal",{size:3,data:b,exclusive:!0}]],[["position",m],["normal",O]])},e.createPolylineGeometry=function(e,t,n){Object(v.a)(e.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Object(v.a)(3===e[0].length,"createPolylineGeometry(): malformed vertex"),Object(v.a)(null==t||t.length===e.length,"createPolylineGeometry: need same number of points and normals"),Object(v.a)(null==t||3===t[0].length,"createPolylineGeometry(): malformed normal");for(var i=new Float64Array(3*e.length),r=new Uint32Array(2*(e.length-1)),a=0,o=0,s=0;s<e.length;s++){for(var c=0;c<3;c++)i[a++]=e[s][c];s>0&&(r[o++]=s-1,r[o++]=s)}var l=[],u=[];if(l.push(["position",r]),u.push(["position",{size:3,data:i,exclusive:!0}]),t){for(var h=new Float32Array(3*t.length),d=0,f=0;f<e.length;f++)for(var m=0;m<3;m++)h[d++]=t[f][m];l.push(["normal",r]),u.push(["normal",{size:3,data:h,exclusive:!0}])}return n&&(u.push(["color",{size:4,data:n}]),l.push(["color",Object(b.d)(n.length/4)])),new p.a(u,l,2)},e.createExtrudedTriangle=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=new Array(18),o=[[-t,r,i/2],[n,r,i/2],[0,e+r,i/2],[-t,r,-i/2],[n,r,-i/2],[0,e+r,-i/2]],s=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]),c=0;c<6;c++)a[3*c]=o[c][0],a[3*c+1]=o[c][1],a[3*c+2]=o[c][2];return new p.a([["position",{size:3,data:a,exclusive:!0}]],[["position",s]])},e.transformInPlace=function(e,t){for(var n=e.getMutableAttribute("position").data,i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],s=n[i+2];Object(a.t)(O,r,o,s),Object(a.n)(O,O,t),n[i]=O[0],n[i+1]=O[1],n[i+2]=O[2]}},e.cgToGIS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=e.vertexAttributes,i=n.get("position").data,r=n.get("normal").data;if(r)for(var a=t.getMutableAttribute("normal").data,o=0;o<r.length;o+=3){var s=r[o+1];a[o+1]=-r[o+2],a[o+2]=s}if(i)for(var c=t.getMutableAttribute("position").data,l=0;l<i.length;l+=3){var u=i[l+1];c[l+1]=-i[l+2],c[l+2]=u}return t},e.makeOrthoBasisDirUp=n,e.makeOrthoBasisDirUpFallback=i}(f||(f={}));var g=.99619469809,O=Object(o.b)(),j=f;t.a=j},704:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return j})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return A})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return _})),n.d(t,"p",(function(){return M})),n.d(t,"q",(function(){return w})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return k})),n.d(t,"t",(function(){return u}));var i=n(66),r=n(10),a=n(54),o=n(85),s=n(764),c=n(618);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return[e[0],e[1],e[2],e[3]]}function u(e,t,n,i){return d(e,t,n,i,c.d.get())}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return d(e[0],e[1],e[2],e[3],t)}function d(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l();return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function f(e,t,n){Object(a.h)(n,t);var i=Object(a.e)(t,t);return Math.abs(i-1)>1e-5&&i>1e-12&&Object(a.b)(n,n,1/Math.sqrt(i)),v(n,e,n)}function p(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();return m(Object(a.g)(c.c.get(),e,t),Object(a.g)(c.c.get(),n,t),e,i)}Object(o.e)(),Object(o.e)();var b=Object(o.e)();Object(o.e)(),Object(o.e)();function v(e,t,n){return e!==n&&h(e,n),n[3]=-Object(a.e)(n,t),n}function m(e,t,n,i){return f(n,Object(a.d)(b,t,e),i)}function g(e,t,n,i){return S(e,t,Object(a.g)(c.c.get(),n,t),D,i)}function O(e,t,n){return!!Object(r.k)(t)&&S(e,t.origin,t.direction,V,n)}function j(e,t,n){return S(e,t.origin,t.vector,0,n)}function y(e,t,n){return S(e,t.origin,t.vector,1,n)}function _(e,t){return k(e,Object(s.c)(t))-t[3]>=0}function x(e,t){return k(e,t)>=0}function A(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5];return e[0]*(e[0]>0?n:a)+e[1]*(e[1]>0?i:o)+e[2]*(e[2]>0?r:s)+e[3]>=0}function P(e,t){var n=Object(a.e)(e,t.ray.direction),i=-k(e,t.ray.origin);if(i<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return i>0;if((i<0||n<0)&&!(i<0&&n<0))return!0;var r=i/n;return n>0?r<t.c1&&(t.c1=r):r>t.c0&&(t.c0=r),t.c0<=t.c1}function E(e,t){var n=Object(a.e)(e,t.ray.direction),i=-k(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return i>0;var r=i/n;return n>0?r<t.c1&&(t.c1=r):r>t.c0&&(t.c0=r),t.c0<=t.c1}function w(e,t,n){var i=Object(a.b)(c.c.get(),e,-e[3]),r=function(e,t,n){var i=Object(a.b)(c.c.get(),e,Object(a.e)(e,t));return Object(a.g)(n,t,i),n}(e,Object(a.g)(c.c.get(),t,i),c.c.get());return Object(a.c)(n,r,i),n}function k(e,t){return Object(a.e)(e,t)+e[3]}function S(e,t,n,r,o){var s=Object(a.e)(e,n);if(0===s)return!1;var c=-(Object(a.e)(e,t)+e[3])/s;return 1&r&&(c=Object(i.e)(c,0,1)),!(!(4&r)&&c<0||!(8&r)&&c>1)&&(Object(a.c)(o,t,Object(a.b)(o,n,c)),!0)}function M(e){return e}var C=[0,0,1,0],D=12,V=8},714:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(4),r=n(5),a=n(6),o=n(7),s=n(10),c=n(236),l=n(603),u=n(852),h=n(743),d=n(768),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e.view))._resources=null,r._transform=Object(l.d)(),r}return Object(r.a)(n,[{key:"object",get:function(){return Object(s.k)(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(e){Object(c.d)(this._transform,e),Object(s.k)(this._resources)&&(this._resources.object.transformation=this._transform)}},{key:"recreate",value:function(){this.attached&&this.createResources()}},{key:"recreateGeometry",value:function(){if(!Object(s.j)(this._resources)){var e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries)}}},{key:"createResources",value:function(){this.destroyResources();var e=this.view._stage;if(e){var t=new d.a({isPickable:!1,updatePolicy:1});e.add(t);var n=new h.a({castShadow:!1});n.transformation=this._transform,this.createExternalResources(),this.createGeometries(n),e.addMany(n.geometries),this.forEachExternalMaterial((function(t){return e.add(t)})),e.add(n),t.add(n),this.visible||n.setVisible(!1),this._resources={layer:t,object:n}}}},{key:"destroyResources",value:function(){var e=this.view._stage;!Object(s.j)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((function(t){e.remove(t),t.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}},{key:"updateVisibility",value:function(e){Object(s.j)(this._resources)||this._resources.object.setVisible(e)}}]),n}(u.a)},719:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var i,r=n(11),a=n(4),o=n(5),s=n(6),c=n(7),l=n(12),u=n(66),h=n(10),d=n(38),f=n(50),p=n(54),b=n(85),v=n(693),m=n(704),g=n(700),O=n(759),j=n(715),y=n(716),_=n(365),x=n(616),A=n(752);(i||(i={})).Default={vvSizeEnabled:!1,vvSizeMinSize:Object(A.c)(1,1,1),vvSizeMaxSize:Object(A.c)(100,100,100),vvSizeOffset:Object(A.c)(0,0,0),vvSizeFactor:Object(A.c)(1,1,1),vvSizeValue:Object(A.c)(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:Object(x.b)()};var P=i,E=n(737),w=n(47),k=n(46),S=n(0),M=n(626),C=n(674),D=n(636),V=n(705),R=n(717),z=n(672),L=n(680),T=n(681),U=n(706),q=n(673),F=n(917),I=n(918),N=n(467),G=new Map([["position",0],["subdivisionFactor",1],["uv0",2],["auxpos1",3],["auxpos2",4],["size",6],["sizeFeatureAttribute",6],["color",5],["colorFeatureAttribute",5],["opacityFeatureAttribute",7]]),B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,i,r){var o;return Object(a.a)(this,n),(o=t.call(this,e,i,r)).stippleTextureRepository=e.stippleTextureRepository,o}return Object(o.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:i.stippleEnabled,stippleOffColorEnabled:i.stippleOffColorEnabled,stippleUVMaxEnabled:i.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:i.stippleIntegerRepeatsEnabled,roundCaps:i.roundCaps,roundJoins:i.roundJoins,vvColor:i.vvColor,vvSize:i.vvSize,vvInstancingEnabled:!0,vvOpacity:i.vvOpacity,falloffEnabled:i.falloffEnabled,innerColorEnabled:i.innerColorEnabled,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new q.a(e.rctx,r,G)}},{key:"dispose",value:function(){Object(w.a)(Object(k.a)(n.prototype),"dispose",this).call(this),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}},{key:"bindPass",value:function(e,t){if(Object(R.b)(this.program,t.camera.projectionMatrix),4===this.configuration.output&&Object(C.b)(this.program,t),t.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",t.inverseViewport),Object(D.a)(this.program,t)),this.program.setUniform1f("intrinsicWidth",e.width),this.program.setUniform4fv("intrinsicColor",e.color),this.program.setUniform1f("miterLimit","miter"!==e.join?0:e.miterLimit),this.program.setUniform2fv("cameraNearFar",t.camera.nearFar),this.program.setUniform1f("pixelRatio",t.camera.pixelRatio),this.program.setUniform2f("screenSize",t.camera.fullViewport[2],t.camera.fullViewport[3]),Object(V.d)(this.program,e),this.stipplePattern!==e.stipplePattern){var n=e.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,n),this.stipplePattern=n}if(this.configuration.stippleEnabled){var i=Object(h.k)(this.stippleTextureBind)?this.stippleTextureBind(this.program)*t.camera.pixelRatio:1;if(this.program.setUniform1f("stipplePatternPixelSizeInv",1/i),this.configuration.stippleOffColorEnabled){var r=Object(h.r)(e.stippleOffColor);this.program.setUniform4f("stippleOffColor",r[0],r[1],r[2],r.length>3?r[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",e.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",Object(h.s)(e.innerColor,e.color)),this.program.setUniform1f("innerWidth",e.innerWidth*t.camera.pixelRatio))}},{key:"bindDraw",value:function(e){Object(R.c)(this.program,e),Object(M.c)(this.program,this.configuration,e),this.program.rebindTextures()}},{key:"setPipelineState",value:function(e,t){var n=this.configuration,i=3===e,r=2===e;return Object(N.e)({blending:0===n.output||7===n.output?i?U.f:Object(U.a)(e):null,depthTest:{func:Object(U.b)(e)},depthWrite:i?!n.transparent&&n.writeDepth&&N.d:Object(U.c)(e),colorWrite:N.c,stencilWrite:n.sceneHasOcludees?F.h:null,stencilTest:n.sceneHasOcludees?t?F.d:F.c:null,polygonOffset:i||r?n.polygonOffset&&W:U.d})}},{key:"initializePipeline",value:function(){var e=this.configuration,t=e.polygonOffset&&W;return e.occluder&&(this._occluderPipelineTransparent=Object(N.e)({blending:U.f,polygonOffset:t,depthTest:F.a,depthWrite:null,colorWrite:N.c,stencilWrite:null,stencilTest:F.f}),this._occluderPipelineOpaque=Object(N.e)({blending:U.f,polygonOffset:t,depthTest:F.a,depthWrite:null,colorWrite:N.c,stencilWrite:F.g,stencilTest:F.e}),this._occluderPipelineMaskWrite=Object(N.e)({blending:null,polygonOffset:t,depthTest:F.b,depthWrite:null,colorWrite:null,stencilWrite:F.h,stencilTest:F.d})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"primitiveType",get:function(){return 5}},{key:"getPipelineState",value:function(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}]),n}(L.a);B.shader=new z.a(I.a,(function(){return n.e(196).then(n.bind(null,1174))}));var W={factor:0,units:-4},H=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).output=0,e.occluder=!1,e.slicePlaneEnabled=!1,e.transparent=!1,e.polygonOffset=!1,e.writeDepth=!1,e.stippleEnabled=!1,e.stippleOffColorEnabled=!1,e.stippleIntegerRepeatsEnabled=!1,e.roundCaps=!1,e.roundJoins=!1,e.vvSize=!1,e.vvColor=!1,e.vvOpacity=!1,e.falloffEnabled=!1,e.innerColorEnabled=!1,e.sceneHasOcludees=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!1,e}return n}(T.a);Object(S.a)([Object(T.b)({count:8})],H.prototype,"output",void 0),Object(S.a)([Object(T.b)()],H.prototype,"occluder",void 0),Object(S.a)([Object(T.b)()],H.prototype,"slicePlaneEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"transparent",void 0),Object(S.a)([Object(T.b)()],H.prototype,"polygonOffset",void 0),Object(S.a)([Object(T.b)()],H.prototype,"writeDepth",void 0),Object(S.a)([Object(T.b)()],H.prototype,"stippleEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"stippleOffColorEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"stippleIntegerRepeatsEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"roundCaps",void 0),Object(S.a)([Object(T.b)()],H.prototype,"roundJoins",void 0),Object(S.a)([Object(T.b)()],H.prototype,"vvSize",void 0),Object(S.a)([Object(T.b)()],H.prototype,"vvColor",void 0),Object(S.a)([Object(T.b)()],H.prototype,"vvOpacity",void 0),Object(S.a)([Object(T.b)()],H.prototype,"falloffEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"innerColorEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"sceneHasOcludees",void 0),Object(S.a)([Object(T.b)({count:4})],H.prototype,"transparencyPassType",void 0),Object(S.a)([Object(T.b)()],H.prototype,"multipassTerrainEnabled",void 0),Object(S.a)([Object(T.b)()],H.prototype,"cullAboveGround",void 0);var Z=l.a.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial"),X=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e,Y))._vertexAttributeLocations=G,i.techniqueConfig=new H,i.layout=i.createLayout(),i}return Object(o.a)(n,[{key:"isClosed",value:function(e,t){return ee(this.params,e,t)}},{key:"dispose",value:function(){}},{key:"getPassParameters",value:function(){return this.params}},{key:"getTechniqueConfig",value:function(e,t){this.techniqueConfig.output=e;var n=Object(h.k)(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=n,this.techniqueConfig.stippleIntegerRepeatsEnabled=n&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=n&&Object(h.k)(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins="round"===this.params.join,this.techniqueConfig.roundCaps="round"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&Object(h.k)(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,n,i,r,a,o,s,c){c?this.intersectDrapedLineGeometry(e,i,a,o):this.intersectLineGeometry(e,t,n,i,this.params.width,o)}},{key:"intersectDrapedLineGeometry",value:function(e,t,n,i){if(t.options.selectionMode){var r=e.vertexAttributes.get("position").data,a=e.vertexAttributes.get("size"),o=this.params.width;if(this.params.vvSizeEnabled){var s=e.vertexAttributes.get("sizeFeatureAttribute").data[0];o*=Object(u.e)(this.params.vvSizeOffset[0]+s*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(o*=a.data[0]);for(var c=n[0],l=n[1],h=(o/2+4)*e.screenToWorldRatio,d=Number.MAX_VALUE,f=0;f<r.length-5;f+=3){var p=r[f],b=r[f+1],v=c-p,m=l-b,g=r[f+3]-p,O=r[f+4]-b,j=Object(u.e)((g*v+O*m)/(g*g+O*O),0,1),y=g*j-v,_=O*j-m,x=y*y+_*_;x<d&&(d=x)}d<h*h&&i()}}},{key:"intersectLineGeometry",value:function(e,t,n,i,r,a){if(i.options.selectionMode&&!Object(E.d)(t))if(Object(_.g)(n)){var o=e.vertexAttributes,s=o.get("position").data,c=r;if(this.params.vvSizeEnabled){var l=o.get("sizeFeatureAttribute").data[0];c*=Object(u.e)(this.params.vvSizeOffset[0]+l*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else o.has("size")&&(c*=o.get("size").data[0]);var h=i.camera,d=se;Object(f.c)(d,i.point);var b=c*h.pixelRatio/2+4*h.pixelRatio;Object(p.t)(me[0],d[0]-b,d[1]+b,0),Object(p.t)(me[1],d[0]+b,d[1]+b,0),Object(p.t)(me[2],d[0]+b,d[1]-b,0),Object(p.t)(me[3],d[0]-b,d[1]-b,0);for(var g=0;g<4;g++)if(!h.unprojectFromRenderScreen(me[g],ge[g]))return;Object(m.e)(h.eye,ge[0],ge[1],Oe),Object(m.e)(h.eye,ge[1],ge[2],je),Object(m.e)(h.eye,ge[2],ge[3],ye),Object(m.e)(h.eye,ge[3],ge[0],_e);for(var O=Number.MAX_VALUE,j=$(this.params,o,e.indices)?s.length-2:s.length-5,y=0;y<j;y+=3){ie[0]=s[y]+n[12],ie[1]=s[y+1]+n[13],ie[2]=s[y+2]+n[14];var x=(y+3)%s.length;if(re[0]=s[x]+n[12],re[1]=s[x+1]+n[13],re[2]=s[x+2]+n[14],!(Object(m.s)(Oe,ie)<0&&Object(m.s)(Oe,re)<0||Object(m.s)(je,ie)<0&&Object(m.s)(je,re)<0||Object(m.s)(ye,ie)<0&&Object(m.s)(ye,re)<0||Object(m.s)(_e,ie)<0&&Object(m.s)(_e,re)<0)){if(h.projectToRenderScreen(ie,ce),h.projectToRenderScreen(re,le),ce[2]<0&&le[2]>0){Object(p.g)(ae,ie,re);var A=h.frustum,P=-Object(m.s)(A[4],ie)/Object(p.e)(ae,Object(m.p)(A[4]));Object(p.b)(ae,ae,P),Object(p.c)(ie,ie,ae),h.projectToRenderScreen(ie,ce)}else if(ce[2]>0&&le[2]<0){Object(p.g)(ae,re,ie);var w=h.frustum,k=-Object(m.s)(w[4],re)/Object(p.e)(ae,Object(m.p)(w[4]));Object(p.b)(ae,ae,k),Object(p.c)(re,re,ae),h.projectToRenderScreen(re,le)}else if(ce[2]<0&&le[2]<0)continue;ce[2]=0,le[2]=0;var S=Object(v.e)(Object(v.f)(ce,le,de),d);S<O&&(O=S,Object(p.h)(ue,ie),Object(p.h)(he,re))}}var M=i.rayBeginPoint,C=i.rayEndPoint;if(O<b*b){var D=Number.MAX_VALUE;if(Object(v.a)(Object(v.f)(ue,he,de),Object(v.f)(M,C,fe),oe)){Object(p.g)(oe,oe,M);var V=Object(p.m)(oe);Object(p.b)(oe,oe,1/V),D=V/Object(p.j)(M,C)}a(D,oe)}}else Z.error("intersection assumes a translation-only matrix")}},{key:"computeAttachmentOrigin",value:function(e,t){var n=e.vertexAttributes;if(!n)return null;var i=e.indices,r=n.get("position");return Object(O.a)(r,i?i.get("position"):null,i&&$(this.params,n,i),t)}},{key:"createLayout",value:function(){var e=Object(g.a)().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");return this.params.vvSizeEnabled?e.f32("sizeFeatureAttribute"):e.f32("size"),this.params.vvColorEnabled?e.f32("colorFeatureAttribute"):e.vec4f("color"),this.params.vvOpacityEnabled&&e.f32("opacityFeatureAttribute"),e}},{key:"createBufferWriter",value:function(){return new Q(this.layout,this.params)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new J(e):void 0}},{key:"validateParameterValues",value:function(e){"miter"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}},{key:"requiresTransparent",value:function(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}},{key:"colorRequiresTransparent",value:function(e){return Object(h.k)(e)&&e[3]<1&&e[3]>0}}]),n}(y.a),J=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).updateParameters(),i}return Object(o.a)(n,[{key:"updateParameters",value:function(e){this._technique=this._techniqueRep.releaseAndAcquire(B,this._material.getTechniqueConfig(this._output,e),this._technique)}},{key:"beginSlot",value:function(e){return this._technique.configuration.occluder?3===e||10===e||11===e:0===this._output||7===this._output?(this.targetSlot=this._technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:e.hasOccludees})}},{key:"ensureParameters",value:function(e){0!==this._output&&7!==this._output||this._updateOccludeeState(e),this.updateParameters(e)}},{key:"bind",value:function(e){this._technique.bindPass(this._material.getPassParameters(),e)}},{key:"getPipelineState",value:function(e,t){return this._technique.getPipelineState(e,t)}}]),n}(j.a),Y=Object(r.a)(Object(r.a)({width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1},y.b),P.Default),Q=function(){function e(t,n){switch(Object(a.a)(this,e),this.params=n,this.numJoinSubdivisions=0,this.vertexBufferLayout=t,this.params.join){case"miter":case"bevel":this.numJoinSubdivisions=n.stipplePattern?1:0;break;case"round":this.numJoinSubdivisions=ne}}return Object(o.a)(e,[{key:"isClosed",value:function(e){return $(this.params,e.vertexAttributes,e.indices)}},{key:"numCapSubdivisions",value:function(e){if(this.isClosed(e))return 0;switch(this.params.cap){case"butt":return 0;case"square":return 1;case"round":return te}}},{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){var t=2*this.numCapSubdivisions(e)+2,n=e.indices.get("position").length/2+1,i=this.isClosed(e),r=i?2:2*t,a=i?0:1,o=i?n:n-1;if(e.vertexAttributes.has("subdivisions"))for(var s=e.vertexAttributes.get("subdivisions").data,c=a;c<o;++c)r+=4+2*s[c];else r+=(o-a)*(2*this.numJoinSubdivisions+4);return r+=2}},{key:"write",value:function(e,t,n,i){var r=this,a=pe,o=be,s=ve,c=t.vertexAttributes.get("position").data,l=t.indices&&t.indices.get("position"),u=this.numCapSubdivisions(t);l&&l.length!==2*(c.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");var h=null;t.vertexAttributes.has("subdivisions")&&(h=t.vertexAttributes.get("subdivisions").data);var d=1,f=0;this.params.vvSizeEnabled?f=t.vertexAttributes.get("sizeFeatureAttribute").data[0]:t.vertexAttributes.has("size")&&(d=t.vertexAttributes.get("size").data[0]);var b=[1,1,1,1],v=0;this.params.vvColorEnabled?v=t.vertexAttributes.get("colorFeatureAttribute").data[0]:t.vertexAttributes.has("color")&&(b=t.vertexAttributes.get("color").data);var m=0;this.params.vvOpacityEnabled&&(m=t.vertexAttributes.get("opacityFeatureAttribute").data[0]);var g=c.length/3,O=e.transformation,j=new Float32Array(n.buffer),y=this.vertexBufferLayout.stride/4,_=i*y,x=_,A=function(e,t,n,i,a,o,s){if(j[_++]=t[0],j[_++]=t[1],j[_++]=t[2],j[_++]=i,j[_++]=a,j[_++]=o,j[_++]=e[0],j[_++]=e[1],j[_++]=e[2],j[_++]=n[0],j[_++]=n[1],j[_++]=n[2],r.params.vvSizeEnabled?j[_++]=f:j[_++]=d,r.params.vvColorEnabled)j[_++]=v;else{var c=Math.min(4*s,b.length-4);j[_++]=b[c+0],j[_++]=b[c+1],j[_++]=b[c+2],j[_++]=b[c+3]}r.params.vvOpacityEnabled&&(j[_++]=m)};_+=y,Object(p.t)(o,c[0],c[1],c[2]),O&&Object(p.n)(o,o,O);var P=this.isClosed(t);if(P){var E=c.length-3;Object(p.t)(a,c[E],c[E+1],c[E+2]),O&&Object(p.n)(a,a,O)}else{Object(p.h)(a,o),Object(p.t)(s,c[3],c[4],c[5]),O&&Object(p.n)(s,s,O);for(var w=0;w<u;++w){var k=1-w/u;A(a,o,s,k,1,-4,0),A(a,o,s,k,1,4,0)}A(a,o,s,0,0,-4,0),A(a,o,s,0,0,4,0),Object(p.h)(a,o),Object(p.h)(o,s)}for(var S=P?g:g-1,M=P?0:1;M<S;M++){var C=(M+1)%g*3;Object(p.t)(s,c[C+0],c[C+1],c[C+2]),O&&Object(p.n)(s,s,O),A(a,o,s,0,1,-1,M),A(a,o,s,0,1,1,M);for(var D=h?h[M]:this.numJoinSubdivisions,V=0;V<D;++V){var R=(V+1)/(D+1);A(a,o,s,R,1,-2,M),A(a,o,s,R,1,2,M)}A(a,o,s,1,0,-2,M),A(a,o,s,1,0,2,M),Object(p.h)(a,o),Object(p.h)(o,s)}if(P)_=K(j,x+y,j,_,2*y);else{A(a,o,s,0,1,-5,S),A(a,o,s,0,1,5,S);for(var z=0;z<u;++z){var L=(z+1)/u;A(a,o,s,L,1,-5,S),A(a,o,s,L,1,5,S)}}K(j,x+y,j,x,y),_=K(j,_-y,j,_,y)}}]),e}();function K(e,t,n,i,r){for(var a=0;a<r;a++)n[i++]=e[t++];return i}function $(e,t,n){return ee(e,t.get("position").data,n?n.get("position"):null)}function ee(e,t,n){return!!e.isClosed&&(n?n.length>2:t.length>6)}var te=3,ne=1,ie=Object(b.e)(),re=Object(b.e)(),ae=Object(b.e)(),oe=Object(b.e)(),se=Object(b.e)(),ce=Object(d.e)(),le=Object(d.e)(),ue=Object(b.e)(),he=Object(b.e)(),de=Object(v.d)(),fe=Object(v.d)(),pe=Object(b.e)(),be=Object(b.e)(),ve=Object(b.e)(),me=[Object(d.e)(),Object(d.e)(),Object(d.e)(),Object(d.e)()],ge=[Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)()],Oe=Object(m.d)(),je=Object(m.d)(),ye=Object(m.d)(),_e=Object(m.d)()},732:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return g}));var i=n(4),r=n(5),a=n(11),o=n(15),s=(n(241),n(23)),c=(n(66),n(10)),l=(n(38),n(85)),u=n(267),h=(n(27),n(142),n(368),n(269));function d(e,t,n,i){if(null==i||e.hasZ||(i=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=i&&(e.z+=i),e;if("multipoint"===e.type){for(var r=e.points,a=0;a<r.length;a++)r[a]=f(r[a],t,n,i);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=i&&(e.zmin+=i,e.zmax+=i),e;for(var o=Object(h.b)(e),s="polyline"===e.type?e.paths:e.rings,c=0;c<o.length;c++)for(var l=o[c],u=0;u<l.length;u++)l[u]=f(l[u],t,n,i);return"paths"in e?e.paths=s:e.rings=s,e}function f(e,t,n,i){return p(e,e[0]+t,e[1]+n,null!=e[2]&&null!=i?e[2]+i:void 0)}function p(e,t,n,i){var r=[t,n];return e.length>2&&r.push(null!=i?i:e[2]),e.length>3&&r.push(e[3]),r}function b(e,t){return e.events.on("drag",function(e,t){var n=null,i=null;return function(r){if("cancel"!==r.action){var a={action:r.action,screenStart:r.start,screenEnd:r.screenPoint};"start"===r.action&&Object(c.j)(n)&&(n=new j,i=new j,t(e,n,i,r.pointerType,a)),Object(c.k)(n)&&n.execute(a),"end"===r.action&&Object(c.k)(n)&&(n=null,i=null)}else Object(c.k)(i)&&(i.execute({action:"cancel"}),n=null,i=null)}}(e,t))}function v(e,t){var n=null;return function(i){if("start"===i.action&&(n=function(e,t,n){var i=e.geometry;if(Object(c.j)(i))return null;if("mesh"===i.type)return function(e,t,n,i){if(Object(c.k)(t.transform))return function(e,t,n,i){var r=m(n.getOriginPoint(t.spatialReference),i),a=t.spatialReference;return Object(c.j)(r)?null:{move:function(t,i,o){var s=d(r.clone(),t,i,o);if(s.spatialReference.equals(a))n.origin=Object(l.g)(s.x,s.y,s.z);else{var h=Object(u.j)(s,a);Object(c.k)(h)&&(n.origin=Object(l.g)(h.x,h.y,h.z))}e.notifyGeometryChanged()}}}(e,t,t.transform,n);if(!t.spatialReference.equals(n))return null;var r=0,a=0,o=0;return{move:function(n,s,c){var l=n-r,u=s-a,h=c-o;if(l||u||h){var d=t.origin.clone().offset(l,u,h);t.centerAt(d,{geographic:1===i}),e.notifyGeometryChanged(),r=n,a=s,o=c}}}}(e,i,t,n);var r=m(i,t),a=i.spatialReference;return Object(c.j)(r)?null:{move:function(t,n,i){var o=d(r.clone(),t,n,i);o.spatialReference.equals(a)?e.geometry=o:e.geometry=Object(u.j)(o,a)}}}(e,i.mapStart.spatialReference,t)),Object(c.j)(n))return null;var r=i.mapEnd.x-i.mapStart.x,o=i.mapEnd.y-i.mapStart.y,s=i.mapEnd.z-i.mapStart.z;return n.move(r,o,s),Object(a.a)(Object(a.a)({},i),{},{translationX:r,translationY:o,translationZ:s})}}function m(e,t){return Object(c.j)(e)?null:e.spatialReference.equals(t)?e.clone():Object(u.j)(e,t)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=null,r=Object(c.k)(t)&&!e.spatialReference.equals(t)?function(e){return Object(c.k)(e)?Object(u.j)(e,t):e}:function(e){return e},o=Object(a.a)({exclude:[]},n);return function(t){if("start"===t.action&&(i=r(e.toMap(t.screenStart,o))),Object(c.j)(i))return null;var n=r(e.toMap(t.screenEnd,o));return Object(c.k)(n)?Object(a.a)(Object(a.a)({},t),{},{mapStart:i,mapEnd:n}):null}}function O(e,t){var n,i=new Map,r=Object(o.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.set(a,Object(s.a)(e[a]))}}catch(c){r.e(c)}finally{r.f()}return function(t){return i.forEach((function(t,n){e[n]=t})),t}}var j=function(){function e(){Object(i.a)(this,e),this.execute=function(){}}return Object(r.a)(e,[{key:"next",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return Object(c.k)(t)&&(this.execute=function(e){var i=t(e);Object(c.k)(i)&&n.execute(i)}),n}}]),e}()},735:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(13),n(10);function i(e,t){return!!r(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function r(e,t){return e===t||e&&t&&e.equals(t)}},738:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c}));var i=n(15),r=(n(114),n(13),n(23),n(10)),a=n(137),o=n(82),s=n(751);function c(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function u(e){return Object(r.j)(e)?null:c(e)?e:Object(o.a)(function(e){var t=e.spatialReference.toJSON();switch(e.type){case"point":return{x:e.x,y:e.y,z:e.z,m:e.m,spatialReference:t};case"polygon":var n=e.rings,i=e.hasZ,r=e.hasM;return{rings:h(n),hasZ:i,hasM:r,spatialReference:t};case"polyline":var a=e.paths,o=e.hasZ,s=e.hasM;return{paths:h(a),hasZ:o,hasM:s,spatialReference:t};case"extent":return{xmin:e.xmin,xmax:e.xmax,ymin:e.ymin,ymax:e.ymax,zmin:e.zmin,zmax:e.zmax,mmin:e.mmin,mmax:e.mmax,hasZ:e.hasZ,hasM:e.hasM,spatialReference:t};case"multipoint":var c=e.points,l=e.hasZ,u=e.hasM;return{points:f(c)?d(c):c,hasZ:l,hasM:u,spatialReference:t};default:return}}(e))}function h(e){return function(e){var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(0!==r.length)return f(r)}}catch(a){n.e(a)}finally{n.f()}return!1}(e)?e.map((function(e){return d(e)})):e}function d(e){return e.map((function(e){return Object(a.n)(e)}))}function f(e){return e.length&&(Object(a.d)(e[0])||Object(a.e)(e[0]))}function p(e,t){if(!e)return null;var n;if(l(e)){if(null==t)return e.clone();if(l(t))return t.copy(e)}return null!=t?((n=t).x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=null,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=null,n.hasM=!1)):(n=Object(s.c)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}},743:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n(15),r=n(4),a=n(5),o=n(6),s=n(7),c=n(10),l=n(236),u=n(603),h=n(54),d=n(85),f=n(764),p=n(477),b=n(765),v=n(157),m=n(444),g=function(){function e(){Object(r.a)(this,e),this._disposed=!1}return Object(a.a)(e,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}},{key:"acquire",value:function(e,t,n,i,r,a){this.id=Object(m.a)(),this.geometry=e,this.material=t,this.transformation=n,this.instanceParameters=i,this.origin=r,this._shaderTransformation=a,this._disposed=!1}},{key:"release",value:function(){this._disposed=!1}},{key:"dispose",value:function(){this._disposed=!0}},{key:"getStaticTransformation",value:function(){return this.transformation}},{key:"getShaderTransformation",value:function(){return Object(c.k)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}},{key:"computeAttachmentOrigin",value:function(e){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,e):this.geometry.computeAttachmentOrigin(e))&&(Object(h.n)(e,e,this.getStaticTransformation()),!0)}}]),e}();g.pool=new v.a(g);var O=function e(t){Object(r.a)(this,e),this.channel=t,this.id=Object(m.a)()},j=n(365),y=n(737),_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,n),(e=t.call(this)).type=1,e._geometryRecords=new Array,e._geometries=new Array,e._objectTransformation=Object(u.d)(),e._bvObjectSpace=new A,e._bvWorldSpace=new A,e._bvDirty=!0,e._hasVolatileTransformation=!1,e._visible=!0,e.castShadow=null==i.castShadow||i.castShadow,e.metadata=i.metadata,e.metadata&&e.metadata.isElevationSource&&(e.metadata.lastValidElevationBB=new x),e.transformation=Object(u.d)();var a=i.geometries,o=i.materials,s=i.transformations,c=i.origins;if(Array.isArray(a)){Object(j.a)(o.length===a.length,"Object3D: materials don't match geometries"),Object(j.a)(s.length===a.length,"Object3D: transformations don't match geometries"),e._geometryRecords.length=a.length,e._geometries.length=a.length;for(var l=0;l<a.length;l++)e._geometries[l]=a[l],e._geometryRecords[l]=g.pool.acquire(a[l],o[l],Object(u.c)(s[l]),{highlights:null,occludees:null,visible:!0},c&&c[l])}return e}return Object(a.a)(n,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"transformation",get:function(){return this._objectTransformation},set:function(e){Object(l.d)(this._objectTransformation,e),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}},{key:"dispose",value:function(){this._geometryRecords.length=0,this._geometries.length=0}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(e){Object(j.a)(null==this._parentLayer||null==e,"Object3D can only be added to a single Layer"),this._parentLayer=e}},{key:"getNumGeometryRecords",value:function(){return this._geometryRecords.length}},{key:"getGeometryRecord",value:function(e){return Object(j.a)(e>=0&&e<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[e]}},{key:"addGeometry",value:function(e,t,n,i,r,a){n=n||u.a,this._geometries.push(e);var o=g.pool.acquire(e,t,n,i||{highlights:null,occludees:null,visible:!0},r,a);return this._geometryRecords.push(o),this._hasVolatileTransformation=this._hasVolatileTransformation||Object(c.k)(o.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:o}),this._invalidateBoundingVolume(),o}},{key:"removeGeometry",value:function(e){var t=this._geometryRecords.splice(e,1)[0];return this._hasVolatileTransformation=Object(c.k)(t.shaderTransformation)?this._geometryRecords.some((function(e){return Object(c.k)(e.shaderTransformation)})):this._hasVolatileTransformation,t.dispose(),this._geometries.splice(e,1),this._emit("objectGeometryRemoved",{object:this,record:t}),this._invalidateBoundingVolume(),t}},{key:"removeAllGeometries",value:function(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}},{key:"geometryVertexAttrsUpdated",value:function(e){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[e]}),this._invalidateBoundingVolume()}},{key:"isVisible",get:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e;var t,n=Object(i.a)(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){t.value.instanceParameters.visible=this._visible}}catch(r){n.e(r)}finally{n.f()}this._emit("visibilityChanged",this)}},{key:"maskOccludee",value:function(){var e,t=new O(1),n=Object(i.a)(this._geometryRecords);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.instanceParameters.occludees=Object(y.b)(r.instanceParameters.occludees,t)}}catch(a){n.e(a)}finally{n.f()}return this._emit("occlusionChanged",this),t}},{key:"removeOcclude",value:function(e){var t,n=Object(i.a)(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.instanceParameters.occludees=Object(y.f)(r.instanceParameters.occludees,e)}}catch(a){n.e(a)}finally{n.f()}this._emit("occlusionChanged",this)}},{key:"highlight",value:function(){var e,t=new O(0),n=Object(i.a)(this._geometryRecords);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.instanceParameters.highlights=Object(y.b)(r.instanceParameters.highlights,t)}}catch(a){n.e(a)}finally{n.f()}return this._emit("highlightChanged",this),t}},{key:"removeHighlight",value:function(e){var t,n=Object(i.a)(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.instanceParameters.highlights=Object(y.f)(r.instanceParameters.highlights,e)}}catch(a){n.e(a)}finally{n.f()}this._emit("highlightChanged",this)}},{key:"getCombinedStaticTransformation",value:function(e,t){return Object(l.m)(Object(c.s)(t,Object(u.d)()),this.transformation,e.getStaticTransformation())}},{key:"getCombinedShaderTransformation",value:function(e,t){return t=t||Object(u.d)(),Object(l.m)(t,this.transformation,e.getShaderTransformation()),t}},{key:"hasVolativeTransformation",value:function(){return this._hasVolatileTransformation}},{key:"boundingVolumeWorldSpace",get:function(){return this._validateBoundingVolume(),this._bvWorldSpace}},{key:"boundingVolumeObjectSpace",get:function(){return this._validateBoundingVolume(),this._bvObjectSpace}},{key:"_validateBoundingVolume",value:function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init(),this._bvWorldSpace.init();for(var e=0;e<this._geometryRecords.length;++e){var t=this._geometries[e],n=this._geometryRecords[e],i=t.boundingInfo;Object(c.k)(i)&&(this._calculateTransformedBoundingVolume(i,this._bvObjectSpace,n.getShaderTransformation()),this._calculateTransformedBoundingVolume(i,this._bvWorldSpace,this.getCombinedShaderTransformation(n)))}Object(h.f)(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5),Object(h.f)(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);for(var r=Object(d.e)(),a=Object(d.e)(),o=Object(p.c)(this.transformation),s=0;s<this._geometryRecords.length;++s){var l=this._geometries[s].boundingInfo;if(!Object(c.j)(l)){var u=this._geometryRecords[s].getShaderTransformation(),f=Object(p.c)(u);Object(h.n)(r,l.getCenter(),u);var b=Object(h.j)(r,this._bvObjectSpace.bounds),v=l.getBSRadius()*f;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],b+v),Object(h.n)(a,r,this.transformation);var m=Object(h.j)(a,this._bvWorldSpace.bounds),g=v*o;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],m+g)}}this._bvDirty=!1}}},{key:"_calculateTransformedBoundingVolume",value:function(e,t,n){var i=e.getBBMin(),r=e.getBBMax(),a=Object(d.c)(i),o=Object(d.c)(r);Object(h.n)(a,a,n),Object(h.n)(o,o,n);for(var s=0;s<3;++s)t.min[s]=Math.min(t.min[s],a[s],o[s]),t.max[s]=Math.max(t.max[s],a[s],o[s]);for(var c=0;c<3;++c){Object(h.h)(a,i),Object(h.h)(o,r),a[c]=r[c],o[c]=i[c],Object(h.n)(a,a,n),Object(h.n)(o,o,n);for(var l=0;l<3;++l)t.min[l]=Math.min(t.min[l],a[l],o[l]),t.max[l]=Math.max(t.max[l],a[l],o[l])}}},{key:"_invalidateBoundingVolume",value:function(){this._bvDirty=!0,Object(c.k)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}},{key:"_emit",value:function(e,t){Object(c.k)(this._parentLayer)&&this._parentLayer.events.emit(e,t)}},{key:"test",get:function(){var e=this;return{hasGeometry:function(t){return e._geometries.indexOf(t)>-1},getGeometryIndex:function(t){return e._geometries.indexOf(t)}}}}]),n}(b.a),x=function(){function e(){Object(r.a)(this,e),this.min=Object(d.g)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=Object(d.g)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}return Object(a.a)(e,[{key:"isEmpty",value:function(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}]),e}(),A=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).bounds=Object(f.b)(),e}return Object(a.a)(n,[{key:"init",value:function(){Object(h.t)(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Object(h.t)(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),Object(f.a)(this.bounds)}}]),n}(x)},751:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));n(15);var i=n(4),r=(n(806),n(13),n(10),n(137),n(444),n(44),n(625)),a=n(142),o=(n(609),n(218),n(240),n(735),function e(t,n,r){Object(i.a)(this,e),this.uid=t,this.geometry=n,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null});var s=function e(){Object(i.a)(this,e),this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null};function c(e,t,n,i){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}Object(r.c)(),Object(a.h)()},756:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l}));var i=n(10),r=n(489);function a(e,t){return function(e,t){return Object(i.j)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}(!!Object(i.k)(e)&&e.hasZ,t)}function o(e){var t=c(e);return a(e.geometry,t)}function s(e){var t=c(e),n=a(e.geometry,t);return{mode:n,offset:Object(i.k)(t)&&"on-the-ground"!==n?Object(i.s)(t.offset,0)*Object(r.a)(Object(i.s)(t.unit,"meters")):0}}function c(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function l(e,t,n){if(!Object(i.j)(n)&&n.mode){var r=e.hasZ?e.z:0,a=Object(i.k)(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return r-a;case"on-the-ground":return 0;case"relative-to-ground":return r-(Object(i.s)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return r-(Object(i.s)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+a)}}}function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,i)}function h(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return d(e,t[0],t[1],t.length>2?t[2]:0,n,i,r)}function d(e,t,n,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!Object(i.j)(o)){var c=Object(i.k)(s)?s.mode:"absolute-height";return"on-the-ground"===c?0:p(f(t,n,r,a,e,o),t,n,r,a,e,s,c)}}function f(e,t,n,r,a,o){var s=Object(i.k)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return n+s;case"on-the-ground":return Object(i.s)(a.elevationProvider.getElevation(e,t,0,r,"ground"),0);case"relative-to-ground":return n+Object(i.s)(a.elevationProvider.getElevation(e,t,n,r,"ground"),0)+s;case"relative-to-scene":return n+Object(i.s)(a.elevationProvider.getElevation(e,t,n,r,"scene"),0)+s}}function p(e,t,n,r,a,o,s,c){var l=Object(i.k)(s)&&Object(i.k)(s.offset)?s.offset:0;switch(c){case"absolute-height":return e-l;case"relative-to-ground":return e-(Object(i.s)(o.elevationProvider.getElevation(t,n,r,a,"ground"),0)+l);case"relative-to-scene":return e-(Object(i.s)(o.elevationProvider.getElevation(t,n,r,a,"scene"),0)+l)}}},768:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var i=n(15),r=n(4),a=n(5),o=n(6),s=n(7),c=n(112),l=n(63),u=n(10),h=n(195),d=n(765),f=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","vertexAttrsUpdated"],p=n(157),b=n(54),v=n(85),m=n(781),g=n(647),O=n(764),j=n(365),y=function(){function e(t,n){Object(r.a)(this,e),this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new _,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}return Object(a.a)(e,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}},{key:"destroy",value:function(){this._degenerateObjects.clear(),_.clearPool(),R[0]=null,q.prune(),W.prune()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);for(var n=_.acquire(),i=0;i<t;i++){var r=e[i];this._isDegenerate(r)?this._degenerateObjects.add(r):(n.init(this._root),this._add(r,n))}_.release(n)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;var n,r=_.acquire(),a=Object(i.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=Object(u.k)(t)?t:Object(O.d)(this._objectToBoundingSphere(o),F);M(s[3])?(r.init(this._root),this._remove(o,s,r)):this._degenerateObjects.delete(o)}}catch(c){a.e(c)}finally{a.f()}_.release(r),this._shrink()}},{key:"update",value:function(e,t){if(M(t[3])||!this._isDegenerate(e)){var n=function(e){return R[0]=e,R}(e);this.remove(n,t),this.add(n)}}},{key:"forEachAlongRay",value:function(e,t,n){var i=this,r=Object(g.g)(e,t);this._forEachNode(this._root,(function(e){if(!i._intersectsNode(r,e))return!1;var t=e.node;return t.terminals.forAll((function(e){i._intersectsObject(r,e)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){i._intersectsObject(r,e)&&n(e)})),!0}))}},{key:"forEachAlongRayWithVerticalOffset",value:function(e,t,n,i){var r=this,a=Object(g.g)(e,t);this._forEachNode(this._root,(function(e){if(!r._intersectsNodeWithOffset(a,e,i))return!1;var t=e.node;return t.terminals.forAll((function(e){r._intersectsObjectWithOffset(a,e,i)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){r._intersectsObjectWithOffset(a,e,i)&&n(e)})),!0}))}},{key:"forEach",value:function(e){this._forEachNode(this._root,(function(t){var n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}},{key:"forEachDegenerateObject",value:function(e){this._degenerateObjects.forEach(e)}},{key:"findClosest",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=1/0,s=1/0,c=null,l=k(e,t),u=function(l){if(--a,r(l)){var u=i._objectToBoundingSphere(l);if(Object(m.e)(n,u)){var h=S(e,t,Object(O.c)(u)),d=h-u[3],f=h+u[3];d<o&&(o=d,s=f,c=l)}}};return this._forEachNodeDepthOrdered(this._root,(function(i){if(a<=0||!Object(m.e)(n,i.bounds))return!1;if(Object(b.b)(L,l,i.halfSize),Object(b.c)(L,L,i.bounds),S(e,t,L)>s)return!1;var r=i.node;return r.terminals.forAll((function(e){return u(e)})),null!==r.residents&&r.residents.forAll((function(e){return u(e)})),!0}),e,t),c}},{key:"forEachInDepthRange",value:function(e,t,n,i,r,a,o){var s=this,c=-1/0,l=1/0,u={setRange:function(e){1===n?(c=Math.max(c,e.near),l=Math.min(l,e.far)):(c=Math.max(c,-e.far),l=Math.min(l,-e.near))}};u.setRange(i);var h=S(t,n,e),d=k(t,n),f=k(t,-1*n),p=function(e){if(o(e)){var i=s._objectToBoundingSphere(e),d=Object(O.c)(i),f=S(t,n,d)-h,p=f-i[3],b=f+i[3];p>l||b<c||!Object(m.e)(a,i)||r(e,u)}};this._forEachNodeDepthOrdered(this._root,(function(e){if(!Object(m.e)(a,e.bounds))return!1;if(Object(b.b)(L,d,e.halfSize),Object(b.c)(L,L,e.bounds),S(t,n,L)-h>l)return!1;if(Object(b.b)(L,f,e.halfSize),Object(b.c)(L,L,e.bounds),S(t,n,L)-h<c)return!1;var i=e.node;return i.terminals.forAll((function(e){return p(e)})),null!==i.residents&&i.residents.forAll((function(e){return p(e)})),!0}),t,n)}},{key:"forEachNode",value:function(e){this._forEachNode(this._root,(function(t){return e(t.node,t.bounds,t.halfSize)}))}},{key:"_intersectsNode",value:function(e,t){return P(t.bounds,2*-t.halfSize,T),P(t.bounds,2*t.halfSize,U),Object(j.i)(e.origin,e.direction,T,U)}},{key:"_intersectsNodeWithOffset",value:function(e,t,n){return P(t.bounds,2*-t.halfSize,T),P(t.bounds,2*t.halfSize,U),n.applyToMinMax(T,U),Object(j.i)(e.origin,e.direction,T,U)}},{key:"_intersectsObject",value:function(e,t){var n=this._objectToBoundingSphere(t);return!(n[3]>0)||Object(O.e)(n,e)}},{key:"_intersectsObjectWithOffset",value:function(e,t,n){var i=this._objectToBoundingSphere(t);return!(i[3]>0)||Object(O.e)(n.applyToBoundingSphere(i),e)}},{key:"_forEachNode",value:function(e,t){for(var n=_.acquire().init(e),i=[n];0!==i.length;){if(t(n=i.pop())&&!n.isLeaf())for(var r=0;r<n.node.children.length;r++)n.node.children[r]&&i.push(_.acquire().init(n).advance(r));_.release(n)}}},{key:"_forEachNodeDepthOrdered",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=_.acquire().init(e),a=[r];for(w(n,i,H);0!==a.length;){if(t(r=a.pop())&&!r.isLeaf())for(var o=7;o>=0;--o){var s=H[o];r.node.children[s]&&a.push(_.acquire().init(r).advance(s))}_.release(r)}}},{key:"_remove",value:function(e,t,n){q.clear();var i=n.advanceTo(t,(function(e,t){q.push(e.node),q.push(t)}))?n.node.terminals:n.node.residents;if(i.removeUnordered(e),0===i.length)for(var r=q.length-2;r>=0;r-=2){var a=q.data[r],o=q.data[r+1];if(!this._purge(a,o))break}}},{key:"_nodeIsEmpty",value:function(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}},{key:"_purge",value:function(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new h.a({shrink:!0})),!0)}},{key:"_add",value:function(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}},{key:"_split",value:function(e){var t=e.node.residents;e.node.residents=null;for(var n=0;n<t.length;n++){var i=_.acquire().init(e);this._add(t.getItemAt(n),i),_.release(i)}}},{key:"_grow",value:function(e,t){var n=this;if(0!==t&&(E(e,t,(function(e){return n._objectToBoundingSphere(e)}),I),M(I[3])&&!this._fitsInsideTree(I)))if(this._nodeIsEmpty(this._root.node))Object(O.d)(I,this._root.bounds),this._root.halfSize=1.25*I[3];else{var i=this._rootBoundsForRootAsSubNode(I);this._placingRootViolatesMaxDepth(i)?this._rebuildTree(I,i):this._growRootAsSubNode(i),_.release(i)}}},{key:"_rebuildTree",value:function(e,t){var n=this;Object(b.h)(N,t.bounds),N[3]=t.halfSize,E([e,N],2,(function(e){return e}),G);var i=_.acquire().init(this._root);this._root.initFrom(null,G,1.25*G[3]),this._forEachNode(i,(function(e){return n.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&n.add(e.node.residents.data,e.node.residents.length),!0})),_.release(i)}},{key:"_placingRootViolatesMaxDepth",value:function(e){var t=this,n=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,i=0;return this._forEachNode(this._root,(function(e){return(i=Math.max(i,e.depth))+n<=t._maximumDepth})),i+n>this._maximumDepth}},{key:"_rootBoundsForRootAsSubNode",value:function(e){for(var t=e[3],n=e,i=-1/0,r=this._root.bounds,a=this._root.halfSize,o=0;o<3;o++){var s=r[o]-a-(n[o]-t),c=n[o]+t-(r[o]+a),l=Math.max(0,Math.ceil(s/(2*a))),u=Math.max(0,Math.ceil(c/(2*a)))+1,h=Math.pow(2,Math.ceil(Math.log(l+u)*Math.LOG2E));i=Math.max(i,h),B[o].min=l,B[o].max=u}for(var d=0;d<3;d++){var f=B[d].min,p=B[d].max,b=(i-(f+p))/2;f+=Math.ceil(b),p+=Math.floor(b);var v=r[d]-a-f*a*2;z[d]=v+(p+f)*a}return z[3]=i*a*V,_.acquire().initFrom(null,z,i*a,0)}},{key:"_growRootAsSubNode",value:function(e){var t=this._root.node;Object(b.h)(I,this._root.bounds),I[3]=this._root.halfSize,this._root.init(e),e.advanceTo(I,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}},{key:"_shrink",value:function(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}},{key:"_findShrinkIndex",value:function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,n=0,i=0;i<t.length&&null==e;)e=t[n=i++];for(;i<t.length;)if(t[i++])return-1;return n}},{key:"_isDegenerate",value:function(e){return!M(this._objectToBoundingSphere(e)[3])}},{key:"_fitsInsideTree",value:function(e){var t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}]),e}(),_=function(){function e(){Object(r.a)(this,e),this.bounds=Object(O.b)(),this.halfSize=0,this.initFrom(null,null,0,0)}return Object(a.a)(e,[{key:"init",value:function(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}},{key:"initFrom",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=Object(u.k)(t)?t:e.createEmptyNode(),Object(u.k)(n)&&Object(O.d)(n,this.bounds),this.halfSize=i,this.depth=r,this}},{key:"advance",value:function(t){var n=this.node.children[t];n||(n=e.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;var i=C[t];return this.bounds[0]+=i[0]*this.halfSize,this.bounds[1]+=i[1]*this.halfSize,this.bounds[2]+=i[2]*this.halfSize,this.bounds[3]=this.halfSize*V,this}},{key:"advanceTo",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}var i=this._childIndex(e);t&&t(this,i),this.advance(i)}}},{key:"isLeaf",value:function(){return null!=this.node.residents}},{key:"isTerminalFor",value:function(e){return e[3]>this.halfSize/2}},{key:"_childIndex",value:function(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}}],[{key:"createEmptyNode",value:function(){return{children:[null,null,null,null,null,null,null,null],terminals:new h.a({shrink:!0}),residents:new h.a({shrink:!0})}}},{key:"acquire",value:function(){return e._pool.acquire()}},{key:"release",value:function(t){e._pool.release(t)}},{key:"clearPool",value:function(){e._pool.prune()}}]),e}();function x(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function A(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function P(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function E(e,t,n,i){if(1===t){var r=n(e[0]);Object(O.d)(r,i)}else{T[0]=1/0,T[1]=1/0,T[2]=1/0,U[0]=-1/0,U[1]=-1/0,U[2]=-1/0;for(var a=0;a<t;a++){var o=n(e[a]);M(o[3])&&(x(T,o),A(U,o))}Object(b.f)(i,T,U,.5),i[3]=Math.max(U[0]-T[0],U[1]-T[1],U[2]-T[2])/2}}function w(e,t,n){if(!W.length)for(var i=0;i<8;++i)W.push({index:0,distance:0});for(var r=0;r<8;++r){var a=C[r];W.data[r].index=r,W.data[r].distance=S(e,t,a)}W.sort((function(e,t){return e.distance-t.distance}));for(var o=0;o<8;++o)n[o]=W.data[o].index}function k(e,t){for(var n=1/0,i=null,r=0;r<8;++r){var a=S(e,t,D[r]);a<n&&(n=a,i=D[r])}return i}function S(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function M(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}_._pool=new p.a(_);var C=[Object(v.g)(-1,-1,-1),Object(v.g)(1,-1,-1),Object(v.g)(-1,1,-1),Object(v.g)(1,1,-1),Object(v.g)(-1,-1,1),Object(v.g)(1,-1,1),Object(v.g)(-1,1,1),Object(v.g)(1,1,1)],D=[Object(v.g)(-1,-1,-1),Object(v.g)(-1,-1,1),Object(v.g)(-1,1,-1),Object(v.g)(-1,1,1),Object(v.g)(1,-1,-1),Object(v.g)(1,-1,1),Object(v.g)(1,1,-1),Object(v.g)(1,1,1)],V=Math.sqrt(3),R=[null];var z=Object(O.b)(),L=Object(v.e)(),T=Object(v.e)(),U=Object(v.e)(),q=new h.a,F=Object(O.b)(),I=Object(O.b)(),N=Object(O.b)(),G=Object(O.b)(),B=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],W=new h.a,H=[0,0,0,0,0,0,0,0],Z=y,X=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i,a,o,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(r.a)(this,n),(i=t.call(this)).apiLayerUid=u,i.type=0,i.events=new c.a,i.isSliceable=!1,i._objects=new h.a,i._stageHandles=new l.a,i.apiLayerUid=u,i.isVisible=null==(a=null==e?void 0:e.isVisible)||a,i.isPickable=null==(o=null==e?void 0:e.isPickable)||o,i.updatePolicy=null!=(s=null==e?void 0:e.updatePolicy)?s:0,i}return Object(a.a)(n,[{key:"objects",get:function(){return this._objects}},{key:"destroy",value:function(){this.detachStage(),this._stage=null}},{key:"attachStage",value:function(e){var t=this;this.detachStage(),this._stage=e;var n,r=Object(i.a)(f);try{var a=function(){var i=n.value;t._stageHandles.add(t.events.on(i,(function(t){return e.handleEvent(i,t)})))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}},{key:"detachStage",value:function(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}},{key:"add",value:function(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),Object(u.k)(this._octree)&&this._octree.add([e])}},{key:"remove",value:function(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),Object(u.k)(this._octree)&&this._octree.remove([e]))}},{key:"addMany",value:function(e){this._objects.pushArray(e);var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.parentLayer=this}}catch(r){n.e(r)}finally{n.f()}this.events.emit("layerObjectsAdded",{layer:this,objects:e}),Object(u.k)(this._octree)&&this._octree.add(e)}},{key:"removeMany",value:function(e){var t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){var n,r=Object(i.a)(t);try{for(r.s();!(n=r.n()).done;){n.value.parentLayer=null}}catch(a){r.e(a)}finally{r.f()}this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),Object(u.k)(this._octree)&&this._octree.remove(t)}}},{key:"sync",value:function(){Object(u.k)(this._stage)&&1!==this.updatePolicy&&this._stage.syncLayer(this.id)}},{key:"notifyObjectBBChanged",value:function(e,t){Object(u.k)(this._octree)&&this._octree.update(e,t)}},{key:"getSpatialQueryAccelerator",value:function(){return Object(u.j)(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}},{key:"shaderTransformationChanged",value:function(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}},{key:"invalidateSpatialQueryAccelerator",value:function(){this._octree=Object(u.e)(this._octree)}},{key:"_createOctree",value:function(){this._octree=new Z((function(e){return e.boundingVolumeWorldSpace.bounds})),this._octree.add(this._objects.data,this._objects.length)}}]),n}(d.a)},773:function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.stride;return e.fieldNames.filter((function(t){var n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((function(i){var a=e.fields.get(i),o=a.constructor.ElementCount,s=r(a.constructor.ElementType),c=a.offset,l=!(!a.optional||!a.optional.glNormalized);return{name:i,stride:n,count:o,type:s,offset:c,normalized:l,divisor:t}}))}function r(e){var t=a[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}n.d(t,"a",(function(){return i}));var a={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},780:function(e,t,n){"use strict";n.r(t),n.d(t,"buffer",(function(){return w})),n.d(t,"clip",(function(){return s})),n.d(t,"contains",(function(){return l})),n.d(t,"convexHull",(function(){return y})),n.d(t,"crosses",(function(){return u})),n.d(t,"cut",(function(){return c})),n.d(t,"densify",(function(){return T})),n.d(t,"difference",(function(){return _})),n.d(t,"disjoint",(function(){return v})),n.d(t,"distance",(function(){return h})),n.d(t,"equals",(function(){return d})),n.d(t,"extendedSpatialReferenceInfo",(function(){return o})),n.d(t,"flipHorizontal",(function(){return R})),n.d(t,"flipVertical",(function(){return z})),n.d(t,"generalize",(function(){return L})),n.d(t,"geodesicArea",(function(){return I})),n.d(t,"geodesicBuffer",(function(){return k})),n.d(t,"geodesicDensify",(function(){return U})),n.d(t,"geodesicLength",(function(){return N})),n.d(t,"intersect",(function(){return A})),n.d(t,"intersects",(function(){return f})),n.d(t,"isSimple",(function(){return O})),n.d(t,"nearestCoordinate",(function(){return S})),n.d(t,"nearestVertex",(function(){return M})),n.d(t,"nearestVertices",(function(){return C})),n.d(t,"offset",(function(){return E})),n.d(t,"overlaps",(function(){return m})),n.d(t,"planarArea",(function(){return q})),n.d(t,"planarLength",(function(){return F})),n.d(t,"relate",(function(){return g})),n.d(t,"rotate",(function(){return V})),n.d(t,"simplify",(function(){return j})),n.d(t,"symmetricDifference",(function(){return x})),n.d(t,"touches",(function(){return p})),n.d(t,"union",(function(){return P})),n.d(t,"within",(function(){return b}));var i=n(804),r=n(850);function a(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function o(e){return i.G.extendedSpatialReferenceInfo(e)}function s(e,t){return i.G.clip(r.hydratedAdapter,a(e),e,t)}function c(e,t){return i.G.cut(r.hydratedAdapter,a(e),e,t)}function l(e,t){return i.G.contains(r.hydratedAdapter,a(e),e,t)}function u(e,t){return i.G.crosses(r.hydratedAdapter,a(e),e,t)}function h(e,t,n){return i.G.distance(r.hydratedAdapter,a(e),e,t,n)}function d(e,t){return i.G.equals(r.hydratedAdapter,a(e),e,t)}function f(e,t){return i.G.intersects(r.hydratedAdapter,a(e),e,t)}function p(e,t){return i.G.touches(r.hydratedAdapter,a(e),e,t)}function b(e,t){return i.G.within(r.hydratedAdapter,a(e),e,t)}function v(e,t){return i.G.disjoint(r.hydratedAdapter,a(e),e,t)}function m(e,t){return i.G.overlaps(r.hydratedAdapter,a(e),e,t)}function g(e,t,n){return i.G.relate(r.hydratedAdapter,a(e),e,t,n)}function O(e){return i.G.isSimple(r.hydratedAdapter,a(e),e)}function j(e){return i.G.simplify(r.hydratedAdapter,a(e),e)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.G.convexHull(r.hydratedAdapter,a(e),e,t)}function _(e,t){return i.G.difference(r.hydratedAdapter,a(e),e,t)}function x(e,t){return i.G.symmetricDifference(r.hydratedAdapter,a(e),e,t)}function A(e,t){return i.G.intersect(r.hydratedAdapter,a(e),e,t)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.G.union(r.hydratedAdapter,a(e),e,t)}function E(e,t,n,o,s,c){return i.G.offset(r.hydratedAdapter,a(e),e,t,n,o,s,c)}function w(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i.G.buffer(r.hydratedAdapter,a(e),e,t,n,o)}function k(e,t,n,o,s,c){return i.G.geodesicBuffer(r.hydratedAdapter,a(e),e,t,n,o,s,c)}function S(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.G.nearestCoordinate(r.hydratedAdapter,a(e),e,t,n)}function M(e,t){return i.G.nearestVertex(r.hydratedAdapter,a(e),e,t)}function C(e,t,n,o){return i.G.nearestVertices(r.hydratedAdapter,a(e),e,t,n,o)}function D(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function V(e,t,n){var r;if(null==e)throw new Error("Illegal Argument Exception");var a=e.spatialReference;if(null==(n=null!=(r=n)?r:D(e)))throw new Error("Illegal Argument Exception");var o=e.constructor.fromJSON(i.G.rotate(e,t,n));return o.spatialReference=a,o}function R(e,t){var n;if(null==e)throw new Error("Illegal Argument Exception");var r=e.spatialReference;if(null==(t=null!=(n=t)?n:D(e)))throw new Error("Illegal Argument Exception");var a=e.constructor.fromJSON(i.G.flipHorizontal(e,t));return a.spatialReference=r,a}function z(e,t){var n;if(null==e)throw new Error("Illegal Argument Exception");var r=e.spatialReference;if(null==(t=null!=(n=t)?n:D(e)))throw new Error("Illegal Argument Exception");var a=e.constructor.fromJSON(i.G.flipVertical(e,t));return a.spatialReference=r,a}function L(e,t,n,o){return i.G.generalize(r.hydratedAdapter,a(e),e,t,n,o)}function T(e,t,n){return i.G.densify(r.hydratedAdapter,a(e),e,t,n)}function U(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i.G.geodesicDensify(r.hydratedAdapter,a(e),e,t,n,o)}function q(e,t){return i.G.planarArea(r.hydratedAdapter,a(e),e,t)}function F(e,t){return i.G.planarLength(r.hydratedAdapter,a(e),e,t)}function I(e,t,n){return i.G.geodesicArea(r.hydratedAdapter,a(e),e,t,n)}function N(e,t,n){return i.G.geodesicLength(r.hydratedAdapter,a(e),e,t,n)}},781:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v}));var i=n(728),r=n(236),a=n(54),o=n(85),s=n(443),c=n(463),l=n(851),u=n(704),h=n(618);function d(e){return e?[Object(u.d)(e[0]),Object(u.d)(e[1]),Object(u.d)(e[2]),Object(u.d)(e[3]),Object(u.d)(e[4]),Object(u.d)(e[5])]:[Object(u.d)(),Object(u.d)(),Object(u.d)(),Object(u.d)(),Object(u.d)(),Object(u.d)()]}function f(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d(),n=0;n<6;n++)Object(u.c)(e[n],t[n])}function p(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,o=Object(r.m)(h.a.get(),t,e);Object(r.a)(o,o);for(var c=0;c<8;++c){var l=Object(s.m)(h.d.get(),g[c],o);Object(a.t)(i[c],l[0]/l[3],l[1]/l[3],l[2]/l[3])}b(n,i)}function b(e,t){Object(u.e)(t[4],t[0],t[3],e[0]),Object(u.e)(t[1],t[5],t[6],e[1]),Object(u.e)(t[4],t[5],t[1],e[2]),Object(u.e)(t[3],t[2],t[6],e[3]),Object(u.e)(t[0],t[1],t[2],e[4]),Object(u.e)(t[5],t[4],t[7],e[5])}function v(e,t){for(var n=0;n<6;n++)if(Object(u.o)(e[n],t))return!1;return!0}function m(e,t){for(var n=0;n<6;n++){var i=e[n];if(!Object(u.b)(i,t))return!1}return!0}var g=[Object(c.g)(-1,-1,-1,1),Object(c.g)(1,-1,-1,1),Object(c.g)(1,1,-1,1),Object(c.g)(-1,1,-1,1),Object(c.g)(-1,-1,1,1),Object(c.g)(1,-1,1,1),Object(c.g)(1,1,1,1),Object(c.g)(-1,1,1,1)],O=(new i.a(l.a),[Object(o.e)(),Object(o.e)(),Object(o.e)(),Object(o.e)(),Object(o.e)(),Object(o.e)(),Object(o.e)(),Object(o.e)()])},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(4),r=n(5),a=n(6),o=n(7),s=n(0),c=n(36),l=n(25),u=n(1),h=(n(13),n(16),n(12),n(9)),d=n(177),f=n(974),p=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).toolState="pending",r.attached=!1,r.created=!1,r.completed=!1,r.manipulators=new f.a,r.updating=!1,r._editableFlags=new Array,r._creationStartedResolver=Object(l.g)(),r._creationFinishedResolver=Object(l.g)(),r}return Object(r.a)(n,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"isSupported",get:function(){return!0}},{key:"visible",set:function(e){this._set("visible",e),e||Object(d.d)(this,!1),this.attached&&(e?this._show():this._hide())}},{key:"editable",get:function(){return this.hasEditableFlag(0)},set:function(e){this.setEditableFlag(0,e)}},{key:"attach",value:function(){!this.attached&&this.isSupported&&(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}},{key:"detach",value:function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))}},{key:"handleInputEvent",value:function(e){this.attached&&this.onInputEvent(e)}},{key:"handleInputEventAfter",value:function(e){this.attached&&this.onInputEventAfter(e)}},{key:"destroy",value:function(){switch(this.toolState){case"pending":break;case"creating":case"created":this.manipulators.destroy()}this.toolState="destroyed",this._set("view",null),this._set("created",!1),this._set("completed",!1)}},{key:"setEditableFlag",value:function(e,t){this._editableFlags[e]=t,this.manipulators.isToolEditable=this._editableFlags.every((function(e){return null==e||e})),this._updateManipulatorAttachment(),0===e&&this.notifyChange("editable"),this.onEditableChange()}},{key:"hasEditableFlag",value:function(e){var t=this._editableFlags[e];return null==t||t}},{key:"whenCreationStarted",value:function(){return this._creationStartedResolver.promise}},{key:"when",value:function(){return this._creationFinishedResolver.promise}},{key:"rejectCreation",value:function(e){switch(this.toolState){case"pending":case"creating":this._creationStartedResolver.resolve(this)}this._creationFinishedResolver.reject(e)}},{key:"initialize",value:function(){}},{key:"onAttach",value:function(){}},{key:"onDetach",value:function(){}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){}},{key:"onEditableChange",value:function(){}},{key:"onInputEvent",value:function(e){}},{key:"onInputEventAfter",value:function(e){}},{key:"internallyEditable",get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}},{key:"startToolCreation",value:function(){switch(this.toolState){case"pending":this._creationStartedResolver.resolve(this),this.toolState="creating";break;case"creating":case"created":case"destroyed":default:throw new Error("unexpected tool state ".concat(this.toolState))}}},{key:"finishToolCreation",value:function(){switch(this.toolState){case"pending":this.startToolCreation();case"creating":this.created||(this._set("created",!0),this._creationFinishedResolver.resolve(this)),this.toolState="created";break;case"created":if(!this.created)throw new Error("expected this.created to match toolstate ".concat(this.toolState));break;case"destroyed":default:throw new Error("unexpected tool state ".concat(this.toolState))}}},{key:"complete",value:function(){this.finishToolCreation(),this._set("completed",!0)}},{key:"_show",value:function(){this._updateManipulatorAttachment(),this.onShow()}},{key:"_hide",value:function(){this._updateManipulatorAttachment(),this.onHide()}},{key:"_updateManipulatorAttachment",value:function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}}]),n}(c.a);Object(s.a)([Object(u.b)()],p.prototype,"toolState",void 0),Object(s.a)([Object(u.b)({constructOnly:!0})],p.prototype,"view",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"active",null),Object(s.a)([Object(u.b)({value:!0})],p.prototype,"visible",null),Object(s.a)([Object(u.b)({value:!0})],p.prototype,"editable",null),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"attached",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"created",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"completed",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"manipulators",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(s.a)([Object(h.a)("esri.views.interactive.InteractiveToolBase")],p)},806:function(e,t,n){"use strict";function i(e){return 32+e.length}function r(e){if(!e)return 0;var t=32;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];switch(typeof r){case"string":t+=i(r);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function a(e,t){return 32+e.length*t}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},812:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return f}));var i=n(15),r=(n(90),n(22)),a=n(56),o=n(507),s=n(120),c=n(129),l=(n(55),n(44));function u(e){if(!e)return null;if(e.isGeographic&&e.wkid){var t=o.c[e.wkid];if(t)return t}if(e.wkt){var n=function(e){var t=o.a.exec(e);if(!t||2!==t.length)return null;var n=t[1].split(",");if(!n||n.length<3)return null;var i=parseFloat(n[1]),r=parseFloat(n[2]);return isNaN(i)||isNaN(r)?null:{a:i,f:0===r?0:1/r}}(e.wkt);if(n)return n}return null}function h(e){var t=u(e||l.a.WGS84);if(function(e){return"b"in e&&"eSq"in e&&"radius"in e}(t))return t;var n=t.a*(1-t.f);return Object.assign(t,{b:n,eSq:1-Math.pow(n/t.a,2),radius:(2*t.a+n)/3,densificationRatio:1e4/((2*t.a+n)/3)})}function d(e,t,n){var i,r=h(n),a=r.a,s=r.eSq,c=Math.sqrt(s),l=Math.sin(t[1]*o.d),u=a*t[0]*o.d;return i=s>0?a*((1-s)*(l/(1-s*(l*l))-1/(2*c)*Math.log((1-c*l)/(1+c*l))))*.5:a*l,e[0]=u,e[1]=i,e}function f(e){return null!==u(e)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"square-meters";if(e.some((function(e){return!f(e.spatialReference)})))throw new r.a("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var n=[],i=0;i<e.length;i++){var o=e[i],s=o.spatialReference,c=h(s),l=c.radius,u=c.densificationRatio,p=l*u;n.push(v(o,p))}for(var b=[],m=[0,0],g=[0,0],O=0;O<n.length;O++){for(var j=n[O],y=j.rings,_=j.spatialReference,x=0,A=0;A<y.length;A++){var P=y[A];d(m,P[0],_),d(g,P[P.length-1],_);for(var E=g[0]*m[1]-m[0]*g[1],w=0;w<P.length-1;w++)d(m,P[w+1],_),d(g,P[w],_),E+=g[0]*m[1]-m[0]*g[1];x+=E}x=Object(a.c)(x,"square-meters",t),b.push(x/-2)}return b}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters";if(!e)throw new r.a("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some((function(e){return!f(e.spatialReference)})))throw new r.a("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var n=[],i=0;i<e.length;i++){for(var o=e[i],s=o.spatialReference,c="polyline"===o.type?o.paths:o.rings,l=0,u=0;u<c.length;u++){for(var h=c[u],d=0,p=1;p<h.length;p++){var b=h[p-1][0],v=h[p][0],m=h[p-1][1],O=h[p][1];if(m!==O||b!==v){var j={distance:null};g(j,[b,m],[v,O],s),d+=j.distance}}l+=d}l=Object(a.c)(l,"meters",t),n.push(l)}return n}function v(e,t){if("polyline"!==e.type&&"polygon"!==e.type)throw new r.a("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");var n=e.spatialReference;if(!f(n))throw new r.a("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var a,o="polyline"===e.type?e.paths:e.rings,l=[],u=[0,0],h={distance:null},d=Object(i.a)(o);try{for(d.s();!(a=d.n()).done;){var p=a.value,b=[];l.push(b),b.push([p[0][0],p[0][1]]);for(var v=void 0,O=void 0,j=p[0][0],y=p[0][1],_=0;_<p.length-1;_++)if(v=p[_+1][0],O=p[_+1][1],j!==v||y!==O){var x=[j,y];g(h,[j,y],[v,O],n);var A=h.azimuth,P=h.distance,E=P/t;if(E>1){for(var w=1;w<=E-1;w++)m(u,x,A,w*t,n),b.push(u.slice(0));m(u,x,A,(P+Math.floor(E-1)*t)/2,n),b.push(u.slice(0))}m(u,x,A,P,n),b.push(u.slice(0)),j=u[0],y=u[1]}}}catch(k){d.e(k)}finally{d.f()}return"polyline"===e.type?new s.a({paths:l,spatialReference:n}):new c.a({rings:l,spatialReference:n})}function m(e,t,n,i,r){for(var a,s,c,l=t[0],u=t[1],d=l*o.d,f=u*o.d,p=n*o.d,b=h(r),v=b.a,m=b.b,g=b.f,O=Math.sin(p),j=Math.cos(p),y=(1-g)*Math.tan(f),_=1/Math.sqrt(1+y*y),x=y*_,A=Math.atan2(y,j),P=_*O,E=P*P,w=1-E,k=w*(v*v-m*m)/(m*m),S=1+k/16384*(4096+k*(k*(320-175*k)-768)),M=k/1024*(256+k*(k*(74-47*k)-128)),C=i/(m*S),D=2*Math.PI;Math.abs(C-D)>1e-12;)c=Math.cos(2*A+C),D=C,C=i/(m*S)+M*(a=Math.sin(C))*(c+M/4*((s=Math.cos(C))*(2*c*c-1)-M/6*c*(4*a*a-3)*(4*c*c-3)));var V=x*a-_*s*j,R=Math.atan2(x*s+_*a*j,(1-g)*Math.sqrt(E+V*V)),z=Math.atan2(a*O,_*s-x*a*j),L=g/16*w*(4+g*(4-3*w)),T=R/o.d,U=(d+(z-(1-L)*g*P*(C+L*a*(c+L*s*(2*c*c-1)))))/o.d;return e[0]=U,e[1]=T,e}function g(e,t,n,i){var r,a,s,c,l,u,d,f,p,b,v=t[0]*o.d,m=t[1]*o.d,g=n[0]*o.d,O=n[1]*o.d,j=h(i),y=j.a,_=j.b,x=j.f,A=j.radius,P=g-v,E=Math.atan((1-x)*Math.tan(m)),w=Math.atan((1-x)*Math.tan(O)),k=Math.sin(E),S=Math.cos(E),M=Math.sin(w),C=Math.cos(w),D=1e3,V=P;do{if(d=Math.sin(V),f=Math.cos(V),0===(s=Math.sqrt(C*d*(C*d)+(S*M-k*C*f)*(S*M-k*C*f))))return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;l=k*M+S*C*f,u=Math.atan2(s,l),c=l-2*k*M/(a=1-(p=S*C*d/s)*p),isNaN(c)&&(c=0),r=V,V=P+(1-(b=x/16*a*(4+x*(4-3*a))))*x*p*(u+b*s*(c+b*l*(2*c*c-1)))}while(Math.abs(V-r)>1e-12&&--D>0);if(0===D){var R=A,z=Math.acos(Math.sin(m)*Math.sin(O)+Math.cos(m)*Math.cos(O)*Math.cos(g-v))*R,L=g-v,T=Math.sin(L)*Math.cos(O),U=Math.cos(m)*Math.sin(O)-Math.sin(m)*Math.cos(O)*Math.cos(L),q=Math.atan2(T,U);return e.azimuth=q/o.d,e.distance=z,e.reverseAzimuth=void 0,e}var F=a*(y*y-_*_)/(_*_),I=F/1024*(256+F*(F*(74-47*F)-128)),N=_*(1+F/16384*(4096+F*(F*(320-175*F)-768)))*(u-I*s*(c+I/4*(l*(2*c*c-1)-I/6*c*(4*s*s-3)*(4*c*c-3)))),G=Math.atan2(C*Math.sin(V),S*M-k*C*Math.cos(V)),B=Math.atan2(S*Math.sin(V),S*M*Math.cos(V)-k*C);return e.azimuth=G/o.d,e.distance=N,e.reverseAzimuth=B/o.d,e}},814:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return O}));var i,r,a,o,s,c,l,u,h,d,f=n(598),p=n(66),b=n(878),v=n(815),m=n(597),g=n(617),O=Object(p.g)(6);function j(e){var t=new g.a;return t.extensions.add("GL_OES_standard_derivatives"),t.include(v.a),t.include(b.a,e),t.fragment.uniforms.add("angleCutoff","vec2"),t.fragment.uniforms.add("globalAlpha","float"),e.heightManifoldEnabled&&t.fragment.uniforms.add("heightPlane","vec4"),e.pointDistanceEnabled&&t.fragment.uniforms.add("pointDistanceSphere","vec4"),e.lineVerticalPlaneEnabled&&t.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3"),(e.heightManifoldEnabled||e.pointDistanceEnabled||e.lineVerticalPlaneEnabled)&&t.fragment.uniforms.add("maxPixelDistance","float"),e.intersectsLineEnabled&&t.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float"),(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)&&t.fragment.code.add(Object(m.a)(i||(i=Object(f.a)(["float planeDistancePixels(vec4 plane, vec3 pos) {\nfloat dist = dot(plane.xyz, pos) + plane.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}"])))),e.pointDistanceEnabled&&t.fragment.code.add(Object(m.a)(r||(r=Object(f.a)(["float sphereDistancePixels(vec4 sphere, vec3 pos) {\nfloat dist = distance(sphere.xyz, pos) - sphere.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}"])))),e.intersectsLineEnabled&&t.fragment.code.add(Object(m.a)(a||(a=Object(f.a)(["float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\nfloat dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\nreturn abs(dist) - radius;\n}"])))),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.fragment.code.add(Object(m.a)(o||(o=Object(f.a)(["bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\nvec3 dir = end - start;\nfloat t2 = dot(dir, pos - start);\nfloat l2 = dot(dir, dir);\nreturn t2 >= 0.0 && t2 <= l2;\n}"])))),t.fragment.code.add(Object(m.a)(s||(s=Object(f.a)(["void main() {\nvec3 pos;\nvec3 normal;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\ndiscard;\n}\nvec4 color = vec4(0, 0, 0, 0);"])))),e.heightManifoldEnabled&&t.fragment.code.add(Object(m.a)(c||(c=Object(f.a)(["{\nfloat heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));\nvec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));\ncolor = max(color, heightManifoldColor * heightManifoldAlpha);\n}"])))),e.pointDistanceEnabled&&t.fragment.code.add(Object(m.a)(l||(l=Object(f.a)(["{\nfloat pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\nvec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\nfloat pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\ncolor = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);\n}"])))),e.lineVerticalPlaneEnabled&&t.fragment.code.add(Object(m.a)(u||(u=Object(f.a)(["{\nif (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\nfloat lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\nvec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\nfloat lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\ncolor = max(color, lineVerticalColor * lineVerticalAlpha);\n}\n}"])))),e.intersectsLineEnabled&&t.fragment.code.add(Object(m.a)(h||(h=Object(f.a)(["{\nif (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\nfloat intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\nvec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\nfloat intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\ncolor = max(color, intersectsLineColor * intersectsLineAlpha);\n}\n}"])))),t.fragment.code.add(Object(m.a)(d||(d=Object(f.a)(["gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);\n}"])))),t}var y=Object.freeze({__proto__:null,defaultAngleCutoff:O,build:j})},815:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i,r=n(598),a=n(597);function o(e){e.attributes.add("position","vec2"),e.varyings.add("uv","vec2"),e.vertex.code.add(Object(a.a)(i||(i=Object(r.a)(["\n    void main(void) {\n      gl_Position = vec4(position, 0.0, 1.0);\n      uv = position * 0.5 + vec2(0.5);\n    }\n  "]))))}},832:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(11),r=n(4),a=n(5),o=n(6),s=n(7),c=n(715),l=n(716),u=n(706),h=n(973),d=n(694),f=n(0),p=n(626),b=n(674),v=n(636),m=n(717),g=n(672),O=n(680),j=n(681),y=n(688),_=n(673),x=n(917),A=n(920),P=n(467),E=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),i=this.configuration,r=t.build({output:i.output,OITEnabled:0===i.transparencyPassType,attributeColor:i.vertexColors,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new _.a(e.rctx,r,y.a)}},{key:"bindPass",value:function(e,t){Object(m.b)(this.program,t.camera.projectionMatrix),this.program.setUniform4fv("eColor",e.color),4===this.configuration.output&&Object(b.b)(this.program,t),(1===this.configuration.output||t.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",t.camera.nearFar),t.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",t.inverseViewport),Object(v.a)(this.program,t))}},{key:"bindDraw",value:function(e){Object(m.c)(this.program,e),this.program.rebindTextures(),Object(p.c)(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e,t){var n=this.configuration,i=3===e,r=2===e;return Object(P.e)({blending:0!==n.output&&7!==n.output||!n.transparent?null:i?u.f:Object(u.a)(e),culling:Object(P.b)(n.cullFace),depthTest:{func:Object(u.b)(e)},depthWrite:i||r?n.writeDepth&&P.d:null,colorWrite:P.c,stencilWrite:n.sceneHasOcludees?x.h:null,stencilTest:n.sceneHasOcludees?t?x.d:x.c:null,polygonOffset:i||r?n.polygonOffset&&w:Object(u.g)(n.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipelineState",value:function(e){return e?this._occludeePipelineState:this.pipeline}}]),n}(O.a);E.shader=new g.a(A.a,(function(){return n.e(190).then(n.bind(null,1177))}));var w={factor:1,units:1},k=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).output=0,e.cullFace=0,e.slicePlaneEnabled=!1,e.vertexColors=!1,e.transparent=!1,e.polygonOffset=!1,e.enableOffset=!0,e.writeDepth=!0,e.sceneHasOcludees=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!1,e}return n}(j.a);Object(f.a)([Object(j.b)({count:8})],k.prototype,"output",void 0),Object(f.a)([Object(j.b)({count:3})],k.prototype,"cullFace",void 0),Object(f.a)([Object(j.b)()],k.prototype,"slicePlaneEnabled",void 0),Object(f.a)([Object(j.b)()],k.prototype,"vertexColors",void 0),Object(f.a)([Object(j.b)()],k.prototype,"transparent",void 0),Object(f.a)([Object(j.b)()],k.prototype,"polygonOffset",void 0),Object(f.a)([Object(j.b)()],k.prototype,"enableOffset",void 0),Object(f.a)([Object(j.b)()],k.prototype,"writeDepth",void 0),Object(f.a)([Object(j.b)()],k.prototype,"sceneHasOcludees",void 0),Object(f.a)([Object(j.b)({count:4})],k.prototype,"transparencyPassType",void 0),Object(f.a)([Object(j.b)()],k.prototype,"multipassTerrainEnabled",void 0),Object(f.a)([Object(j.b)()],k.prototype,"cullAboveGround",void 0);var S=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e,C)).supportsEdges=!0,i.techniqueConfig=new k,i}return Object(a.a)(n,[{key:"getTechniqueConfig",value:function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<u.e,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}},{key:"getPassParameters",value:function(){return this.params}},{key:"intersect",value:function(e,t,n,i,r,a,o){Object(d.d)(e,t,i,r,a,void 0,o)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output||4===e.output||1===e.output&&this.params.writeLinearDepth?new M(e):void 0}},{key:"createBufferWriter",value:function(){return new h.a(h.b)}}]),n}(l.a),M=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).updateParameters(),i}return Object(a.a)(n,[{key:"updateParameters",value:function(e){this._technique=this._techniqueRep.releaseAndAcquire(E,this._material.getTechniqueConfig(this._output,e),this._technique)}},{key:"beginSlot",value:function(e){return 4===this._output?3===e:e===(this._technique.configuration.transparent?this._technique.configuration.writeDepth?5:8:3)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:e.hasOccludees})}},{key:"ensureParameters",value:function(e){0!==this._output&&7!==this._output||this._updateOccludeeState(e),this.updateParameters(e)}},{key:"bind",value:function(e){this._technique.bindPass(this._material.getPassParameters(),e)}},{key:"getPipelineState",value:function(e,t){return this._technique.getPipelineState(t)}}]),n}(c.a),C=Object(i.a)({color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1},l.b)},850:function(e,t,n){"use strict";n.r(t),n.d(t,"hydratedAdapter",(function(){return c}));var i=n(53),r=n(217),a=n(55),o=n(129),s=n(120),c={convertToGEGeometry:function(e,t){if(null==t)return null;var n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){var i=e.hasZ(t),r=e.hasM(t),o=new a.a({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return i&&(o.z=e.getPointZ(t)),r&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,n){var i=new o.a({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return i.cache._geVersion=t,i},exportPolyline:function(e,t,n){var i=new s.a({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return i.cache._geVersion=t,i},exportMultipoint:function(e,t,n){var i=new r.a({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return i.cache._geVersion=t,i},exportExtent:function(e,t,n){var r=e.hasZ(t),a=e.hasM(t),o=new i.a({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(r){var s=e.getZExtent(t);o.zmin=s.vmin,o.zmax=s.vmax}if(a){var c=e.getMExtent(t);o.mmin=c.vmin,o.mmax=c.vmax}return o.cache._geVersion=t,o}}},851:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l}));var i=n(728),r=n(54),a=n(647);n(618);function o(e){return e?{ray:Object(a.c)(e.ray),c0:e.c0,c1:e.c1}:{ray:Object(a.c)(),c0:0,c1:Number.MAX_VALUE}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();return Object(a.b)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o(),i=Object(r.m)(e.vector);return Object(a.f)(e.origin,t,n.ray),n.c0=0,n.c1=i,n}function l(e,t){return h(e,e.c0,t)}function u(e,t){return h(e,e.c1,t)}function h(e,t,n){return Object(r.c)(n,e.ray.origin,Object(r.b)(n,e.ray.direction,t))}new i.a((function(){return{c0:0,c1:0,ray:null}}))},852:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(4),r=n(5),a=function(){function e(t){var n=this;Object(i.a)(this,e),this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch("ready",(function(e){n._resourcesCreated&&(e?n._createResources():n._destroyResources())}))}return Object(r.a)(e,[{key:"applyProps",value:function(e){var t=!1;for(var n in e)n in this?"attached"===n?t=e[n]:this[n]=e[n]:console.error("Cannot set unknown property",n);this.attached=t}},{key:"destroy",value:function(){this.attached=!1}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}},{key:"_createResources",value:function(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}},{key:"_destroyResources",value:function(){this.destroyResources(),this._resourcesCreated=!1}}]),e}()},853:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var i,r,a=n(300),o=n(10),s=(n(236),n(603)),c=n(85),l=n(267),u=n(972),h=(n(919),n(854));function d(e,t,n,i,r,a,o,s,c,u,h){var d,f,b=p[h.mode],v=0;if(Object(l.k)(e,t,n,i,c.spatialReference,r,s))return b.requiresAlignment(h)?(v=b.applyElevationAlignmentBuffer(i,r,a,o,s,c,u,h),d=a,f=o):(d=i,f=r),Object(l.k)(d,c.spatialReference,f,a,u.spatialReference,o,s)?v:void 0}function f(e,t,n,i,r){var s=(Object(u.a)(e)?e.z:Object(h.b)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":var c=Object(o.s)(Object(h.a)(t,e,"ground"),0);return r&&(r.verticalDistanceToGround=0,r.sampledElevation=c),c;case"relative-to-ground":var l=Object(o.s)(Object(h.a)(t,e,"ground"),0),d=n.geometryZWithOffset(s,i);return r&&(r.verticalDistanceToGround=d,r.sampledElevation=l),d+l;case"relative-to-scene":var f=Object(o.s)(Object(h.a)(t,e,"scene"),0),p=n.geometryZWithOffset(s,i);return r&&(r.verticalDistanceToGround=p,r.sampledElevation=f),p+f;case"absolute-height":var b=n.geometryZWithOffset(s,i);if(r){var v=Object(o.s)(Object(h.a)(t,e,"ground"),0);r.verticalDistanceToGround=b-v,r.sampledElevation=v}return b;default:return Object(a.a)(n.mode),0}}(r=i||(i={}))[r.NONE=0]="NONE",r[r.UPDATE=1]="UPDATE",r[r.RECREATE=2]="RECREATE";var p={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,i,r,a,o,s){var c=s.calculateOffsetRenderUnits(o),l=s.featureExpressionInfoContext;t*=3,i*=3;for(var u=0;u<r;++u){var h=e[t+0],d=e[t+1],f=e[t+2];n[i+0]=h,n[i+1]=d,n[i+2]=null==l?f+c:c,t+=3,i+=3}return 0},requiresAlignment:function(e){var t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,i,r,a){var s=0,c=a.spatialReference;t*=3,i*=3;for(var l=0;l<r;++l){var u=e[t+0],h=e[t+1],d=e[t+2],f=Object(o.s)(a.getElevation(u,h,d,c,"ground"),0);s+=f,n[i+0]=u,n[i+1]=h,n[i+2]=f,t+=3,i+=3}return s/r},requiresAlignment:function(){return!0}},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,i,r,a,s,c){var l=0,u=c.calculateOffsetRenderUnits(s),h=c.featureExpressionInfoContext,d=a.spatialReference;t*=3,i*=3;for(var f=0;f<r;++f){var p=e[t+0],b=e[t+1],v=e[t+2],m=Object(o.s)(a.getElevation(p,b,v,d,"ground"),0);l+=m,n[i+0]=p,n[i+1]=b,n[i+2]=null==h?v+m+u:m+u,t+=3,i+=3}return l/r},requiresAlignment:function(){return!0}},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,i,r,a,s,c){var l=0,u=c.calculateOffsetRenderUnits(s),h=c.featureExpressionInfoContext,d=a.spatialReference;t*=3,i*=3;for(var f=0;f<r;++f){var p=e[t+0],b=e[t+1],v=e[t+2],m=Object(o.s)(a.getElevation(p,b,v,d,"scene"),0);l+=m,n[i+0]=p,n[i+1]=b,n[i+2]=null==h?v+m+u:m+u,t+=3,i+=3}return l/r},requiresAlignment:function(){return!0}}};Object(s.d)(),Object(c.e)()},854:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));n(4);var i=n(10),r=n(972);function a(e){return"array"in e}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if(Object(r.a)(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,n);if(a(t)){var o=t.offset;return e.getElevation(t.array[o++],t.array[o++],t.array[o]||0,Object(i.s)(t.spatialReference,e.spatialReference),n)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,n)}},857:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n(8),r=n.n(i),a=n(11),o=n(14),s=n(15),c=n(4),l=n(5),u=n(6),h=n(7),d=n(0),f=n(36),p=n(22),b=n(63),v=n(30),m=n(1),g=(n(13),n(16),n(12),n(9)),O=n(177),j=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).tool=null,i._baseHandles=new b.a,i._loggedUnsupportedErrorOnce=!1,i._creationAbortController=null,e&&null!=e.visible&&(i.visible=e.visible),i}return Object(l.a)(n,[{key:"initialize",value:function(){var e=this;this._baseHandles.add(Object(v.a)(this,["view.ready","isSupported"],(function(){e.view&&e.view.ready&&!e.isSupported?e._loggedUnsupportedErrorOnce||(e.logUnsupportedError(),e._loggedUnsupportedErrorOnce=!0):e._loggedUnsupportedErrorOnce=!1})))}},{key:"destroy",value:function(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}},{key:"isSupported",get:function(){return!this.view||this.view.type===this.supportedViewType}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this;if(e!==this.view){this.removeTool(),this._set("view",e);var n="tools";this._baseHandles.remove(n),e&&this._baseHandles.add(e.tools.on("change",(function(e){if(t.tool){var n,i=Object(s.a)(e.removed);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(t.tool===r){r.destroyed||r.destroy(),t._set("tool",null);break}}}catch(a){i.e(a)}finally{i.f()}}})),n)}}},{key:"visible",set:function(e){this._set("visible",e),this.tool&&(this.tool.visible=e),!e&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}},{key:"active",get:function(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}},{key:"isDisabled",get:function(){return!this.view||!this.view.ready||!this.isSupported}},{key:"creatingTool",get:function(){return!!this._creationAbortController}},{key:"createTool",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,i,o,s,c,l=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.removeTool(),this.isSupported){e.next=2;break}return e.abrupt("return",Promise.reject(new p.a("tool:create","The view does not support the tool")));case 2:return t=this.createToolParams(),n=function(){var e=Object(O.b)(t.constructorArguments);return Object(a.a)({visible:l.visible},e)},i=new AbortController,o=i.signal,this._creationAbortController=i,s=function(){i===l._creationAbortController&&(l._creationAbortController=null)},e.prev=5,e.next=8,this.view.createTool(t.toolConstructor,n,{signal:o});case 8:c=e.sent,this._set("tool",c),s(),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(5),s(),e.t0;case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"removeTool",value:function(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;var e=this.tool;e&&(this.view&&this.view.tools&&this.view.tools.remove(e),e.destroyed||e.destroy(),this._set("tool",null))}}]),n}(f.a);Object(d.a)([Object(m.b)({constructOnly:!0})],j.prototype,"tool",void 0),Object(d.a)([Object(m.b)()],j.prototype,"isSupported",null),Object(d.a)([Object(m.b)({value:null})],j.prototype,"view",null),Object(d.a)([Object(m.b)({type:Boolean,value:!0})],j.prototype,"visible",null),Object(d.a)([Object(m.b)()],j.prototype,"active",null),Object(d.a)([Object(m.b)()],j.prototype,"isDisabled",null),Object(d.a)([Object(m.b)()],j.prototype,"_creationAbortController",void 0),Object(d.a)([Object(m.b)({readOnly:!0})],j.prototype,"creatingTool",null),j=Object(d.a)([Object(g.a)("esri.widgets.support.InteractiveToolViewModel")],j)},873:function(e,t,n){"use strict";n.d(t,"a",(function(){return ie}));var i=n(4),r=n(5),a=n(6),o=n(7),s=n(10),c=n(54),l=n(85),u=n(693),h=n(852),d=n(66),f=n(91),p=n(443),b=n(463),v=n(851),m=n(781),g=n(704),O=n(647),j=n(764),y=n(15),_=n(773),x=n(700),A=n(0),P=n(236),E=n(603),w=n(672),k=n(680),S=n(681),M=n(673),C=n(913),D=n(467),V=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),i=this.configuration,r=t.build(i);return new M.a(e.rctx,r,n.attributeLocations)}},{key:"bind",value:function(e,t,n){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*n.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*n.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",n.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/n.fullWidth,2/n.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",n.projectionMatrix),Object(P.s)(z,n.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",z),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1)}},{key:"initializePipeline",value:function(){return Object(D.e)({blending:Object(D.g)(1,771),colorWrite:D.c})}},{key:"bindPipelineState",value:function(e){e.setPipelineState(this.pipeline)}}]),n}(k.a);V.shader=new w.a(C.a,(function(){return n.e(193).then(n.bind(null,1172))})),V.attributeLocations=new Map([["start",0],["end",1],["up",2],["extrude",3]]);var R=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).contrastControlEnabled=!1,e}return n}(S.a);Object(A.a)([Object(S.b)()],R.prototype,"contrastControlEnabled",void 0);var z=Object(E.d)(),L=n(144),T=n(266),U=function(){function e(t){Object(i.a)(this,e),this._renderCoordsHelper=t,this._buffers=null,this._origin=Object(l.e)(),this._dirty=!1,this._count=0,this._vao=null}return Object(r.a)(e,[{key:"vertices",set:function(e){var t,n=new Float64Array(3*e.length),i=0,r=Object(y.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[i++]=a[0],n[i++]=a[1],n[i++]=a[2]}}catch(o){r.e(o)}finally{r.f()}this.buffers=[n]}},{key:"buffers",set:function(e){if(this._buffers=e,this._buffers.length>0){var t=this._buffers[0],n=3*Math.floor(t.length/3/2);Object(c.t)(this._origin,t[n+0],t[n+1],t[n+2])}else Object(c.t)(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}},{key:"draw",value:function(e){var t=this.ensureVAO(e);Object(s.k)(t)&&(e.bindVAO(t),e.drawArrays(4,0,this._count))}},{key:"dispose",value:function(){Object(s.k)(this._vao)&&this._vao.dispose()}},{key:"ensureVAO",value:function(e){return Object(s.j)(this._buffers)?null:(Object(s.j)(this._vao)&&(this._vao=this.createVAO(e,this._buffers)),this.ensureVertexData(this._vao,this._buffers),this._vao)}},{key:"createVAO",value:function(e,t){var n=this.createDataBuffer(t);return this._dirty=!1,new T.a(e,V.attributeLocations,{data:Object(_.a)(I)},{data:L.a.createVertex(e,35044,n)})}},{key:"ensureVertexData",value:function(e,t){if(this._dirty){var n=this.createDataBuffer(t);e.vertexBuffers.data.setData(n),this._dirty=!1}}},{key:"numberOfRenderVertices",value:function(e){return 2*(e.length/3-1)*3}},{key:"createDataBuffer",value:function(e){var t=this,n=e.reduce((function(e,n){return e+t.numberOfRenderVertices(n)}),0);this._count=n;var i,r=I.createBuffer(n),a=this._origin,o=0,s=0,l=Object(y.a)(e);try{for(l.s();!(i=l.n()).done;){for(var u=i.value,h=0;h<u.length;h+=3){var d=Object(c.t)(F,u[h+0],u[h+1],u[h+2]);0===h?s=this._renderCoordsHelper.getAltitude(d):this._renderCoordsHelper.setAltitude(d,s);var f=this._renderCoordsHelper.worldUpAtPosition(d,q),p=o+2*h,b=Object(c.g)(F,d,a);if(h<u.length-3){r.up.setVec(p,f),r.up.setVec(p+3,f),r.up.setVec(p+5,f);for(var v=0;v<6;v++)r.start.setVec(p+v,b);r.extrude.setValues(p+0,0,-1),r.extrude.setValues(p+1,1,-1),r.extrude.setValues(p+2,1,1),r.extrude.setValues(p+3,0,-1),r.extrude.setValues(p+4,1,1),r.extrude.setValues(p+5,0,1)}if(h>0){r.up.setVec(p-2,f),r.up.setVec(p-4,f),r.up.setVec(p-5,f);for(var m=-6;m<0;m++)r.end.setVec(p+m,b)}}o+=this.numberOfRenderVertices(u)}}catch(g){l.e(g)}finally{l.f()}return r.buffer}}]),e}(),q=Object(l.e)(),F=Object(l.e)(),I=Object(x.a)().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude"),N=n(794),G=n(365),B=n(694),W=n(688),H=n(814),Z=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),i=this.configuration,r=t.build(i);return new M.a(e.rctx,r,W.a)}},{key:"bind",value:function(e,t){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*t.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*t.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1);var n=null!=e.angleCutoff?e.angleCutoff:H.c;this.program.setUniform2f("angleCutoff",Math.cos(n),Math.cos(Math.max(0,n-Object(d.g)(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",t.perScreenPixelRatio)}},{key:"initializePipeline",value:function(){return Object(D.e)({blending:Object(D.g)(1,771),colorWrite:D.c})}}]),n}(k.a);Z.shader=new w.a(H.a,(function(){return n.e(194).then(n.bind(null,1173))}));var X=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).heightManifoldEnabled=!1,e.pointDistanceEnabled=!1,e.lineVerticalPlaneEnabled=!1,e.intersectsLineEnabled=!1,e.contrastControlEnabled=!1,e}return n}(S.a);Object(A.a)([Object(S.b)()],X.prototype,"heightManifoldEnabled",void 0),Object(A.a)([Object(S.b)()],X.prototype,"pointDistanceEnabled",void 0),Object(A.a)([Object(S.b)()],X.prototype,"lineVerticalPlaneEnabled",void 0),Object(A.a)([Object(S.b)()],X.prototype,"intersectsLineEnabled",void 0),Object(A.a)([Object(S.b)()],X.prototype,"contrastControlEnabled",void 0);var J=Object(l.e)(),Y=Object(b.e)(),Q={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:Object(d.g)(6),globalAlphaContrastBoost:2};function K(e,t,n,i){var r=J,a=Y;Object(c.n)(r,t,i),Object(c.h)(a,n),a[3]=0,Object(p.m)(a,a,i),Object(g.f)(r,a,e)}var $=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{contrastControlEnabled:!1};Object(i.a)(this,e),this._renderCoordsHelper=t,this._config=r,this._technique=null,this._projInfo=Object(b.e)(),this._zScale=Object(f.a)(),this._heightManifoldEnabled=!1,this._heightManifoldTarget=Object(l.e)(),this._pointDistanceEnabled=!1,this._pointDistanceOrigin=Object(l.e)(),this._pointDistanceTarget=Object(l.e)(),this._lineVerticalPlaneEnabled=!1,this._lineVerticalPlaneSegment=Object(u.d)(),this._intersectsLineEnabled=!1,this._intersectsLineSegment=Object(u.d)(),this._intersectsLineRadius=3,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._pathVerticalPlaneData=null,this._pathTechnique=null,this.canRender=!0,this._tempNormal=Object(l.e)(),this._tempDir=Object(l.e)(),this._tempUp=Object(l.e)(),this._tempVec3A=Object(l.e)(),this._tempVec3B=Object(l.e)(),this._tempVec4=Object(b.e)(),this._tempPlane=Object(g.d)(),this._tempSphere=Object(j.b)(),this._params=Object(B.c)(n,Q)}return Object(r.a)(e,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?17:16]}},{key:"needsLinearDepth",get:function(){return!0}},{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldTarget},set:function(e){Object(c.h)(this._heightManifoldTarget,e),this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._pointDistanceTarget},set:function(e){Object(c.h)(this._pointDistanceTarget,e),this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._pointDistanceOrigin},set:function(e){Object(c.h)(this._pointDistanceOrigin,e),this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(e){Object(u.c)(e,this._lineVerticalPlaneSegment),this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._intersectsLineSegment},set:function(e){Object(u.c)(e,this._intersectsLineSegment),this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._intersectsLineRadius},set:function(e){e!==this._intersectsLineRadius&&(this._intersectsLineRadius=e,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,Object(s.k)(this._pathVerticalPlaneData)&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(e){Object(s.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new U(this._renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(e){Object(s.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new U(this._renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"setParameterValues",value:function(e){Object(B.e)(this._params,e)&&this._requestRender()}},{key:"initializeRenderContext",value:function(e){this._context=e;var t=e.renderContext.rctx;this._quadVAO=Object(N.b)(t),this._techniqueRepository=e.shaderTechniqueRep,this._techniqueConfig=new X;var n=new R;n.contrastControlEnabled=this._config.contrastControlEnabled,this._pathTechnique=this._techniqueRepository.acquire(V,n)}},{key:"uninitializeRenderContext",value:function(){this._quadVAO=Object(s.f)(this._quadVAO),this._technique=Object(s.p)(this._technique),this._pathVerticalPlaneData=Object(s.f)(this._pathVerticalPlaneData),this._pathTechnique=Object(s.p)(this._pathTechnique)}},{key:"render",value:function(e){var t=this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,n=this.pathVerticalPlaneEnabled;if(!t&&!n)return!0;var i=e.camera;return Object(G.f)(i.projectionMatrix,i.fullWidth,i.fullHeight,this._projInfo,this._zScale),t&&this.renderUnified(e),n&&this.renderPath(e),!0}},{key:"renderUnified",value:function(e){var t=e.rctx,n=this._selectTechnique(),i=n.program;t.useProgram(i),n.bindPipelineState(t),this._bindGlobalUniforms(e,i),this.bindHeightManifoldUniforms(e,i),this.bindPointDistanceUniforms(e,i),this.bindLineVerticalPlaneUniforms(e,i),this.bindIntersectsLineUniforms(e,i),n.bind(this._params,e.camera),t.bindVAO(this._quadVAO),t.drawArrays(5,0,4)}},{key:"renderPath",value:function(e){if(!Object(s.j)(this._pathVerticalPlaneData)&&!Object(s.j)(this._pathTechnique)){var t=e.rctx,n=this._pathTechnique,i=n.program;t.useProgram(i),n.bindPipelineState(t),this._bindGlobalUniforms(e,i),n.bind(this._params,this._pathVerticalPlaneData.origin,e.camera),this._pathVerticalPlaneData.draw(e.rctx)}}},{key:"bindHeightManifoldUniforms",value:function(e,t){if(this.heightManifoldEnabled){var n=this._tempVec3A,i=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,n),K(i,this._heightManifoldTarget,n,e.camera.viewMatrix),t.setUniform4fv("heightPlane",i)}}},{key:"bindPointDistanceUniforms",value:function(e,t){if(this._pointDistanceEnabled){var n=e.camera,i=this._tempSphere;Object(c.h)(i,this._pointDistanceOrigin),Object(c.n)(i,i,n.viewMatrix),i[3]=Object(c.j)(this._pointDistanceOrigin,this._pointDistanceTarget),t.setUniform4f("pointDistanceSphere",i[0],i[1],i[2],i[3])}}},{key:"bindLineVerticalPlaneUniforms",value:function(e,t){if(this._lineVerticalPlaneEnabled){var n=this._renderCoordsHelper,i=e.camera,r=this._tempPlane,a=this._tempVec3A,o=this._tempUp,s=this._tempDir,l=this._tempNormal;Object(u.h)(this._lineVerticalPlaneSegment,.5,a),n.worldUpAtPosition(a,o),Object(c.o)(s,this._lineVerticalPlaneSegment.vector),Object(c.d)(l,o,s),Object(c.o)(l,l),K(r,this._lineVerticalPlaneSegment.origin,l,i.viewMatrix),t.setUniform4fv("lineVerticalPlane",r);var h=this._tempVec3A;Object(c.h)(h,this._lineVerticalPlaneSegment.origin),n.setAltitude(h,0),Object(c.n)(h,h,i.viewMatrix),t.setUniform3fv("lineVerticalStart",h);var d=this._tempVec3B;Object(c.c)(d,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector),n.setAltitude(d,0),Object(c.n)(d,d,i.viewMatrix),t.setUniform3fv("lineVerticalEnd",d)}}},{key:"bindIntersectsLineUniforms",value:function(e,t){if(this._intersectsLineEnabled){var n=te,i=ne;if(this._intersectsLineInfinite){var r=e.camera;if(Object(v.c)(Object(O.g)(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),ee),ee.c0=-Number.MAX_VALUE,!Object(m.d)(r.frustum,ee))return;Object(v.e)(ee,n),Object(v.d)(ee,i)}else Object(c.h)(n,this._intersectsLineSegment.origin),Object(c.c)(i,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);var a=this._tempVec3A;Object(c.n)(a,n,e.camera.viewMatrix),t.setUniform3fv("intersectsLineStart",a);var o=this._tempVec4;Object(c.h)(o,this._intersectsLineSegment.vector),this._tempVec4[3]=0,Object(p.m)(this._tempVec4,this._tempVec4,e.camera.viewMatrix),Object(c.n)(i,i,e.camera.viewMatrix),t.setUniform3fv("intersectsLineEnd",i),Object(c.o)(o,o),t.setUniform3f("intersectsLineDirection",o[0],o[1],o[2]),t.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}}},{key:"_bindGlobalUniforms",value:function(e,t){var n=e.camera;t.setUniform4fv("projInfo",this._projInfo),t.setUniform2fv("zScale",this._zScale),t.setUniform2f("nearFar",n.near,n.far),this._heightManifoldEnabled?t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)),t.bindTexture(e.offscreenRenderingHelper.linearDepthTexture,"depthMap"),t.bindTexture(e.offscreenRenderingHelper.mainColorTexture,"frameColor")}},{key:"_requestRender",value:function(){this._context&&this._context.requestRender()}},{key:"_selectTechnique",value:function(){return this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._technique=this._techniqueRepository.releaseAndAcquire(Z,this._techniqueConfig,this._technique),this._technique}}]),e}(),ee=Object(v.a)(),te=Object(l.e)(),ne=Object(l.e)(),ie=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e.view))._angleCutoff=H.c,r._style={},r._heightManifoldTarget=Object(l.e)(),r._heightManifoldEnabled=!1,r._intersectsLine=Object(u.d)(),r._intersectsLineEnabled=!1,r._intersectsLineInfinite=!1,r._lineVerticalPlaneSegment=null,r._pathVerticalPlaneBuffers=null,r._pointDistanceLine=null,r.applyProps(e),r}return Object(r.a)(n,[{key:"testData",get:function(){return this.renderer}},{key:"createResources",value:function(){this.ensureRenderer()}},{key:"destroyResources",value:function(){this.disposeRenderer()}},{key:"updateVisibility",value:function(){this.syncHeightManifold(),this.syncIntersectsLine(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance()}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(e){this._angleCutoff!==e&&(this._angleCutoff=e,this.syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(e){this._style=e,this.syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(e){Object(s.k)(e)?(Object(c.h)(this._heightManifoldTarget,e),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this.syncRenderer(),this.syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(e){if(Object(s.j)(e))this.intersectsLine=null;else{var t=this.view.renderCoordsHelper.worldUpAtPosition(e,re);this.intersectsLine=Object(u.g)(e,t),this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(e){Object(s.k)(e)?(Object(u.c)(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this.syncIntersectsLine(),this.syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(e){this._intersectsLineInfinite=e,this.syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(e){this._lineVerticalPlaneSegment=Object(s.k)(e)?Object(u.c)(e):null,this.syncLineVerticalPlane(),this.syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(e){this._pathVerticalPlaneBuffers=e,this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},set:function(e){this._pointDistanceLine=Object(s.k)(e)?{origin:Object(l.c)(e.origin),target:Object(l.c)(e.target)}:null,this.syncPointDistance(),this.syncRenderer()}},{key:"syncRenderer",value:function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||Object(s.k)(this._pointDistanceLine)||Object(s.k)(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()}},{key:"ensureRenderer",value:function(){Object(s.k)(this.renderer)||(this.renderer=new $(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))}},{key:"syncStyle",value:function(){Object(s.j)(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))}},{key:"syncAngleCutoff",value:function(){Object(s.j)(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})}},{key:"syncHeightManifold",value:function(){Object(s.j)(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))}},{key:"syncIntersectsLine",value:function(){Object(s.j)(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))}},{key:"syncIntersectsLineInfinite",value:function(){Object(s.j)(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)}},{key:"syncPathVerticalPlane",value:function(){Object(s.j)(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=Object(s.k)(this._pathVerticalPlaneBuffers)&&this.visible,Object(s.k)(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}},{key:"syncLineVerticalPlane",value:function(){Object(s.j)(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=Object(s.k)(this._lineVerticalPlaneSegment)&&this.visible,Object(s.k)(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}},{key:"syncPointDistance",value:function(){Object(s.j)(this.renderer)||(this.renderer.pointDistanceEnabled=Object(s.k)(this._pointDistanceLine)&&this.visible,Object(s.k)(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))}},{key:"disposeRenderer",value:function(){Object(s.k)(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)}}]),n}(h.a),re=Object(l.e)()},878:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,r,a,o,s,c,l,u=n(598),h=n(643),d=n(597);function f(e){e.fragment.uniforms.add("projInfo","vec4"),e.fragment.uniforms.add("zScale","vec2"),e.fragment.code.add(Object(d.a)(i||(i=Object(u.a)(["vec3 reconstructPosition(vec2 fragCoord, float depth) {\nreturn vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}"]))))}function p(e,t){e.extensions.add("GL_OES_standard_derivatives"),e.fragment.include(h.a),e.include(f),e.fragment.uniforms.add("glowColor","vec3"),e.fragment.uniforms.add("glowWidth","float"),e.fragment.uniforms.add("glowFalloff","float"),e.fragment.uniforms.add("innerColor","vec3"),e.fragment.uniforms.add("innerWidth","float"),e.fragment.uniforms.add("depthMap","sampler2D"),e.fragment.uniforms.add("nearFar","vec2"),e.fragment.uniforms.add("frameColor","sampler2D"),t.contrastControlEnabled&&e.fragment.uniforms.add("globalAlphaContrastBoost","float"),e.fragment.code.add(Object(d.a)(r||(r=Object(u.a)(["vec4 blendPremultiplied(vec4 source, vec4 dest) {\nfloat oneMinusSourceAlpha = 1.0 - source.a;\nreturn vec4(\nsource.rgb + dest.rgb * oneMinusSourceAlpha,\nsource.a + dest.a * oneMinusSourceAlpha\n);\n}"])))),e.fragment.code.add(Object(d.a)(a||(a=Object(u.a)(["vec4 premultipliedColor(vec3 rgb, float alpha) {\nreturn vec4(rgb * alpha, alpha);\n}"])))),e.fragment.code.add(Object(d.a)(o||(o=Object(u.a)(["vec4 laserlineProfile(float dist) {\nif (dist > glowWidth) {\nreturn vec4(0.0);\n}\nfloat innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\nfloat glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\nreturn blendPremultiplied(\npremultipliedColor(innerColor, innerAlpha),\npremultipliedColor(glowColor, glowAlpha)\n);\n}"])))),e.fragment.code.add(Object(d.a)(s||(s=Object(u.a)(["bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {\nfloat depth = linearDepthFromTexture(depthMap, uv, nearFar);\nif (-depth == nearFar[0]) {\nreturn false;\n}\npos = reconstructPosition(gl_FragCoord.xy, depth);\nnormal = normalize(cross(dFdx(pos), dFdy(pos)));\nfloat ddepth = fwidth(depth);\ndepthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\nreturn true;\n}"])))),t.contrastControlEnabled?e.fragment.code.add(Object(d.a)(c||(c=Object(u.a)(["float rgbToLuminance(vec3 color) {\nreturn dot(vec3(0.2126, 0.7152, 0.0722), color);\n}\nvec4 laserlineOutput(vec4 color) {\nfloat backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);\nfloat alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\nreturn color * alpha;\n}"])))):e.fragment.code.add(Object(d.a)(l||(l=Object(u.a)(["vec4 laserlineOutput(vec4 color) {\nreturn color * globalAlpha;\n}"]))))}},913:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var i,r,a=n(598),o=n(878),s=n(597),c=n(617);function l(e){var t=new c.a;return t.include(o.a,e),t.vertex.uniforms.add("uModelViewMatrix","mat4"),t.vertex.uniforms.add("uProjectionMatrix","mat4"),t.attributes.add("start","vec3"),t.attributes.add("end","vec3"),t.attributes.add("up","vec3"),t.attributes.add("extrude","vec2"),t.varyings.add("uv","vec2"),t.varyings.add("vViewStart","vec3"),t.varyings.add("vViewEnd","vec3"),t.varyings.add("vViewPlane","vec4"),t.vertex.uniforms.add("glowWidth","float"),t.vertex.uniforms.add("pixelToNDC","vec2"),t.vertex.code.add(Object(s.a)(i||(i=Object(a.a)(["void main() {\nvec3 pos = mix(start, end, extrude.x);\nvec4 viewPos = uModelViewMatrix * vec4(pos, 1);\nvec4 projPos = uProjectionMatrix * viewPos;\nvec2 ndcPos = projPos.xy / projPos.w;\nvec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;\nvec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);\nvec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);\nvec2 lxy = abs(sign(projExtrudeDir) - ndcPos);\nndcPos += length(lxy) * projExtrudeDir;\nvec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));\nvec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;\nvViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;\nvViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;\nvViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));\nfloat xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\nndcPos.x += xPaddingPixels * pixelToNDC.x;\nuv = ndcPos * 0.5 + 0.5;\ngl_Position = vec4(ndcPos, 0, 1);\n}"])))),t.fragment.uniforms.add("globalAlpha","float"),t.fragment.uniforms.add("perScreenPixelRatio","float"),t.fragment.code.add(Object(s.a)(r||(r=Object(a.a)(["float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {\nvec3 origin = mix(start, end, 0.5);\nvec3 basis = end - origin;\nvec3 posAtOrigin = pos - origin;\nfloat x = dot(normalize(basis), posAtOrigin);\nfloat y = dot(plane.xyz, posAtOrigin);\nfloat dx = max(abs(x) - length(basis), 0.0);\nfloat dy = y;\nfloat dist = length(vec2(dx, dy));\nfloat width = fwidth(y);\nfloat maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\nfloat pixelDist = dist / min(width, maxPixelDistance);\nreturn abs(pixelDist);\n}\nvoid main() {\nvec3 pos;\nvec3 normal;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\ndiscard;\n}\nfloat distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);\nvec4 color = laserlineProfile(distance);\nfloat alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));\ngl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);\n}"])))),t}var u=Object.freeze({__proto__:null,build:l})},918:function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return G}));var i,r,a,o,s,c,l,u,h,d,f,p,b,v,m,g,O,j,y,_,x,A,P,E,w,k,S,M,C=n(598),D=n(626),V=n(970),R=n(816),z=n(643),L=n(971),T=n(636),U=n(782),q=n(657),F=n(675),I=n(597),N=n(617);function G(e){var t=new N.a;t.extensions.add("GL_OES_standard_derivatives"),t.include(U.a),t.include(V.a,e),t.include(L.a,e),1===e.output&&t.include(R.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2"),t.attributes.add("position","vec3"),t.attributes.add("subdivisionFactor","float"),t.attributes.add("uv0","vec2"),t.attributes.add("auxpos1","vec3"),t.attributes.add("auxpos2","vec3"),t.varyings.add("vColor","vec4"),t.varyings.add("vpos","vec3"),t.varyings.add("linearDepth","float"),e.multipassTerrainEnabled&&t.varyings.add("depth","float");var n=e.falloffEnabled,G=e.innerColorEnabled;return G&&t.varyings.add("vLineDistance","float"),n&&t.varyings.add("vLineDistanceNorm","float"),e.falloffEnabled&&t.fragment.uniforms.add("falloff","float"),e.innerColorEnabled&&(t.fragment.uniforms.add("innerColor","vec4"),t.fragment.uniforms.add("innerWidth","float")),t.vertex.code.add(Object(I.a)(i||(i=Object(C.a)(["#define PERPENDICULAR(v) vec2(v.y, -v.x);\n#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\nfloat interp(float ncp, vec4 a, vec4 b) {\nreturn (-ncp - a.z) / (b.z - a.z);\n}\nvec2 rotate(vec2 v, float a) {\nfloat s = sin(a);\nfloat c = cos(a);\nmat2 m = mat2(c, -s, s, c);\nreturn m * v;\n}"])))),t.vertex.code.add(Object(I.a)(r||(r=Object(C.a)(["vec4 projectAndScale(vec4 pos) {\nvec4 posNdc = proj * pos;\nposNdc.xy *= screenSize / posNdc.w;\nreturn posNdc;\n}"])))),t.vertex.code.add(Object(I.a)(a||(a=Object(C.a)(["\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --\x3e we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ","\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n"])),e.multipassTerrainEnabled?"depth = pos.z;":"")),t.vertex.code.add(Object(I.a)(o||(o=Object(C.a)(["void main(void) {\nfloat coverage = 1.0;\nvpos = position;\nif (uv0.y == 0.0) {\ngl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n}\nelse {\nbool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\nbool isJoin = abs(uv0.y)-3.0 < 0.0;\nfloat lineWidth = getSize() * pixelRatio;\nif (lineWidth < 1.0) {\ncoverage = lineWidth;\nlineWidth = 1.0;\n}else{\nlineWidth = floor(lineWidth + 0.5);\n}\nvec4 pos  = view * vec4(position.xyz, 1.0);\nvec4 prev = view * vec4(auxpos1.xyz, 1.0);\nvec4 next = view * vec4(auxpos2.xyz, 1.0);\nclipAndTransform(pos, prev, next, isStartVertex);\nvec2 left = (pos.xy - prev.xy);\nvec2 right = (next.xy - pos.xy);\nfloat leftLen = length(left);\nfloat rightLen = length(right);"])))),e.stippleEnabled&&t.vertex.code.add(Object(I.a)(s||(s=Object(C.a)(["vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\nvec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\nvec2 stippleSegmentDirection = stippleSegmentInfo.zw;"])))),t.vertex.code.add(Object(I.a)(c||(c=Object(C.a)(["left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\nright = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\nvec2 capDisplacementDir = vec2(0, 0);\nvec2 joinDisplacementDir = vec2(0, 0);\nfloat displacementLen = lineWidth;\nif (isJoin) {\nbool isOutside = ISOUTSIDE;\njoinDisplacementDir = normalize(left + right);\njoinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\nif (leftLen > 0.001 && rightLen > 0.001) {\nfloat nDotSeg = dot(joinDisplacementDir, left);\ndisplacementLen /= length(nDotSeg * left - joinDisplacementDir);\nif (!isOutside) {\ndisplacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n}\n}\nif (isOutside && (displacementLen > miterLimit * lineWidth)) {"])))),e.roundJoins?t.vertex.code.add(Object(I.a)(l||(l=Object(C.a)(["vec2 startDir;\nvec2 endDir;\nif (leftLen < 0.001) {\nstartDir = right;\n}\nelse{\nstartDir = left;\n}\nstartDir = normalize(startDir);\nstartDir = PERPENDICULAR(startDir);\nif (rightLen < 0.001) {\nendDir = left;\n}\nelse{\nendDir = right;\n}\nendDir = normalize(endDir);\nendDir = PERPENDICULAR(endDir);\nfloat rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\njoinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);"])))):t.vertex.code.add(Object(I.a)(u||(u=Object(C.a)(["if (leftLen < 0.001) {\njoinDisplacementDir = right;\n}\nelse if (rightLen < 0.001) {\njoinDisplacementDir = left;\n}\nelse {\njoinDisplacementDir = isStartVertex ? right : left;\n}\njoinDisplacementDir = normalize(joinDisplacementDir);\njoinDisplacementDir = PERPENDICULAR(joinDisplacementDir);"])))),t.vertex.code.add(Object(I.a)(h||(h=Object(C.a)(["displacementLen = lineWidth;\n}\n} else {\nif (leftLen < 0.001) {\njoinDisplacementDir = right;\n}\nelse if (rightLen < 0.001) {\njoinDisplacementDir = left;\n}\nelse {\njoinDisplacementDir = isStartVertex ? right : left;\n}\njoinDisplacementDir = normalize(joinDisplacementDir);\njoinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\ndisplacementLen = lineWidth;\ncapDisplacementDir = isStartVertex ? -right : left;"])))),e.roundCaps?t.vertex.code.add(Object(I.a)(d||(d=Object(C.a)(["float angle = subdivisionFactor*PI*0.5;\njoinDisplacementDir *= cos(angle);\ncapDisplacementDir *= sin(angle);"])))):t.vertex.code.add(Object(I.a)(f||(f=Object(C.a)(["capDisplacementDir *= subdivisionFactor;"])))),t.vertex.code.add(Object(I.a)(p||(p=Object(C.a)(["\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ","\n\n  ","\n  ","\n\n  pos.xy += dpos;\n  "])),n||G?Object(I.a)(b||(b=Object(C.a)(["float lineDist = lineWidth * sign(uv0.y) * pos.w;"]))):"",G?Object(I.a)(v||(v=Object(C.a)(["vLineDistance = lineDist;"]))):"",n?Object(I.a)(m||(m=Object(C.a)(["vLineDistanceNorm = lineDist / lineWidth;"]))):"")),e.stippleEnabled&&(t.vertex.code.add(Object(I.a)(g||(g=Object(C.a)(["{\nvec2 posVec = pos.xy - stippleSegmentOrigin;\nfloat stippleSegmentDirectionLength = length(stippleSegmentDirection);"])))),e.stippleIntegerRepeatsEnabled&&t.vertex.code.add(Object(I.a)(O||(O=Object(C.a)(["float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\nfloat roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\nstipplePatternUvMax = roundedNumberOfPatternRepeats;"])))),t.vertex.code.add(Object(I.a)(j||(j=Object(C.a)(["\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ","\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    "])),e.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale = 1.0;"))),t.vertex.code.add(Object(I.a)(y||(y=Object(C.a)(["pos.xy = pos.xy / screenSize * pos.w;\nvColor = getColor();\nvColor.a *= coverage;\ngl_Position = pos;\n}\n}"])))),e.multipassTerrainEnabled&&(t.fragment.include(z.a),t.include(T.b,e)),t.include(D.a,e),t.fragment.uniforms.add("intrinsicColor","vec4"),t.fragment.include(F.a),t.fragment.code.add(Object(I.a)(_||(_=Object(C.a)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"")),e.innerColorEnabled&&(t.fragment.uniforms.add("pixelRatio","float"),t.fragment.code.add(Object(I.a)(x||(x=Object(C.a)(["float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\nfloat innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\nfloat innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\ncolor = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);"]))))),t.fragment.code.add(Object(I.a)(A||(A=Object(C.a)(["vec4 finalColor = blendStipple(color, stippleAlpha);"])))),e.falloffEnabled&&t.fragment.code.add(Object(I.a)(P||(P=Object(C.a)(["finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);"])))),t.fragment.code.add(Object(I.a)(E||(E=Object(C.a)(["\n    if (finalColor.a < ",") {\n      discard;\n    }\n\n    ","\n    ","\n    ","\n    ","\n    ","\n  }\n  "])),I.a.float(q.c),7===e.output?Object(I.a)(w||(w=Object(C.a)(["gl_FragColor = vec4(finalColor.a);"]))):"",0===e.output?Object(I.a)(k||(k=Object(C.a)(["gl_FragColor = highlightSlice(finalColor, vpos);"]))):"",0===e.output&&e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"",4===e.output?Object(I.a)(S||(S=Object(C.a)(["gl_FragColor = vec4(1.0);"]))):"",1===e.output?Object(I.a)(M||(M=Object(C.a)(["outputDepth(linearDepth);"]))):"")),t}var B=Object.freeze({__proto__:null,build:G})},919:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));n(15);var i=n(66),r=(n(10),n(236),n(603),n(91)),a=(n(85),n(443),n(463),n(267)),o=(n(625),n(142),n(472)),s=n(269),c=n(751),l=n(738);function u(e,t){if("point"===e.type)return d(e,t,!1);if(Object(l.c)(e))switch(e.type){case"extent":return d(e.center,t,!1);case"polygon":return d(e.centroid,t,!1);case"polyline":return d(h(e),t,!0);case"mesh":return d(e.origin,t,!1)}else switch(e.type){case"extent":return d(function(e){var t=Object(i.j)(e.zmin);return Object(c.c)(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),t?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}(e),t,!0);case"polygon":return d(function(e){var t=e.rings[0];if(!t||0===t.length)return null;var n=Object(o.b)(e.rings,e.hasZ);return Object(c.c)(n[0],n[1],n[2],e.spatialReference)}(e),t,!0);case"polyline":return d(h(e),t,!0)}}function h(e){var t=e.paths[0];if(!t||0===t.length)return null;var n=Object(s.f)(t,Object(s.e)(t)/2);return Object(c.c)(n[0],n[1],n[2],e.spatialReference)}function d(e,t,n){var i=n?e:Object(l.a)(e);return t&&e?Object(a.n)(e,i,t)?i:null:i}function f(e,t){for(var n=0;n<e.geometries.length;++n){var i=e.geometries[n].getMutableAttribute("auxpos1");i&&i.data[3]!==t&&(i.data[3]=t,e.geometryVertexAttrsUpdated(n))}}Object(r.e)(0,0),Object(r.e)(.5,0),Object(r.e)(1,0),Object(r.e)(0,.5),Object(r.e)(.5,.5),Object(r.e)(1,.5),Object(r.e)(0,1),Object(r.e)(.5,1),Object(r.e)(1,1)},920:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return x}));var i,r,a,o,s,c,l,u,h=n(598),d=n(626),f=n(695),p=n(785),b=n(816),v=n(674),m=n(643),g=n(636),O=n(657),j=n(675),y=n(597),_=n(617);function x(e){var t=new _.a,n=1===e.output;return t.include(f.a,{linearDepth:n}),t.include(p.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.attributes.add("position","vec3"),t.varyings.add("vpos","vec3"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),n&&(t.include(b.a,e),t.vertex.uniforms.add("cameraNearFar","vec2"),t.varyings.add("linearDepth","float")),t.vertex.code.add(Object(y.a)(i||(i=Object(h.a)(["\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      ","\n      gl_Position = ","\n    }\n  "])),e.multipassTerrainEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",n?Object(y.a)(r||(r=Object(h.a)(["transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);"]))):Object(y.a)(a||(a=Object(h.a)(["transformPosition(proj, view, vpos);"]))))),t.include(d.a,e),t.fragment.include(j.a),e.multipassTerrainEnabled&&(t.fragment.include(m.a),t.include(g.b,e)),t.fragment.uniforms.add("eColor","vec4"),4===e.output&&t.include(v.a),t.fragment.code.add(Object(y.a)(o||(o=Object(h.a)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    vec4 color = ","\n\n    if (color.a < ",") {\n      discard;\n    }\n\n    ","\n\n    ","\n    ",";\n    ",";\n  }\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",e.attributeColor?"vColor * eColor;":"eColor;",y.a.float(O.c),7===e.output?Object(y.a)(s||(s=Object(h.a)(["gl_FragColor = vec4(color.a);"]))):"",0===e.output?Object(y.a)(c||(c=Object(h.a)(["gl_FragColor = highlightSlice(color, vpos); ",""])),e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""):"",4===e.output?Object(y.a)(l||(l=Object(h.a)(["outputHighlight();"]))):"",1===e.output?Object(y.a)(u||(u=Object(h.a)(["outputDepth(linearDepth);"]))):"")),t}var A=Object.freeze({__proto__:null,build:x})},970:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i,r,a,o,s,c,l=n(598),u=n(597);function h(e,t){e.vertex.uniforms.add("intrinsicWidth","float"),t.vvSize?(e.attributes.add("sizeFeatureAttribute","float"),e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.code.add(Object(u.a)(i||(i=Object(l.a)(["float getSize() {\nreturn intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n}"]))))):(e.attributes.add("size","float"),e.vertex.code.add(Object(u.a)(r||(r=Object(l.a)(["float getSize(){\nreturn intrinsicWidth * size;\n}"]))))),t.vvOpacity?(e.attributes.add("opacityFeatureAttribute","float"),e.vertex.constants.add("vvOpacityNumber","int",8),e.vertex.code.add(Object(u.a)(a||(a=Object(l.a)(["uniform float vvOpacityValues[vvOpacityNumber];\nuniform float vvOpacityOpacities[vvOpacityNumber];\nfloat interpolateOpacity( float value ){\nif (value <= vvOpacityValues[0]) {\nreturn vvOpacityOpacities[0];\n}\nfor (int i = 1; i < vvOpacityNumber; ++i) {\nif (vvOpacityValues[i] >= value) {\nfloat f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\nreturn mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n}\n}\nreturn vvOpacityOpacities[vvOpacityNumber - 1];\n}\nvec4 applyOpacity( vec4 color ){\nreturn vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n}"]))))):e.vertex.code.add(Object(u.a)(o||(o=Object(l.a)(["vec4 applyOpacity( vec4 color ){\nreturn color;\n}"])))),t.vvColor?(e.attributes.add("colorFeatureAttribute","float"),e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(Object(u.a)(s||(s=Object(l.a)(["uniform float vvColorValues[vvColorNumber];\nuniform vec4 vvColorColors[vvColorNumber];\nvec4 interpolateColor( float value ) {\nif (value <= vvColorValues[0]) {\nreturn vvColorColors[0];\n}\nfor (int i = 1; i < vvColorNumber; ++i) {\nif (vvColorValues[i] >= value) {\nfloat f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\nreturn mix(vvColorColors[i-1], vvColorColors[i], f);\n}\n}\nreturn vvColorColors[vvColorNumber - 1];\n}\nvec4 getColor(){\nreturn applyOpacity(interpolateColor(colorFeatureAttribute));\n}"]))))):(e.attributes.add("color","vec4"),e.vertex.code.add(Object(u.a)(c||(c=Object(l.a)(["vec4 getColor(){\nreturn applyOpacity(color);\n}"])))))}},971:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r,a,o,s=n(598),c=n(597);function l(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?function(e,t){e.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),t.stippleUVMaxEnabled&&e.varyings.add("stipplePatternUvMax","float"),e.varyings.add("stipplePatternUv","float"),e.fragment.uniforms.add("stipplePatternTexture","sampler2D"),t.stippleOffColorEnabled&&e.fragment.uniforms.add("stippleOffColor","vec4"),e.fragment.code.add(Object(c.a)(i||(i=Object(s.a)(["\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ","\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }"])),t.stippleUVMaxEnabled?"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":"")),t.stippleOffColorEnabled?e.fragment.code.add(Object(c.a)(r||(r=Object(s.a)(["#define discardByStippleAlpha(stippleAlpha, threshold) {}\n#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)"])))):e.fragment.code.add(Object(c.a)(a||(a=Object(s.a)(["#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)"]))))}(e,t):function(e){e.fragment.code.add(Object(c.a)(o||(o=Object(s.a)(["float getStippleAlpha() { return 1.0; }\n#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n#define blendStipple(color, _stippleAlpha_) color"]))))}(e)}},972:function(e,t,n){"use strict";function i(e){return"point"===e.type}n.d(t,"a",(function(){return i}))},973:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var i=n(4),r=n(5),a=n(700),o=n(783),s=(Object(a.a)().vec3f("position"),Object(a.a)().vec3f("position").vec2f("uv0")),c=Object(a.a)().vec3f("position").vec4u8("color"),l=function(){function e(t){Object(i.a)(this,e),this.vertexBufferLayout=t}return Object(r.a)(e,[{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){return e.indices.get("position").length}},{key:"write",value:function(e,t,n,i){Object(o.c)(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,n,i)}}]),e}()},974:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(15),r=n(4),a=n(5),o=n(37),s=n(10),c=function(){function e(){Object(r.a)(this,e),this._isToolEditable=!0,this._manipulators=new o.a,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}return Object(a.a)(e,[{key:"isToolEditable",set:function(e){this._isToolEditable=e}},{key:"length",get:function(){return this._manipulators.length}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.addMany([e],t)[0]}},{key:"addMany",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){var i=t._nextManipulatorId++,r={id:i,manipulator:e,visibilityPredicate:n,attached:!1};return t._manipulators.add(r),t._attached&&t._updateManipulatorAttachment(r),i}))}},{key:"remove",value:function(e){if("number"==typeof e){for(var t=e,n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).id===t){var i=this._manipulators.splice(n,1)[0];return this._detachManipulator(i),i.id}return null}for(var r=e,a=0;a<this._manipulators.length;a++)if(this._manipulators.getItemAt(a).manipulator===r){var o=this._manipulators.splice(a,1)[0];return this._detachManipulator(o),o.id}return null}},{key:"removeAll",value:function(){var e=this;this._manipulators.forEach((function(t){e._detachManipulator(t)})),this._manipulators.removeAll()}},{key:"attach",value:function(){var e=this;this._manipulators.forEach((function(t){e._updateManipulatorAttachment(t)})),this._attached=!0}},{key:"detach",value:function(){var e=this;this._manipulators.forEach((function(t){e._detachManipulator(t)})),this._attached=!1}},{key:"destroy",value:function(){this._manipulators.forEach((function(e){var t=e.manipulator;t.destroy&&t.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}},{key:"on",value:function(e,t){return this._manipulators.on(e,(function(e){t(e)}))}},{key:"forEach",value:function(e){var t,n=Object(i.a)(this._manipulators.items);try{for(n.s();!(t=n.n()).done;){e(t.value)}}catch(r){n.e(r)}finally{n.f()}}},{key:"some",value:function(e){return this._manipulators.items.some(e)}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){return e.push(t.manipulator)})),e}},{key:"intersect",value:function(e,t){var n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((function(r){var a=r.id,o=r.manipulator;if(r.attached&&o.interactive){var c=o.intersectionDistance(e,t);Object(s.k)(c)&&c<i&&(i=c,n={id:a,manipulator:o})}})),n}},{key:"findById",value:function(e){if(Object(s.j)(e))return null;var t,n=Object(i.a)(this._manipulators.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r.id)return r.manipulator}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"_updateManipulatorAttachment",value:function(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}},{key:"_attachManipulator",value:function(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}},{key:"_detachManipulator",value:function(e){if(e.attached){var t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}}},{key:"_isManipulatorItemVisible",value:function(e){return 2===e.visibilityPredicate||(this._isToolEditable?0===e.visibilityPredicate:1===e.visibilityPredicate)}}]),e}()}}]);
//# sourceMappingURL=11.643d1177.chunk.js.map